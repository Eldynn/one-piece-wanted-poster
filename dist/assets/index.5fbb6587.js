var pi=Object.defineProperty,mi=Object.defineProperties;var bi=Object.getOwnPropertyDescriptors;var Ue=Object.getOwnPropertySymbols;var fi=Object.prototype.hasOwnProperty,wi=Object.prototype.propertyIsEnumerable;var Me=(h,e,i)=>e in h?pi(h,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):h[e]=i,E=(h,e)=>{for(var i in e||(e={}))fi.call(e,i)&&Me(h,i,e[i]);if(Ue)for(var i of Ue(e))wi.call(e,i)&&Me(h,i,e[i]);return h},ue=(h,e)=>mi(h,bi(e));var at=(h,e,i)=>(Me(h,typeof e!="symbol"?e+"":e,i),i),Be=(h,e,i)=>{if(!e.has(h))throw TypeError("Cannot "+i)};var t=(h,e,i)=>(Be(h,e,"read from private field"),i?i.call(h):e.get(h)),r=(h,e,i)=>{if(e.has(h))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(h):e.set(h,i)},o=(h,e,i,s)=>(Be(h,e,"write to private field"),s?s.call(h,i):e.set(h,i),i),He=(h,e,i,s)=>({set _(n){o(h,e,n,i)},get _(){return t(h,e,s)}}),d=(h,e,i)=>(Be(h,e,"access private method"),i);import{v as yi,n as vi}from"./vendor.098c5d43.js";const xi=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function i(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=i(n);fetch(n.href,a)}};xi();function ki(h={}){const{immediate:e=!1,onNeedRefresh:i,onOfflineReady:s,onRegistered:n,onRegisterError:a}=h;let l,c;const b=async(m=!0)=>{m&&(l==null||l.addEventListener("controlling",f=>{f.isUpdate&&window.location.reload()})),c&&c.waiting&&await vi(c.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){l=new yi("./service-worker.js",{scope:"./",type:"classic"}),l.addEventListener("activated",m=>{m.isUpdate||s==null||s()});{const m=()=>{i==null||i()};l.addEventListener("waiting",m),l.addEventListener("externalwaiting",m)}l.register({immediate:e}).then(m=>{c=m,n==null||n(m)}).catch(m=>{a==null||a(m)})}return b}ki();var Si=`:host{display:block;position:fixed;cursor:pointer;overflow:hidden}:host([placement="topRight"]){top:0;right:0;transform:rotate(135deg) translate(-71%)}:host([placement="topLeft"]){top:0;left:0;transform:rotate(45deg) scaleY(-1) translate(-71%)}.link{display:inline-block;position:relative;height:100%;width:100%}.octo{position:absolute;height:100%;width:100%;left:50%;transform:rotate(225deg) scale(.70710678118)}.link:hover .octo__arm{animation-name:octocat-wave;animation-timing-function:ease-in-out;animation-iteration-count:1}@keyframes octocat-wave{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}
`;const Ei="github-corner",Li=["size","href","placement","background-color","octopus-color","duration"],ri=document.createElement("template");ri.innerHTML=`
<a class="link" aria-label="View source on GitHub" target="_blank">
  <svg class="octo" viewBox="0 0 250 250" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
    <path
      d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
      fill="currentColor" style="transform-origin: 130px 106px;" class="octo__arm"></path>
    <path
      d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
      fill="currentColor" class="octo__body"></path>
  </svg>
</a>
`;const qe=["topRight","topLeft"],Fe="5rem",Ai="black",Ye="white",Ii="0.5s";var Ut,D,U;class Ci extends HTMLElement{constructor(){super();r(this,Ut,void 0);r(this,D,void 0);r(this,U,void 0);const e=this.attachShadow({mode:"open"}),i=document.createElement("style");i.textContent=Si,e.append(i,ri.content.cloneNode(!0)),o(this,Ut,e.querySelector("a.link")),o(this,D,e.querySelector("svg.octo")),o(this,U,e.querySelector("path.octo__arm")),this.style.width=Fe,this.style.height=Fe,t(this,D).style.fill=Ai,t(this,D).style.color=Ye,t(this,U).style.color=Ye,t(this,U).style.animationDuration=Ii,this.setAttribute("placement",qe[0])}static get observedAttributes(){return Li}attributeChangedCallback(e,i,s){switch(e){case"size":this.style.width=s,this.style.height=s;break;case"href":t(this,Ut).href=s;break;case"background-color":t(this,D).style.fill=s;break;case"octopus-color":console.log("octopusColor",s),t(this,D).style.color=s,t(this,U).style.color=s;break;case"duration":t(this,U).style.animationDuration=s;break;case"placement":qe.includes(s)&&this.setAttribute("placement",s)}}}Ut=new WeakMap,D=new WeakMap,U=new WeakMap;customElements.define(Ei,Ci);var Ri=`:host{outline:none;display:inline-flex;position:relative;cursor:pointer;width:4.25rem;height:5rem;background-color:transparent;transition:.5s;justify-content:center;filter:contrast(100%) brightness(100%) drop-shadow(1px 1px 1px rgba(0,0,0,.5)) drop-shadow(-1px -1px 1px rgba(0,0,0,.5))}:host(:hover){filter:contrast(110%) brightness(110%) drop-shadow(1px 4px 4px rgba(0,0,0,.5)) drop-shadow(-1px 0px 4px rgba(0,0,0,.5))}.img{position:absolute;max-width:100%;max-height:100%}.icon{position:absolute;font-size:1.5rem;color:#513721;display:flex;justify-content:center;align-items:center;top:21%;width:82%;height:44%;box-sizing:border-box}.text{font-size:.9rem;position:absolute;display:flex;justify-content:center;align-items:center;font-family:Scheherazade New,Noto Sans TC,sans-serif;color:#513721;bottom:12%;width:85%;height:20%;white-space:nowrap;overflow:hidden;font-weight:900;text-align:justify;box-sizing:border-box}
`,Ti="assets/wanted.c2a6dd7a.png";const zi="wanted-button",_i=["icon","font-size","loading"],oi=document.createElement("template");oi.innerHTML=`
  <img class="img" src="${Ti}" alt="wanted button"/>
  <div class="icon">
    <i class="fa"></i>
  </div>
  <span class="text"><slot><slot></span>
`;var wt,z,Ht;class Pi extends HTMLElement{constructor(){super();r(this,wt,"");r(this,z,void 0);r(this,Ht,void 0);const e=this.attachShadow({mode:"open"}),i=document.createElement("style");i.textContent=Ri,e.append(i,oi.content.cloneNode(!0)),o(this,z,e.querySelector("i.fa")),o(this,Ht,e.querySelector("span.text"));const s=document.querySelector('link[href*="font-awesome"]');s&&e.appendChild(s.cloneNode())}static get observedAttributes(){return _i}attributeChangedCallback(e,i,s){switch(e){case"icon":o(this,wt,s),t(this,z).classList.add(s);break;case"font-size":t(this,Ht).style.fontSize=s;break;case"loading":s!==null?(this.style.pointerEvents="none",t(this,z).classList.remove(t(this,wt)),t(this,z).classList.add("fa-circle-notch","fa-spin")):(this.style.pointerEvents="auto",t(this,z).classList.remove("fa-circle-notch","fa-spin"),t(this,z).classList.add(t(this,wt)));break}}}wt=new WeakMap,z=new WeakMap,Ht=new WeakMap;customElements.define(zi,Pi);async function Bt(h){return new Promise((e,i)=>{const s=new Image;s.onload=()=>e(s),s.onerror=i,s.src=h})}function We(h,e,i,s){const n=h/i,a=e/s;return Math.min(a,n)}function Xe(h,e,i,s,n,a,l=0){const c=l/2,b=i-c,m=s-c,f=i+n+c,C=s+a+c,T=h>=b&&h<=f,ot=e>=m&&e<=C;return T&&ot}function Mi(h,e,i,s,n,a,l=0){const c=l/2,b=i-c,m=s-c,f=i+n+c,C=s+a+c,T=i+c,ot=s+c,Nt=i+n-c,Ot=s+a-c;return{left:h>=b&&h<=T,right:h>=Nt&&h<=f,top:e>=m&&e<=ot,bottom:e>=Ot&&e<=C}}function ai(h,e){const{actualBoundingBoxAscent:i,actualBoundingBoxDescent:s}=h.measureText(e);return i+s}function Bi(h,e){let i=document.createElement("a");i.setAttribute("href",h),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.click(),i.remove()}var Ni=`:host{display:block;height:100%;width:100%}.container{position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;box-sizing:border-box}
`,Oi="assets/one-piece-wanted.d3bd87d0.png";const ge={url:Oi,width:772,height:1154,avatarPosition:{x:74,y:252,width:638,height:484},namePosition:{x:88,y:826,width:585,height:114},bountyPosition:{x:88,y:958,width:586,height:85},bountyFontSize:70,boundaryOffset:{left:10,right:10,top:10,bottom:10},bellySignSize:{width:60,height:84}};class Pe{constructor(e){at(this,"x",0);at(this,"y",0);at(this,"width",0);at(this,"height",0);at(this,"ctx");this.ctx=e}scale(e){this.x=this.x*e,this.y=this.y*e,this.width=this.width*e,this.height=this.height*e}}var hi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALaSURBVDhPNZTdjuw0EIRtt+04mdlfrUCAEELA4Qpxgc79eQ/e/wV2d5LYjt18zi5WZGXi7urq6vLYf7/9bc+1bdt6K61rCKEZKy44H27vaylliZO1ptba9RCx3rspxXmenedVxDhtegSfRIK10lo7WnHSl6s8v1zIjDHOy8QiXgjycYrJsWop+5pNt2p8b+44OkUomPMGCJmtV2M7OTH6y+WS0tK7ybk64g4K9d5Va9nVNKjM85RSdM5yUur+8vJ8/jSjZghsJN9um/z545MPATLELfPVextioBEYqVEwnRVRc7QDNgo376mzrbmU6lSV1CnSQ0wXJ0GNbcdRD9jTSPf0+/r+miF1Ltje3hF3L6XJP19+hgwVjDHWjzTYBh/ExyAJCWOYrtfp8fHxer2DEKA5Z+2KcI4hkWbUMZvbWz+qz7vW2jwnphhdxeXRptiu9J9bq8uS7u7nEO1Q+7OstYjBSEbgicjOKTul9n0njKMz/lBtRDl0ynuliW3LxJHMMM55jHXKM8BVOfzEYv8Ic2RycD4KJeYxbOOGeTyGMc6o9c632speTDcRdiGkaVrmWX77/okJ8xjLGEmTD0lOtbGpQYxWwe1Kc3boxGTxpLXqmuqWczljh3AA/S/Bx06f2DlIZKLRB+xzWdIUvdHmhl+ndHKJIOBK9tGftbzgP+CMQScmEwa6oVyjLHLJX7/+RAGqoRx1h1vPHFBY7eijkdJPrLrvay2VfFKIlx9wwDSndM37IbThZN3Wz4IK5/D2thof8lEHkrEueCseW1iJ8vt39+Jgc/RWMCh60DW3x/uAjNb6Wvrr+9u63hg1lwzNPmwFWfn6xy/4p9Pn0Aer4wR33hTcBxB8KcKX8elMG5rSAk2554fL0/1yt8TLcMSYMOriAd4/hCCb+xXFzzEt08KN4347tUQ4bjLPEJRJnDnsgDNqsMf12Tfko2CcZEpE8e8k85IeHh7+Azww6jnizFt7AAAAAElFTkSuQmCC",yt,me,vt,xt,be;class Ge extends Pe{constructor(){super(...arguments);r(this,yt,"");r(this,me,1);r(this,vt,0);r(this,xt,null);r(this,be,1.6)}async init(e){try{const i=await Bt(hi);o(this,xt,this.ctx.createPattern(i,"repeat"))}catch(i){throw console.error(i),new Error("Failed to init Name.")}this.setPosition(e)}setPosition(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,o(this,vt,this.height*t(this,be))}set text(e){const i=new Array(t(this,me)).join(" ")+" ";o(this,yt,Array.from(e).join(i))}render(){this.ctx.save(),this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.fillStyle=t(this,xt)?t(this,xt):"none",this.ctx.font=`700 ${t(this,vt)}px 'Scheherazade New', 'Noto Sans TC', serif`;const e=ai(this.ctx,t(this,yt)),i=this.height/e,s=(e-this.height)/2;this.ctx.font=`700 ${Math.floor(t(this,vt)*i)}px 'Scheherazade New', 'Noto Sans TC', serif`,this.ctx.fillText(t(this,yt),this.x+this.width/2,this.y+s,this.width),this.ctx.restore()}}yt=new WeakMap,me=new WeakMap,vt=new WeakMap,xt=new WeakMap,be=new WeakMap;var Wi="assets/paper.6a3dae0b.png";const Ke={x:0,y:0,width:0,height:0};var ht,H,L,kt,_,qt,St,Ft,Je;class $e extends Pe{constructor(){super(...arguments);r(this,Ft);r(this,ht,void 0);at(this,"filter","grayscale(35%) sepia(40%) saturate(80%) contrast(105%)");r(this,H,new Map);r(this,L,null);r(this,kt,null);r(this,_,E({},Ke));r(this,qt,E({},Ke));r(this,St,{left:0,right:0,top:0,bottom:0})}async init(e){o(this,ht,e);try{const i=await Bt(Wi);o(this,kt,this.ctx.createPattern(i,"repeat"))}catch(i){throw console.error(i),new Error("Failed to create fill pattern.")}d(this,Ft,Je).call(this)}async loadImage(e){var i;if(!!e)try{o(this,L,await Bt(e)),d(this,Ft,Je).call(this),(i=t(this,H).get("imageloaded"))==null||i.forEach(s=>s())}catch(s){throw console.error(s),new Error("Failed to load avatar image.")}}scale(e){super.scale(e),this.updateRenderPosition()}setWantedImageInfo(e){o(this,ht,e),o(this,St,E({},e.boundaryOffset)),o(this,_,E({},e.avatarPosition))}updateRenderPosition(){if(!t(this,L))return;const e=We(this.width,this.height,t(this,L).width,t(this,L).height),i=t(this,L).width*e,s=t(this,L).height*e,n=this.x+(this.width-i)/2,a=this.y+(this.height-s)/2;o(this,qt,{x:n,y:a,width:i,height:s})}on(e,i){var s;t(this,H).has(e)||t(this,H).set(e,[]),(s=t(this,H).get(e))==null||s.push(i)}off(e,i){const s=t(this,H).get(e);if(!s)return;const n=s.findIndex(a=>a===i);s.splice(n,1)}render(){if(this.ctx.save(),this.ctx.fillStyle=t(this,kt)?t(this,kt):"none",this.ctx.fillRect(t(this,_).x,t(this,_).y,t(this,_).width,t(this,_).height),!t(this,L)){this.ctx.restore();return}const{x:e,y:i,width:s,height:n}=t(this,qt);this.ctx.filter=this.filter,this.ctx.drawImage(t(this,L),e,i,s,n);const{left:a,right:l,top:c,bottom:b}=t(this,St);e<=a&&this.ctx.clearRect(0,i,a,n),i<=c&&this.ctx.clearRect(e,0,s,c),e+s>this.ctx.canvas.width-l&&this.ctx.clearRect(this.ctx.canvas.width-l,i,l,n),i+n>this.ctx.canvas.height-b&&this.ctx.clearRect(e,this.ctx.canvas.height-b,s,b),this.ctx.canvas.width,this.ctx.restore()}}ht=new WeakMap,H=new WeakMap,L=new WeakMap,kt=new WeakMap,_=new WeakMap,qt=new WeakMap,St=new WeakMap,Ft=new WeakSet,Je=function(){if(!t(this,ht))return;const{avatarPosition:e,boundaryOffset:i}=t(this,ht);this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,o(this,St,E({},i)),o(this,_,{x:this.x,y:this.y,width:this.width,height:this.height}),this.updateRenderPosition()};var ji="assets/belly.5c6b32bd.png",q,lt,fe,Yt,Et,Xt,Lt,we,At;class Qe extends Pe{constructor(e){super(e);r(this,q,"");r(this,lt,!0);r(this,fe,1);r(this,Yt,0);r(this,Et,null);r(this,Xt,void 0);r(this,Lt,null);r(this,we,10);r(this,At,null);o(this,Xt,new Intl.NumberFormat)}async init(e){try{o(this,Lt,await Bt(ji));const i=await Bt(hi);o(this,Et,this.ctx.createPattern(i,"repeat"))}catch(i){throw console.error(i),new Error("Failed to init bounty.")}this.setPosition(e)}setPosition(e){const{bountyPosition:i,bountyFontSize:s,bellySignSize:n}=e;this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,o(this,Yt,s),o(this,At,E({},n))}set text(e){const i=new Array(t(this,fe)).join(" ")+" ",s=Number.parseInt(e);if(Number.isNaN(s)){o(this,lt,!1),o(this,q,Array.from(e).join(i));return}o(this,lt,!0);const n=t(this,Xt).format(s)+"-";o(this,q,Array.from(n).join(i))}render(){if(!t(this,Lt)||!t(this,At))return;const{width:e,height:i}=t(this,At);this.ctx.save(),this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.fillStyle=t(this,Et)?t(this,Et):"none",this.ctx.font=`900 ${t(this,Yt)}px 'Scheherazade New', 'Noto Sans TC', serif`;const s=this.x+this.width/2,n=t(this,lt)?e+t(this,we):0,a=ai(this.ctx,t(this,q)),l=(this.height-a)/2,c=s+n/2,b=this.y+l,m=this.width-n;if(this.ctx.fillText(t(this,q),c,b,m),t(this,lt)){const f=Math.min(this.ctx.measureText(t(this,q)).width,m),C=s-n/2-f/2;this.ctx.drawImage(t(this,Lt),C,this.y,e,i)}this.ctx.restore()}}q=new WeakMap,lt=new WeakMap,fe=new WeakMap,Yt=new WeakMap,Et=new WeakMap,Xt=new WeakMap,Lt=new WeakMap,we=new WeakMap,At=new WeakMap;var P,F,Gt,A,Y,ct,dt,M,It,ye,Di;class Ze{constructor(e){r(this,ye);r(this,P,void 0);r(this,F,void 0);r(this,Gt,1);r(this,A,0);r(this,Y,0);r(this,ct,0);r(this,dt,0);r(this,M,null);r(this,It,null);o(this,P,e),o(this,F,e.canvas)}get scale(){return t(this,Gt)}async loadImage(e){try{const i=await Bt(e.url);o(this,M,i),o(this,ct,i.width),o(this,dt,i.height),o(this,It,e)}catch(i){throw console.error(i),new Error("Failed to load wanted image.")}}setSize({width:e,height:i,padding:s}){if(!t(this,M))throw new Error("Failed to set size: wanted image is null");o(this,ct,e!=null?e:t(this,ct)),o(this,dt,i!=null?i:t(this,dt)),o(this,Y,s!=null?s:t(this,Y));const n=t(this,M).width+t(this,Y)*2,a=t(this,M).height+t(this,Y)*2,l=We(t(this,ct),t(this,dt),n,a);return o(this,Gt,l),o(this,A,t(this,Y)*l),t(this,F).width=n*l,t(this,F).height=a*l,{wantedImageInfo:d(this,ye,Di).call(this,l,t(this,A)),scale:l,scaledPadding:t(this,A)}}render(){!t(this,M)||(t(this,P).save(),t(this,P).shadowColor="rgba(0, 0, 0, 1)",t(this,P).shadowBlur=t(this,A),t(this,P).drawImage(t(this,M),t(this,A),t(this,A),t(this,F).width-t(this,A)*2,t(this,F).height-t(this,A)*2),t(this,P).restore())}}P=new WeakMap,F=new WeakMap,Gt=new WeakMap,A=new WeakMap,Y=new WeakMap,ct=new WeakMap,dt=new WeakMap,M=new WeakMap,It=new WeakMap,ye=new WeakSet,Di=function(e,i){if(!t(this,It))throw new Error("Failed to calculate wanted image info: WantedImageInfo object is null");const{url:s,width:n,height:a,avatarPosition:l,namePosition:c,bountyPosition:b,bountyFontSize:m,boundaryOffset:f,bellySignSize:C}=t(this,It),T=ot=>{const{x:Nt,y:Ot,width:ft,height:ce}=ot;return{x:Nt*e+i,y:Ot*e+i,width:ft*e,height:ce*e}};return{url:s,width:n,height:a,avatarPosition:T(l),namePosition:T(c),bountyPosition:T(b),bountyFontSize:m*e,boundaryOffset:{left:f.left*e+i,right:f.right*e+i,top:f.top*e+i,bottom:f.bottom*e+i},bellySignSize:{width:C.width*e,height:C.height*e}}};var u,k,X,R,ut,gt,I,pt,Kt,$t,ve,Hi,xe,qi,ke,Fi,Se,Yi,Ee,Xi,Le,Gi,Ae,Ki,Ie,$i,Ce,Ji,Jt,Ve,Qt,ti,Zt,ei,Re,Qi,Te,Zi;class Ui extends Pe{constructor(e,i){super(e);r(this,ve);r(this,xe);r(this,ke);r(this,Se);r(this,Ee);r(this,Le);r(this,Ae);r(this,Ie);r(this,Ce);r(this,Jt);r(this,Qt);r(this,Zt);r(this,Re);r(this,Te);r(this,u,void 0);r(this,k,!1);r(this,X,!1);r(this,R,!1);r(this,ut,4);r(this,gt,null);r(this,I,new Map);r(this,pt,0);r(this,Kt,0);r(this,$t,0);o(this,u,i),i.on("imageloaded",()=>this.reset()),e.canvas.addEventListener("mousedown",d(this,ve,Hi).bind(this)),e.canvas.addEventListener("mouseup",d(this,xe,qi).bind(this)),e.canvas.addEventListener("mousemove",d(this,ke,Fi).bind(this)),e.canvas.addEventListener("mouseout",d(this,Se,Yi).bind(this)),e.canvas.addEventListener("wheel",d(this,Ee,Xi).bind(this)),e.canvas.addEventListener("touchstart",d(this,Le,Gi).bind(this)),e.canvas.addEventListener("touchend",d(this,Ae,Ki).bind(this)),e.canvas.addEventListener("touchcancel",d(this,Ie,$i).bind(this)),e.canvas.addEventListener("touchmove",d(this,Ce,Ji).bind(this))}reset(){this.x=t(this,u).x,this.y=t(this,u).y,this.width=t(this,u).width,this.height=t(this,u).height,o(this,k,!1),o(this,X,!1),o(this,R,!1)}render(){!t(this,k)&&!t(this,R)||(this.ctx.save(),He(this,pt)._++,t(this,pt)>16&&o(this,pt,0),this.ctx.lineDashOffset=-t(this,pt),this.ctx.fillStyle="rgba(255,255,255,0.5)",this.ctx.strokeStyle="red",this.ctx.lineWidth=t(this,ut),this.ctx.setLineDash([10,5]),this.ctx.fillRect(this.x,this.y,this.width,this.height),this.ctx.strokeRect(this.x,this.y,this.width,this.height),this.ctx.restore())}}u=new WeakMap,k=new WeakMap,X=new WeakMap,R=new WeakMap,ut=new WeakMap,gt=new WeakMap,I=new WeakMap,pt=new WeakMap,Kt=new WeakMap,$t=new WeakMap,ve=new WeakSet,Hi=function(){o(this,X,!0)},xe=new WeakSet,qi=function(){o(this,X,!1),o(this,R,!1)},ke=new WeakSet,Fi=function(e){const{left:i,top:s}=this.ctx.canvas.getBoundingClientRect(),n=e.clientX-i,a=e.clientY-s;if(t(this,X)){const l=e.clientX-t(this,Kt),c=e.clientY-t(this,$t);d(this,Te,Zi).call(this,l,c)}t(this,R)||d(this,Re,Qi).call(this,n,a),Xe(n,a,this.x,this.y,this.width,this.height,t(this,ut))?o(this,k,!0):o(this,k,!1),o(this,Kt,e.clientX),o(this,$t,e.clientY)},Se=new WeakSet,Yi=function(){o(this,X,!1),o(this,R,!1),o(this,k,!1)},Ee=new WeakSet,Xi=function(e){e.preventDefault();const i=e.deltaY>0?.9:1.1;d(this,Zt,ei).call(this,i)},Le=new WeakSet,Gi=function(e){e.preventDefault();const i=e.changedTouches;for(let l=0;l<i.length;l++)t(this,I).set(i[l].identifier,i[l]);const{left:s,top:n}=this.ctx.canvas.getBoundingClientRect();let a=!1;for(let l of t(this,I).values()){const c=l.clientX-s,b=l.clientY-n;if(Xe(c,b,this.x,this.y,this.width,this.height,t(this,ut))){a=!0;break}}o(this,k,a)},Ae=new WeakSet,Ki=function(e){e.preventDefault(),d(this,Jt,Ve).call(this,e.changedTouches)},Ie=new WeakSet,$i=function(e){e.preventDefault(),d(this,Jt,Ve).call(this,e.changedTouches)},Ce=new WeakSet,Ji=function(e){e.preventDefault();const i=e.changedTouches;if(i.length===1&&t(this,k)){const s=i[0],{clientX:n,clientY:a}=s,l=t(this,I).get(s.identifier);if(l){const c=n-l.clientX,b=a-l.clientY;this.x+=c,this.y+=b,t(this,u).x+=c,t(this,u).y+=b,t(this,u).updateRenderPosition()}}if(i.length===2&&t(this,k)){let s=t(this,I).get(i[0].identifier),n=t(this,I).get(i[1].identifier);if(s&&n){let a=d(this,Qt,ti).call(this,i[0],i[1]),l=d(this,Qt,ti).call(this,s,n),c=a>l?1.02:.98;d(this,Zt,ei).call(this,c)}}for(let s=0;s<i.length;s++)t(this,I).set(i[s].identifier,i[s])},Jt=new WeakSet,Ve=function(e){for(let i=0;i<e.length;i++)t(this,I).delete(e[i].identifier);t(this,I).size||o(this,k,!1)},Qt=new WeakSet,ti=function(e,i){const s=Math.abs(e.clientX-i.clientX),n=Math.abs(e.clientY-i.clientY);return Math.pow(s,2)+Math.pow(n,2)},Zt=new WeakSet,ei=function(e){const i=this.width*e-this.width,s=this.height*e-this.height;this.x=this.x-i/2,this.width=this.width+i,this.y=this.y-s/2,this.height=this.height+s,t(this,u).x=this.x,t(this,u).y=this.y,t(this,u).width=this.width,t(this,u).height=this.height,t(this,u).updateRenderPosition()},Re=new WeakSet,Qi=function(e,i){const s=Mi(e,i,this.x,this.y,this.width,this.height,t(this,ut));s.left||s.right?(this.ctx.canvas.style.cursor="ew-resize",o(this,gt,s.left?"left":"right")):s.top||s.bottom?(this.ctx.canvas.style.cursor="ns-resize",o(this,gt,s.top?"top":"bottom")):t(this,k)?this.ctx.canvas.style.cursor="move":this.ctx.canvas.style.cursor="default"},Te=new WeakSet,Zi=function(e,i){switch(this.ctx.canvas.style.cursor){case"move":this.x+=e,this.y+=i,t(this,u).x+=e,t(this,u).y+=i,t(this,u).updateRenderPosition();break;case"ew-resize":{if(o(this,R,!0),t(this,gt)==="right"){const s=Math.max(this.width+e,1);this.width=s,t(this,u).width=s}else{const s=this.x+e;if(s>=this.x+this.width)break;const n=this.width-e;this.x=s,t(this,u).x=s,this.width=n,t(this,u).width=n}t(this,u).updateRenderPosition();break}case"ns-resize":{if(o(this,R,!0),t(this,gt)==="bottom"){const s=Math.max(this.height+i,1);this.height=s,t(this,u).height=s}else{const s=this.y+i;if(s>=this.y+this.height)break;const n=this.height-i;this.y=s,t(this,u).y=s,this.height=n,t(this,u).height=n}t(this,u).updateRenderPosition()}}};const Vi="wanted-poster",ts=["name","bounty","avatar-url","filter","padding"];var G,K,Vt,v,Ct,B,N,O,W,Rt,te,Tt,Ne,ee,ii,ie,si;class es extends HTMLElement{constructor(){super();r(this,Tt);r(this,ee);r(this,ie);r(this,G,void 0);r(this,K,void 0);r(this,Vt,void 0);r(this,v,void 0);r(this,Ct,void 0);r(this,B,void 0);r(this,N,void 0);r(this,O,void 0);r(this,W,void 0);r(this,Rt,void 0);r(this,te,void 0);o(this,W,"init");const e=this.attachShadow({mode:"open"}),i=document.createElement("canvas"),s=document.createElement("div");s.className="container",s.appendChild(i);const n=document.createElement("style");n.textContent=Ni,e.append(n,s);const a=i.getContext("2d");o(this,G,s),o(this,K,i),o(this,Vt,a),o(this,O,new Ze(a)),o(this,v,new $e(a)),o(this,B,new Ge(a)),o(this,N,new Qe(a)),o(this,Ct,new Ui(a,t(this,v))),o(this,Rt,new ResizeObserver(()=>{clearTimeout(t(this,te)),o(this,te,window.setTimeout(()=>d(this,ee,ii).call(this),200))})),t(this,Rt).observe(s)}async export(){var ce,je;const e=document.createElement("canvas");e.style.display="none",t(this,G).appendChild(e);const i=e.getContext("2d"),s=d(this,Tt,Ne).call(this),n=new Ze(i),a=new $e(i),l=new Ge(i),c=new Qe(i);await n.loadImage(ge);const b=ge.width+s*2,m=ge.height+s*2,{wantedImageInfo:f}=n.setSize({width:b,height:m,padding:s});await a.init(f),await l.init(f.namePosition),await c.init(f),await a.loadImage(this.getAttribute("avatar-url")),l.text=(ce=this.getAttribute("name"))!=null?ce:"",c.text=(je=this.getAttribute("bounty"))!=null?je:"";const{x:C,y:T,width:ot,height:Nt,filter:Ot}=t(this,v),ft=t(this,O).scale;a.x=C/ft,a.y=T/ft,a.width=ot/ft,a.height=Nt/ft,a.filter=Ot,a.updateRenderPosition(),a.render(),n.render(),c.render(),l.render();try{const de=await new Promise(ui=>{e.toBlob(gi=>ui(gi),"image/png",1)});if(!de)throw new Error("blob is null");const De=URL.createObjectURL(de);Bi(De,"wanted-poster.png"),URL.revokeObjectURL(De),t(this,G).removeChild(e)}catch(de){console.error(de),this.dispatchEvent(new CustomEvent("ExportError",{bubbles:!0}))}}static get observedAttributes(){return ts}async connectedCallback(){var n,a;console.log("[connected]"),await new Promise(l=>{setTimeout(()=>l(""))}),o(this,W,"loading");const e=d(this,Tt,Ne).call(this),i=t(this,G).getBoundingClientRect();try{await t(this,O).loadImage(ge);const{wantedImageInfo:l}=t(this,O).setSize({width:i.width,height:i.height,padding:e});await t(this,v).init(l),await t(this,B).init(l.namePosition),await t(this,N).init(l),await t(this,v).loadImage(this.getAttribute("avatar-url"))}catch(l){o(this,W,"error"),console.error("Failed to init wanted poster.",l);return}t(this,B).text=(n=this.getAttribute("name"))!=null?n:"",t(this,N).text=(a=this.getAttribute("bounty"))!=null?a:"";const s=this.getAttribute("filter");s&&(t(this,v).filter=s),o(this,W,"success"),d(this,ie,si).call(this),this.dispatchEvent(new CustomEvent("WantedPosterLoaded",{bubbles:!0}))}disconnectedCallback(){console.log("[disconnected]"),t(this,Rt).disconnect()}adoptedCallback(){console.log("[adopted]")}async attributeChangedCallback(e,i,s){if(t(this,W)==="success")switch(e){case"name":t(this,B).text=s;break;case"bounty":t(this,N).text=s;break;case"avatar-url":{await t(this,v).loadImage(s);break}case"filter":{t(this,v).filter=s;break}case"padding":{d(this,ee,ii).call(this);break}}}}G=new WeakMap,K=new WeakMap,Vt=new WeakMap,v=new WeakMap,Ct=new WeakMap,B=new WeakMap,N=new WeakMap,O=new WeakMap,W=new WeakMap,Rt=new WeakMap,te=new WeakMap,Tt=new WeakSet,Ne=function(){const e=this.getAttribute("padding");if(!e)return 0;const i=Number.parseInt(e);return Number.isNaN(i)?0:i},ee=new WeakSet,ii=function(){if(t(this,W)!=="success")return;const e=d(this,Tt,Ne).call(this),i=t(this,G).getBoundingClientRect(),s=We(i.width,i.height,t(this,K).width,t(this,K).height),{wantedImageInfo:n}=t(this,O).setSize({width:i.width,height:i.height,padding:e});t(this,B).setPosition(n.namePosition),t(this,N).setPosition(n),t(this,v).setWantedImageInfo(n),t(this,v).scale(s),t(this,Ct).scale(s)},ie=new WeakSet,si=function(){t(this,Vt).clearRect(0,0,t(this,K).width,t(this,K).height),t(this,v).render(),t(this,O).render(),t(this,N).render(),t(this,B).render(),t(this,Ct).render(),requestAnimationFrame(d(this,ie,si).bind(this))};customElements.define(Vi,es);var is=`:host{--text-shadow: .1rem .1rem .1rem rgba(0, 0, 0, .5);--element-filter: drop-shadow(.1rem .2rem .1rem rgba(0, 0, 0, .4)) drop-shadow(-.1rem 0 .1rem rgba(0, 0, 0, .4)) contrast(100%) brightness(100%);--element-hover-filter: drop-shadow(.2rem .3rem .1rem rgba(0, 0, 0, .4)) drop-shadow(-.2rem 0 .1rem rgba(0, 0, 0, .5)) contrast(110%) brightness(110%);--slider-thumb-size: 2rem;display:block;position:fixed;top:0;left:0;width:300px;max-width:80%;height:100%;transform:translate(-105%);transition:transform .2s;box-shadow:.1rem 0 .3rem #00000080;background:linear-gradient(120deg,rgb(245 198 95),rgb(245 218 158),rgb(245 198 96));border:1px solid #3b230e;padding:.125rem;box-sizing:border-box}:host(.open){transform:translate(0)}.container{display:flex;flex-direction:column;width:100%;height:100%;background:url(./images/wood-bg.png) repeat-y center top;border:.0625rem solid rgb(180,150,81);box-shadow:inset 0 0 .2rem .2rem #0000007f;box-sizing:border-box}.field-container{display:flex;flex-direction:column;gap:2rem;flex:1 0;padding:1rem;overflow-y:auto;overflow-x:hidden}.action-container{display:flex;align-items:center;justify-content:space-around;height:4rem;padding:0 1rem}.wood-button{border:0;outline:none;color:#fff;cursor:pointer;background-image:url(./images/wood-button.png);background-color:transparent;background-size:100% 100%;background-repeat:no-repeat;background-position:center;width:6rem;height:2rem;display:flex;align-items:center;justify-content:center;color:#fffc;text-shadow:var(--text-shadow);filter:var(--element-filter);transition:.2s}.wood-button:hover{filter:var(--element-hover-filter)}.close-button{border:0;outline:none;cursor:pointer;background-image:url(./images/close-button.png);background-color:transparent;background-size:100% 100%;background-repeat:no-repeat;background-position:center;width:2rem;height:2rem;filter:var(--element-filter);transition:.2s}.close-button:hover{filter:var(--element-hover-filter)}.text-input{border:0;outline:none;color:#584034;background-image:url(./images/input-frame.png);background-color:transparent;background-size:100% 100%;background-repeat:no-repeat;background-position:center;text-align:center;line-height:4rem;font-size:2rem;padding:0 1rem;text-shadow:var(--text-shadow);filter:var(--element-filter)}.text-input::placeholder{color:#0000004d;font-size:2rem;text-shadow:none}.slider{display:flex;flex-direction:column;align-items:center}.slider__label{font-family:sans-serif;color:#584034;font-size:.75rem;background-image:url(./images/scroll-paper.png);background-color:transparent;background-size:100% 100%;background-repeat:no-repeat;background-position:center;width:6rem;height:2rem;display:inline-flex;align-items:center;justify-content:center;padding-bottom:.1rem;box-sizing:border-box;margin:0;position:relative}.slider__input{appearance:none;width:100%;height:2.5rem;background:transparent;outline:none}.slider__input::-webkit-slider-runnable-track{height:.75rem;background-color:#584034;border:1px solid rgba(0,0,0,.8);box-shadow:0 0 3px 1px #000c;border-radius:.1rem}.slider__input::-moz-range-track{height:.75rem;background-color:#584034;border:1px solid rgba(0,0,0,.8);box-shadow:0 0 3px 1px #000c;border-radius:.1rem}.slider__input::-webkit-slider-thumb{appearance:none;position:relative;top:-.75rem;width:var(--slider-thumb-size);height:var(--slider-thumb-size);border:0;background:url(./images/slider-thumb.png);background-color:transparent;background-size:cover;background-repeat:no-repeat;background-position:center;cursor:pointer;filter:var(--element-filter)}.slider__input::-moz-range-thumb{position:relative;top:-.75rem;width:var(--slider-thumb-size);height:var(--slider-thumb-size);border:0;background:url(./images/slider-thumb.png);background-color:transparent;background-size:cover;background-repeat:no-repeat;background-position:center;cursor:pointer;filter:var(--element-filter)}::selection{color:#fff;background:rgba(88,64,52,.8);filter:brightness(120%)}::-webkit-scrollbar{width:.2rem}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:#35261f;border-radius:.1rem}::-webkit-scrollbar-corner{background:transparent}
`;const Dt=new Map,jt={avatarUrl:"",name:"",bounty:"",filter:"",padding:10,blur:0,brightness:100,contrast:105,grayscale:35,hueRotate:0,saturate:80,sepia:40};function Oe({blur:h,brightness:e,contrast:i,grayscale:s,hueRotate:n,saturate:a,sepia:l}){return`blur(${h}px) brightness(${e}%) contrast(${i}%) grayscale(${s}%) hue-rotate(${n}deg) saturate(${a}%) sepia(${l}%)`}const p=new Proxy(ue(E({},jt),{filter:Oe(jt)}),{set(h,e,i,s){if(!(e in jt))return!1;switch(e){case"blur":case"brightness":case"contrast":case"grayscale":case"hueRotate":case"saturate":case"sepia":const n=Oe(ue(E({},h),{[e]:i}));if(n===h.filter)break;h.filter=n,setTimeout(()=>{var l;((l=Dt.get("filter"))!=null?l:[]).forEach(c=>c("filter",n,h))})}return setTimeout(()=>{var a;((a=Dt.get(e))!=null?a:[]).forEach(l=>l(e,i,h))}),Reflect.set(h,e,i,s)}});function w(h,e){let i=Dt.get(h);i||(i=[]),i.push(e),Dt.set(h,i)}function y(h,e){let i=Dt.get(h);if(!i)return;const s=i.findIndex(n=>n===e);s>-1&&i.splice(s,1)}function li(){Object.assign(p,ue(E({},jt),{filter:Oe(jt)}))}const ci=document.createElement("template");ci.innerHTML=`
<div class="container">
  <div class="field-container">
    <input id="nameInput" class="text-input" placeholder="Name"/>
    <input id="bountyInput" class="text-input" placeholder="Bounty"/>

    <div class="slider">
      <label for="paddingSlider" class="slider__label">Padding</label>
      <input id="paddingSlider" class="slider__input" type="range" min="0" max="20" >
    </div>

    <div class="slider">
      <label for="blurSlider" class="slider__label">Blur</label>
      <input id="blurSlider" class="slider__input" type="range" min="0" max="10" >
    </div>

    <div class="slider">
      <label for="brightnessSlider" class="slider__label">Brightness</label>
      <input id="brightnessSlider" class="slider__input" type="range" min="0" max="200" >
    </div>

    <div class="slider">
      <label for="contrastSlider" class="slider__label">Contrast</label>
      <input id="contrastSlider" class="slider__input" type="range" min="0" max="200" >
    </div>

    <div class="slider">
      <label for="grayscaleSlider" class="slider__label">Grayscale</label>
      <input id="grayscaleSlider" class="slider__input" type="range" min="0" max="100" >
    </div>

    <div class="slider">
      <label for="hueRotateSlider" class="slider__label">Hue Rotate</label>
      <input id="hueRotateSlider" class="slider__input" type="range" min="0" max="360" >
    </div>

    <div class="slider">
      <label for="saturateSlider" class="slider__label">Saturate</label>
      <input id="saturateSlider" class="slider__input" type="range" min="0" max="200" >
    </div>

    <div class="slider">
      <label for="sepiaSlider" class="slider__label">Sepia</label>
      <input id="sepiaSlider" class="slider__input" type="range" min="0" max="100" >
    </div>
  </div>
  <div class="action-container">
    <button id="closeButton" class="close-button" aria-label="Close side-menu button"></button>
    <button id="resetButton" class="wood-button" aria-label="Reset button">RESET</button>
  </div>
</div>

`;const ss="side-menu";var zt,$,J,Q,Z,V,tt,et,it,st,nt,se,ne,_t,g;class ns extends HTMLElement{constructor(){super();r(this,zt,!1);r(this,$,void 0);r(this,J,void 0);r(this,Q,void 0);r(this,Z,void 0);r(this,V,void 0);r(this,tt,void 0);r(this,et,void 0);r(this,it,void 0);r(this,st,void 0);r(this,nt,void 0);r(this,se,void 0);r(this,ne,void 0);r(this,_t,void 0);r(this,g,void 0);const e=this.attachShadow({mode:"open"}),i=document.createElement("style");i.textContent=is,e.append(i,ci.content.cloneNode(!0)),o(this,$,e.querySelector("#nameInput")),o(this,J,e.querySelector("#bountyInput")),o(this,Q,e.querySelector("#paddingSlider")),o(this,Z,e.querySelector("#blurSlider")),o(this,V,e.querySelector("#brightnessSlider")),o(this,tt,e.querySelector("#contrastSlider")),o(this,et,e.querySelector("#grayscaleSlider")),o(this,it,e.querySelector("#hueRotateSlider")),o(this,st,e.querySelector("#saturateSlider")),o(this,nt,e.querySelector("#sepiaSlider")),o(this,se,e.querySelector("#closeButton")),o(this,ne,e.querySelector("#resetButton")),o(this,g,(s,n)=>{switch(n=n.toString(),s){case"name":t(this,$).value=n;break;case"bounty":t(this,J).value=n;break;case"padding":t(this,Q).value=n;break;case"blur":t(this,Z).value=n;break;case"brightness":t(this,V).value=n;break;case"contrast":t(this,tt).value=n;break;case"grayscale":t(this,et).value=n;break;case"hueRotate":t(this,it).value=n;break;case"saturate":t(this,st).value=n;break;case"sepia":t(this,nt).value=n;break}}),o(this,_t,()=>this.toggle(!1)),this.addEventListener("click",s=>s.stopPropagation())}toggle(e){if(e){o(this,zt,!0),this.classList.add("open"),setTimeout(()=>{o(this,zt,!1)},200);return}!t(this,zt)&&this.classList.remove("open")}connectedCallback(){window.addEventListener("click",t(this,_t)),w("name",t(this,g)),w("bounty",t(this,g)),w("padding",t(this,g)),w("blur",t(this,g)),w("saturate",t(this,g)),w("contrast",t(this,g)),w("grayscale",t(this,g)),w("hueRotate",t(this,g)),w("hueRotate",t(this,g)),w("sepia",t(this,g)),t(this,$).value=p.name,t(this,J).value=p.bounty.toString(),t(this,Q).value=p.padding.toString(),t(this,Z).value=p.blur.toString(),t(this,V).value=p.brightness.toString(),t(this,tt).value=p.contrast.toString(),t(this,et).value=p.grayscale.toString(),t(this,it).value=p.hueRotate.toString(),t(this,st).value=p.saturate.toString(),t(this,nt).value=p.sepia.toString(),t(this,$).addEventListener("keyup",()=>p.name=t(this,$).value),t(this,J).addEventListener("keyup",()=>p.bounty=t(this,J).value),t(this,Q).addEventListener("change",()=>p.padding=parseInt(t(this,Q).value)),t(this,Z).addEventListener("change",()=>p.blur=parseInt(t(this,Z).value)),t(this,V).addEventListener("change",()=>p.brightness=parseInt(t(this,V).value)),t(this,tt).addEventListener("change",()=>p.contrast=parseInt(t(this,tt).value)),t(this,et).addEventListener("change",()=>p.grayscale=parseInt(t(this,et).value)),t(this,it).addEventListener("change",()=>p.hueRotate=parseInt(t(this,it).value)),t(this,st).addEventListener("change",()=>p.saturate=parseInt(t(this,st).value)),t(this,nt).addEventListener("change",()=>p.sepia=parseInt(t(this,nt).value)),t(this,se).addEventListener("click",()=>this.toggle(!1)),t(this,ne).addEventListener("click",li)}disconnectedCallback(){window.removeEventListener("click",t(this,_t)),y("name",t(this,g)),y("bounty",t(this,g)),y("padding",t(this,g)),y("blur",t(this,g)),y("saturate",t(this,g)),y("contrast",t(this,g)),y("grayscale",t(this,g)),y("hueRotate",t(this,g)),y("hueRotate",t(this,g)),y("sepia",t(this,g))}}zt=new WeakMap,$=new WeakMap,J=new WeakMap,Q=new WeakMap,Z=new WeakMap,V=new WeakMap,tt=new WeakMap,et=new WeakMap,it=new WeakMap,st=new WeakMap,nt=new WeakMap,se=new WeakMap,ne=new WeakMap,_t=new WeakMap,g=new WeakMap;customElements.define(ss,ns);var rs=`:host{display:block;width:100%;height:100%;background-image:url(./images/wood-panel.jpg);background-blend-mode:multiply;background-size:cover;background-position:center;padding:1rem;box-sizing:border-box;transition:background-color .2s}:host(.warcriminal){background-image:url(./images/wood-panel.jpg),url(./images/blood-stains-0.png)}:host(.dragin){background-color:silver}.github-corner{transition:.2s}.github-corner:hover{filter:brightness(130%)}#uploadInput{display:none}.blood-overlay{position:absolute;width:100%;height:100%;top:0;left:0;opacity:.8;display:none;background-image:url(./images/blood-stains-1.png);background-size:cover;background-position:center;mix-blend-mode:multiply;animation-name:fade-in;animation-duration:4s}.blood-overlay--visible{display:block}.loading-overlay{position:absolute;width:100%;height:100%;top:0;left:0;display:flex;align-items:center;justify-content:center;background-image:radial-gradient(#e1e4e7,#a5aab0)}.loading-overlay__luffy{max-width:50vw;max-height:40vh;animation-name:logo-blink;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear;filter:contrast(80%) brightness(85%) drop-shadow(0 1px 3px gray)}.button-container{position:absolute;display:flex;width:100%;box-sizing:border-box;gap:.5rem;bottom:0;left:0;padding:0 1rem 1rem}.criminal{outline:none;position:relative;cursor:pointer;margin-left:auto;width:5rem;height:5rem;border:0;padding:0;background-color:transparent;visibility:hidden;opacity:0;transition:2s}.criminal--visible{visibility:visible;opacity:1}.criminal.criminal--visible:after{top:55%;opacity:1}.criminal:before{position:absolute;top:0;left:0;content:" ";width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:center;transition:filter .5s;background-image:url(./images/criminal-avatar.png);filter:contrast(85%) brightness(0%) drop-shadow(1px 1px .5rem crimson) drop-shadow(-1px -1px .5rem crimson)}.criminal--stamp:before{background-image:url(./images/criminal-stamp.png),url(./images/criminal-avatar.png);filter:contrast(85%) brightness(110%) drop-shadow(1px 1px .1rem rgba(0,0,0,.5)) drop-shadow(-1px -1px .1rem rgba(0,0,0,.5))}.criminal:after{position:absolute;top:120%;left:53%;transform:translate(-50%,-50%);color:#fff;content:"?";font-size:2rem;filter:brightness(100%)!important;transition:1s ease-out;opacity:0}.criminal--stamp:after{content:""}@keyframes logo-blink{50%{filter:contrast(120%) brightness(110%) drop-shadow(0 5px 3px gray)}}@keyframes fade-in{0%{opacity:0}to{opacity:.8}}
`;const di=document.createElement("template");di.innerHTML=`
  <input id="uploadInput" type="file" accept="image/*">
  <slot name="poster"></slot>
  <div class="blood-overlay"></div>

  <github-corner
    class="github-corner"
    background-color="#584034"
    duration="1s"
    size="5rem"
    href="https://github.com/YuskaWu/one-piece-wanted-poster">
  </github-corner>

  <div class="button-container">
    <wanted-button
      id="configButton"
      icon="fa-cog">
      CONFIG
    </wanted-button>

    <wanted-button
      id="uploadButton"
      icon="fa-upload">
      UPLOAD
    </wanted-button>

    <wanted-button
      id="downloadButton"
      icon="fa-download"
      font-size="0.65rem">
      DOWNLOAD
    </wanted-button>

    <button id="criminalButton" class="criminal" aria-label="Criminal mode button"></button>
  </div>

  <slot name="sideMenu"></slot>

  <div class="loading-overlay">
    <img class="loading-overlay__luffy" src="./images/luffy.png" alt="luffy logo"/>
  </div>
`;const os="app-container",pe="#warcriminal",as={padding:10,name:"PUTLER",bounty:"War Criminal",avatarUrl:"./images/war-criminal.png"};var re,Pt,j,oe,ae,mt,bt,he,S,Mt,x,ze,ls,_e,cs,le,ni,rt,Wt;class hs extends HTMLElement{constructor(){super();r(this,ze);r(this,_e);r(this,le);r(this,rt);r(this,re,void 0);r(this,Pt,void 0);r(this,j,void 0);r(this,oe,void 0);r(this,ae,void 0);r(this,mt,void 0);r(this,bt,void 0);r(this,he,0);r(this,S,void 0);r(this,Mt,void 0);r(this,x,void 0);const e=this.attachShadow({mode:"open"});o(this,S,e);const i=document.createElement("style");i.textContent=rs,e.append(i,di.content.cloneNode(!0)),e.addEventListener("WantedPosterLoaded",()=>{d(this,ze,ls).call(this)});const s=t(this,S).querySelector("slot[name=poster]");o(this,Pt,s==null?void 0:s.assignedNodes()[0]);const n=t(this,S).querySelector("slot[name=sideMenu]");o(this,re,n==null?void 0:n.assignedNodes()[0]),o(this,j,t(this,S).querySelector("#uploadInput")),o(this,oe,t(this,S).querySelector("#configButton")),o(this,ae,t(this,S).querySelector("#uploadButton")),o(this,mt,t(this,S).querySelector("#downloadButton")),o(this,bt,t(this,S).querySelector("#criminalButton")),o(this,Mt,d(this,_e,cs).bind(this)),o(this,x,(a,l)=>{switch(a){case"avatarUrl":d(this,rt,Wt).call(this,{"avatar-url":l.toString()});case"name":case"bounty":case"padding":case"filter":d(this,rt,Wt).call(this,{[a]:l.toString()})}}),window.addEventListener("hashchange",t(this,Mt))}connectedCallback(){o(this,he,new Date().getTime()),d(this,rt,Wt).call(this,{padding:p.padding.toString(),filter:p.filter}),w("avatarUrl",t(this,x)),w("name",t(this,x)),w("bounty",t(this,x)),w("padding",t(this,x)),w("filter",t(this,x)),location.hash===pe&&d(this,le,ni).call(this,!0),this.addEventListener("dragover",e=>{e.preventDefault()}),this.addEventListener("dragenter",()=>{this.classList.add("dragin")}),this.addEventListener("dragleave",()=>{this.classList.remove("dragin")}),this.addEventListener("drop",e=>{var n;e.preventDefault(),this.classList.remove("dragin");const i=(n=e.dataTransfer)==null?void 0:n.files[0];if(!i||!i.type.startsWith("image"))return;const s=URL.createObjectURL(i);d(this,rt,Wt).call(this,{"avatar-url":s})}),t(this,j).addEventListener("change",()=>{const e=t(this,j).files?t(this,j).files[0]:null;if(!e||!e.type.startsWith("image"))return;const i=URL.createObjectURL(e);d(this,rt,Wt).call(this,{"avatar-url":i})}),t(this,oe).addEventListener("click",()=>{t(this,re).toggle(!0)}),t(this,ae).addEventListener("click",()=>{t(this,j).value="",t(this,j).click()}),t(this,mt).addEventListener("click",async()=>{t(this,mt).setAttribute("loading","true"),await t(this,Pt).export(),t(this,mt).removeAttribute("loading")}),t(this,bt).addEventListener("click",()=>{const e=location.hash===pe;location.hash=e?"":pe})}disconnectedCallback(){window.removeEventListener("hashchange",t(this,Mt)),y("avatarUrl",t(this,x)),y("name",t(this,x)),y("bounty",t(this,x)),y("padding",t(this,x)),y("filter",t(this,x))}}re=new WeakMap,Pt=new WeakMap,j=new WeakMap,oe=new WeakMap,ae=new WeakMap,mt=new WeakMap,bt=new WeakMap,he=new WeakMap,S=new WeakMap,Mt=new WeakMap,x=new WeakMap,ze=new WeakSet,ls=function(){const e=t(this,S).querySelector(".loading-overlay");let i=1e3,s=setInterval(()=>{new Date().getTime()-t(this,he)<i||(clearTimeout(s),e.style.transition="opacity 1s",e.style.opacity="0",setTimeout(()=>e.remove(),1e3),setTimeout(()=>t(this,bt).classList.add("criminal--visible"),3e3))},200)},_e=new WeakSet,cs=function(){d(this,le,ni).call(this,location.hash===pe)},le=new WeakSet,ni=function(e){const i=t(this,S).querySelector(".blood-overlay");!i||(this.classList.toggle("warcriminal"),i.classList.toggle("blood-overlay--visible"),t(this,bt).classList.toggle("criminal--stamp"),e&&(li(),Object.assign(p,E({},as))))},rt=new WeakSet,Wt=function(e){var s;const i=Object.keys(e);for(let n of i){const a=(s=e[n])!=null?s:"";t(this,Pt).setAttribute(n,a)}};customElements.define(os,hs);
