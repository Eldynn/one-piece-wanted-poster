var Pi=Object.defineProperty;var Ci=(r,n,t)=>n in r?Pi(r,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[n]=t;var lt=(r,n,t)=>(Ci(r,typeof n!="symbol"?n+"":n,t),t),Me=(r,n,t)=>{if(!n.has(r))throw TypeError("Cannot "+t)};var e=(r,n,t)=>(Me(r,n,"read from private field"),t?t.call(r):n.get(r)),a=(r,n,t)=>{if(n.has(r))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(r):n.set(r,t)},h=(r,n,t,i)=>(Me(r,n,"write to private field"),i?i.call(r,t):n.set(r,t),t),Je=(r,n,t,i)=>({set _(s){h(r,n,s,t)},get _(){return e(r,n,i)}}),f=(r,n,t)=>(Me(r,n,"access private method"),t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();try{self["workbox:window:6.5.3"]&&_()}catch{}function je(r,n){return new Promise(function(t){var i=new MessageChannel;i.port1.onmessage=function(s){t(s.data)},r.postMessage(n,[i.port2])})}function zi(r,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function Qe(r,n){(n==null||n>r.length)&&(n=r.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=r[t];return i}function Ti(r,n){var t;if(typeof Symbol>"u"||r[Symbol.iterator]==null){if(Array.isArray(r)||(t=function(s,o){if(s){if(typeof s=="string")return Qe(s,o);var c=Object.prototype.toString.call(s).slice(8,-1);return c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set"?Array.from(s):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Qe(s,o):void 0}}(r))||n&&r&&typeof r.length=="number"){t&&(r=t);var i=0;return function(){return i>=r.length?{done:!0}:{done:!1,value:r[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(t=r[Symbol.iterator]()).next.bind(t)}try{self["workbox:core:6.5.3"]&&_()}catch{}var We=function(){var r=this;this.promise=new Promise(function(n,t){r.resolve=n,r.reject=t})};function Be(r,n){var t=location.href;return new URL(r,t).href===new URL(n,t).href}var Ut=function(r,n){this.type=r,Object.assign(this,n)};function ge(r,n,t){return t?n?n(r):r:(r&&r.then||(r=Promise.resolve(r)),n?r.then(n):r)}function _i(){}var Mi={type:"SKIP_WAITING"};function Ze(r,n){if(!n)return r&&r.then?r.then(_i):Promise.resolve()}var Wi=function(r){var n,t;function i(d,g){var l,u;return g===void 0&&(g={}),(l=r.call(this)||this).nn={},l.tn=0,l.rn=new We,l.en=new We,l.on=new We,l.un=0,l.an=new Set,l.cn=function(){var m=l.fn,p=m.installing;l.tn>0||!Be(p.scriptURL,l.sn.toString())||performance.now()>l.un+6e4?(l.vn=p,m.removeEventListener("updatefound",l.cn)):(l.hn=p,l.an.add(p),l.rn.resolve(p)),++l.tn,p.addEventListener("statechange",l.ln)},l.ln=function(m){var p=l.fn,v=m.target,L=v.state,T=v===l.vn,ct={sw:v,isExternal:T,originalEvent:m};!T&&l.mn&&(ct.isUpdate=!0),l.dispatchEvent(new Ut(L,ct)),L==="installed"?l.wn=self.setTimeout(function(){L==="installed"&&p.waiting===v&&l.dispatchEvent(new Ut("waiting",ct))},200):L==="activating"&&(clearTimeout(l.wn),T||l.en.resolve(v))},l.dn=function(m){var p=l.hn,v=p!==navigator.serviceWorker.controller;l.dispatchEvent(new Ut("controlling",{isExternal:v,originalEvent:m,sw:p,isUpdate:l.mn})),v||l.on.resolve(p)},l.gn=(u=function(m){var p=m.data,v=m.ports,L=m.source;return ge(l.getSW(),function(){l.an.has(L)&&l.dispatchEvent(new Ut("message",{data:p,originalEvent:m,ports:v,sw:L}))})},function(){for(var m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];try{return Promise.resolve(u.apply(this,m))}catch(v){return Promise.reject(v)}}),l.sn=d,l.nn=g,navigator.serviceWorker.addEventListener("message",l.gn),l}t=r,(n=i).prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t;var s,o,c=i.prototype;return c.register=function(d){var g=(d===void 0?{}:d).immediate,l=g!==void 0&&g;try{var u=this;return function(m,p){var v=m();return v&&v.then?v.then(p):p(v)}(function(){if(!l&&document.readyState!=="complete")return Ze(new Promise(function(m){return window.addEventListener("load",m)}))},function(){return u.mn=Boolean(navigator.serviceWorker.controller),u.yn=u.pn(),ge(u.bn(),function(m){u.fn=m,u.yn&&(u.hn=u.yn,u.en.resolve(u.yn),u.on.resolve(u.yn),u.yn.addEventListener("statechange",u.ln,{once:!0}));var p=u.fn.waiting;return p&&Be(p.scriptURL,u.sn.toString())&&(u.hn=p,Promise.resolve().then(function(){u.dispatchEvent(new Ut("waiting",{sw:p,wasWaitingBeforeRegister:!0}))}).then(function(){})),u.hn&&(u.rn.resolve(u.hn),u.an.add(u.hn)),u.fn.addEventListener("updatefound",u.cn),navigator.serviceWorker.addEventListener("controllerchange",u.dn),u.fn})})}catch(m){return Promise.reject(m)}},c.update=function(){try{return this.fn?Ze(this.fn.update()):void 0}catch(d){return Promise.reject(d)}},c.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},c.messageSW=function(d){try{return ge(this.getSW(),function(g){return je(g,d)})}catch(g){return Promise.reject(g)}},c.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&je(this.fn.waiting,Mi)},c.pn=function(){var d=navigator.serviceWorker.controller;return d&&Be(d.scriptURL,this.sn.toString())?d:void 0},c.bn=function(){try{var d=this;return function(g,l){try{var u=g()}catch(m){return l(m)}return u&&u.then?u.then(void 0,l):u}(function(){return ge(navigator.serviceWorker.register(d.sn,d.nn),function(g){return d.un=performance.now(),g})},function(g){throw g})}catch(g){return Promise.reject(g)}},s=i,(o=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&zi(s.prototype,o),i}(function(){function r(){this.Pn=new Map}var n=r.prototype;return n.addEventListener=function(t,i){this.Sn(t).add(i)},n.removeEventListener=function(t,i){this.Sn(t).delete(i)},n.dispatchEvent=function(t){t.target=this;for(var i,s=Ti(this.Sn(t.type));!(i=s()).done;)(0,i.value)(t)},n.Sn=function(t){return this.Pn.has(t)||this.Pn.set(t,new Set),this.Pn.get(t)},r}());function Bi(r={}){const{immediate:n=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:s,onRegisterError:o}=r;let c,d;const g=async(l=!0)=>{l&&(c==null||c.addEventListener("controlling",u=>{u.isUpdate&&window.location.reload()})),d&&d.waiting&&await je(d.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){c=new Wi("./service-worker.js",{scope:"./",type:"classic"}),c.addEventListener("activated",l=>{l.isUpdate||i==null||i()});{const l=()=>{t==null||t()};c.addEventListener("waiting",l),c.addEventListener("externalwaiting",l)}c.register({immediate:n}).then(l=>{d=l,s==null||s(l)}).catch(l=>{o==null||o(l)})}return g}Bi();const ji=`:host{display:block;position:fixed;cursor:pointer;overflow:hidden}:host([placement="topRight"]){top:0;right:0;transform:rotate(135deg) translate(-71%)}:host([placement="topLeft"]){top:0;left:0;transform:rotate(45deg) scaleY(-1) translate(-71%)}.link{display:inline-block;position:relative;height:100%;width:100%}.octo{position:absolute;height:100%;width:100%;left:50%;transform:rotate(225deg) scale(.70710678118)}.link:hover .octo__arm{animation-name:octocat-wave;animation-timing-function:ease-in-out;animation-iteration-count:1}@keyframes octocat-wave{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}
`,Ni="github-corner",Oi=["size","href","placement","background-color","octopus-color","duration"],hi=document.createElement("template");hi.innerHTML=`
<a class="link" aria-label="View source on GitHub" target="_blank">
  <svg class="octo" viewBox="0 0 250 250" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
    <path
      d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
      fill="currentColor" style="transform-origin: 130px 106px;" class="octo__arm"></path>
    <path
      d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
      fill="currentColor" class="octo__body"></path>
  </svg>
</a>
`;const Ve=["topRight","topLeft"],ti="5rem",Ui="black",ei="white",Di="0.5s";var qt,q,F;class Hi extends HTMLElement{constructor(){super();a(this,qt,void 0);a(this,q,void 0);a(this,F,void 0);const t=this.attachShadow({mode:"open"}),i=document.createElement("style");i.textContent=ji,t.append(i,hi.content.cloneNode(!0)),h(this,qt,t.querySelector("a.link")),h(this,q,t.querySelector("svg.octo")),h(this,F,t.querySelector("path.octo__arm")),this.style.width=ti,this.style.height=ti,e(this,q).style.fill=Ui,e(this,q).style.color=ei,e(this,F).style.color=ei,e(this,F).style.animationDuration=Di,this.setAttribute("placement",Ve[0])}static get observedAttributes(){return Oi}attributeChangedCallback(t,i,s){switch(t){case"size":this.style.width=s,this.style.height=s;break;case"href":e(this,qt).href=s;break;case"background-color":e(this,q).style.fill=s;break;case"octopus-color":console.log("octopusColor",s),e(this,q).style.color=s,e(this,F).style.color=s;break;case"duration":e(this,F).style.animationDuration=s;break;case"placement":Ve.includes(s)&&this.setAttribute("placement",s)}}}qt=new WeakMap,q=new WeakMap,F=new WeakMap;customElements.define(Ni,Hi);const qi=`:host{outline:none;display:inline-flex;position:relative;cursor:pointer;width:4.25rem;height:5rem;background-color:transparent;transition:.5s;justify-content:center;filter:contrast(100%) brightness(100%) drop-shadow(1px 1px 1px rgba(0,0,0,.5)) drop-shadow(-1px -1px 1px rgba(0,0,0,.5))}:host(:hover){filter:contrast(110%) brightness(110%) drop-shadow(1px 4px 4px rgba(0,0,0,.5)) drop-shadow(-1px 0px 4px rgba(0,0,0,.5))}.img{position:absolute;max-width:100%;max-height:100%}.icon{position:absolute;font-size:1.5rem;color:#513721;display:flex;justify-content:center;align-items:center;top:21%;width:82%;height:44%;box-sizing:border-box}.text{font-size:.9rem;position:absolute;display:flex;justify-content:center;align-items:center;font-family:Scheherazade New,Noto Sans TC,sans-serif;color:#513721;bottom:12%;width:85%;height:20%;white-space:nowrap;overflow:hidden;font-weight:900;text-align:justify;box-sizing:border-box}
`,Fi=""+new URL("wanted.c2a6dd7a.png",import.meta.url).href,Yi="wanted-button",Xi=["icon","font-size","loading"],ci=document.createElement("template");ci.innerHTML=`
  <img class="img" src="${Fi}" alt="wanted button"/>
  <div class="icon">
    <i class="fa"></i>
  </div>
  <span class="text"><slot><slot></span>
`;var St,M,Ft;class Gi extends HTMLElement{constructor(){super();a(this,St,"");a(this,M,void 0);a(this,Ft,void 0);const t=this.attachShadow({mode:"open"}),i=document.createElement("style");i.textContent=qi,t.append(i,ci.content.cloneNode(!0)),h(this,M,t.querySelector("i.fa")),h(this,Ft,t.querySelector("span.text"));const s=document.querySelector('link[href*="font-awesome"]');s&&t.appendChild(s.cloneNode())}static get observedAttributes(){return Xi}attributeChangedCallback(t,i,s){switch(t){case"icon":h(this,St,s),e(this,M).classList.add(s);break;case"font-size":e(this,Ft).style.fontSize=s;break;case"loading":s!==null?(this.style.pointerEvents="none",e(this,M).classList.remove(e(this,St)),e(this,M).classList.add("fa-circle-notch","fa-spin")):(this.style.pointerEvents="auto",e(this,M).classList.remove("fa-circle-notch","fa-spin"),e(this,M).classList.add(e(this,St)));break}}}St=new WeakMap,M=new WeakMap,Ft=new WeakMap;customElements.define(Yi,Gi);async function Ot(r){return new Promise((n,t)=>{const i=new Image;i.onload=()=>n(i),i.onerror=t,i.src=r})}function Xe(r,n,t,i){const s=r/t,o=n/i;return Math.min(o,s)}function ii(r,n,t,i,s,o,c=0){const d=c/2,g=t-d,l=i-d,u=t+s+d,m=i+o+d,p=r>=g&&r<=u,v=n>=l&&n<=m;return p&&v}function Ki(r,n,t,i,s,o,c=0){const d=c/2,g=t-d,l=i-d,u=t+s+d,m=i+o+d,p=t+d,v=i+d,L=t+s-d,T=i+o-d;return{left:r>=g&&r<=p,right:r>=L&&r<=u,top:n>=l&&n<=v,bottom:n>=T&&n<=m}}function li(r,n){const{actualBoundingBoxAscent:t,actualBoundingBoxDescent:i}=r.measureText(n);return t+i}function $i(r,n){let t=document.createElement("a");t.setAttribute("href",r),t.setAttribute("download",n),t.style.display="none",document.body.appendChild(t),t.click(),t.remove()}const Ji=`:host{display:block;height:100%;width:100%;touch-action:none}.container{position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;box-sizing:border-box}
`,Qi=""+new URL("one-piece-wanted.d3bd87d0.png",import.meta.url).href,pe={url:Qi,width:772,height:1154,avatarPosition:{x:74,y:252,width:638,height:484},namePosition:{x:88,y:826,width:585,height:114},bountyPosition:{x:88,y:958,width:586,height:85},bountyFontSize:70,boundaryOffset:{left:10,right:10,top:10,bottom:10},bellySignSize:{width:60,height:84}};class _e{constructor(n){lt(this,"x",0);lt(this,"y",0);lt(this,"width",0);lt(this,"height",0);lt(this,"ctx");this.ctx=n}scale(n){this.x=this.x*n,this.y=this.y*n,this.width=this.width*n,this.height=this.height*n}}const di="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALaSURBVDhPNZTdjuw0EIRtt+04mdlfrUCAEELA4Qpxgc79eQ/e/wV2d5LYjt18zi5WZGXi7urq6vLYf7/9bc+1bdt6K61rCKEZKy44H27vaylliZO1ptba9RCx3rspxXmenedVxDhtegSfRIK10lo7WnHSl6s8v1zIjDHOy8QiXgjycYrJsWop+5pNt2p8b+44OkUomPMGCJmtV2M7OTH6y+WS0tK7ybk64g4K9d5Va9nVNKjM85RSdM5yUur+8vJ8/jSjZghsJN9um/z545MPATLELfPVextioBEYqVEwnRVRc7QDNgo376mzrbmU6lSV1CnSQ0wXJ0GNbcdRD9jTSPf0+/r+miF1Ltje3hF3L6XJP19+hgwVjDHWjzTYBh/ExyAJCWOYrtfp8fHxer2DEKA5Z+2KcI4hkWbUMZvbWz+qz7vW2jwnphhdxeXRptiu9J9bq8uS7u7nEO1Q+7OstYjBSEbgicjOKTul9n0njKMz/lBtRDl0ynuliW3LxJHMMM55jHXKM8BVOfzEYv8Ic2RycD4KJeYxbOOGeTyGMc6o9c632speTDcRdiGkaVrmWX77/okJ8xjLGEmTD0lOtbGpQYxWwe1Kc3boxGTxpLXqmuqWczljh3AA/S/Bx06f2DlIZKLRB+xzWdIUvdHmhl+ndHKJIOBK9tGftbzgP+CMQScmEwa6oVyjLHLJX7/+RAGqoRx1h1vPHFBY7eijkdJPrLrvay2VfFKIlx9wwDSndM37IbThZN3Wz4IK5/D2thof8lEHkrEueCseW1iJ8vt39+Jgc/RWMCh60DW3x/uAjNb6Wvrr+9u63hg1lwzNPmwFWfn6xy/4p9Pn0Aer4wR33hTcBxB8KcKX8elMG5rSAk2554fL0/1yt8TLcMSYMOriAd4/hCCb+xXFzzEt08KN4347tUQ4bjLPEJRJnDnsgDNqsMf12Tfko2CcZEpE8e8k85IeHh7+Azww6jnizFt7AAAAAElFTkSuQmCC";var kt,be,Et,Lt,ve;class si extends _e{constructor(){super(...arguments);a(this,kt,"");a(this,be,1);a(this,Et,0);a(this,Lt,null);a(this,ve,1.6)}async init(t){try{const i=await Ot(di);h(this,Lt,this.ctx.createPattern(i,"repeat"))}catch(i){throw console.error(i),new Error("Failed to init Name.")}this.setPosition(t)}setPosition(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,h(this,Et,this.height*e(this,ve))}set text(t){const i=new Array(e(this,be)).join(" ")+" ";h(this,kt,Array.from(t).join(i))}render(){this.ctx.save(),this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.fillStyle=e(this,Lt)?e(this,Lt):"none",this.ctx.font=`700 ${e(this,Et)}px 'Scheherazade New', 'Noto Sans TC', serif`;const t=li(this.ctx,e(this,kt)),i=this.height/t,s=(t-this.height)/2;this.ctx.font=`700 ${Math.floor(e(this,Et)*i)}px 'Scheherazade New', 'Noto Sans TC', serif`,this.ctx.fillText(e(this,kt),this.x+this.width/2,this.y+s,this.width),this.ctx.restore()}}kt=new WeakMap,be=new WeakMap,Et=new WeakMap,Lt=new WeakMap,ve=new WeakMap;const Zi=""+new URL("paper.6a3dae0b.png",import.meta.url).href,ni={x:0,y:0,width:0,height:0};var dt,Y,P,At,W,Yt,It,Xt,Ne;class ri extends _e{constructor(){super(...arguments);a(this,Xt);a(this,dt,void 0);lt(this,"filter","grayscale(35%) sepia(40%) saturate(80%) contrast(105%)");a(this,Y,new Map);a(this,P,null);a(this,At,null);a(this,W,{...ni});a(this,Yt,{...ni});a(this,It,{left:0,right:0,top:0,bottom:0})}async init(t){h(this,dt,t);try{const i=await Ot(Zi);h(this,At,this.ctx.createPattern(i,"repeat"))}catch(i){throw console.error(i),new Error("Failed to create fill pattern.")}f(this,Xt,Ne).call(this)}async loadImage(t){var i;if(!!t)try{h(this,P,await Ot(t)),f(this,Xt,Ne).call(this),(i=e(this,Y).get("imageloaded"))==null||i.forEach(s=>s())}catch(s){throw console.error(s),new Error("Failed to load avatar image.")}}scale(t){super.scale(t),this.updateRenderPosition()}setWantedImageInfo(t){h(this,dt,t),h(this,It,{...t.boundaryOffset}),h(this,W,{...t.avatarPosition})}updateRenderPosition(){if(!e(this,P))return;const t=Xe(this.width,this.height,e(this,P).width,e(this,P).height),i=e(this,P).width*t,s=e(this,P).height*t,o=this.x+(this.width-i)/2,c=this.y+(this.height-s)/2;h(this,Yt,{x:o,y:c,width:i,height:s})}on(t,i){var s;e(this,Y).has(t)||e(this,Y).set(t,[]),(s=e(this,Y).get(t))==null||s.push(i)}off(t,i){const s=e(this,Y).get(t);if(!s)return;const o=s.findIndex(c=>c===i);s.splice(o,1)}render(){if(this.ctx.save(),this.ctx.fillStyle=e(this,At)?e(this,At):"none",this.ctx.fillRect(e(this,W).x,e(this,W).y,e(this,W).width,e(this,W).height),!e(this,P)){this.ctx.restore();return}const{x:t,y:i,width:s,height:o}=e(this,Yt);this.ctx.filter=this.filter,this.ctx.drawImage(e(this,P),t,i,s,o);const{left:c,right:d,top:g,bottom:l}=e(this,It);t<=c&&this.ctx.clearRect(0,i,c,o),i<=g&&this.ctx.clearRect(t,0,s,g),t+s>this.ctx.canvas.width-d&&this.ctx.clearRect(this.ctx.canvas.width-d,i,d,o),i+o>this.ctx.canvas.height-l&&this.ctx.clearRect(t,this.ctx.canvas.height-l,s,l),this.ctx.canvas.width,this.ctx.restore()}}dt=new WeakMap,Y=new WeakMap,P=new WeakMap,At=new WeakMap,W=new WeakMap,Yt=new WeakMap,It=new WeakMap,Xt=new WeakSet,Ne=function(){if(!e(this,dt))return;const{avatarPosition:t,boundaryOffset:i}=e(this,dt);this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,h(this,It,{...i}),h(this,W,{x:this.x,y:this.y,width:this.width,height:this.height}),this.updateRenderPosition()};const Vi=""+new URL("belly.5c6b32bd.png",import.meta.url).href;var X,ut,we,Gt,Rt,Kt,Pt,ye,Ct;class oi extends _e{constructor(t){super(t);a(this,X,"");a(this,ut,!0);a(this,we,1);a(this,Gt,0);a(this,Rt,null);a(this,Kt,void 0);a(this,Pt,null);a(this,ye,10);a(this,Ct,null);h(this,Kt,new Intl.NumberFormat)}async init(t){try{h(this,Pt,await Ot(Vi));const i=await Ot(di);h(this,Rt,this.ctx.createPattern(i,"repeat"))}catch(i){throw console.error(i),new Error("Failed to init bounty.")}this.setPosition(t)}setPosition(t){const{bountyPosition:i,bountyFontSize:s,bellySignSize:o}=t;this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,h(this,Gt,s),h(this,Ct,{...o})}set text(t){const i=new Array(e(this,we)).join(" ")+" ",s=Number.parseInt(t);if(Number.isNaN(s)){h(this,ut,!1),h(this,X,Array.from(t).join(i));return}h(this,ut,!0);const o=e(this,Kt).format(s)+"-";h(this,X,Array.from(o).join(i))}render(){if(!e(this,Pt)||!e(this,Ct))return;const{width:t,height:i}=e(this,Ct);this.ctx.save(),this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.fillStyle=e(this,Rt)?e(this,Rt):"none",this.ctx.font=`900 ${e(this,Gt)}px 'Scheherazade New', 'Noto Sans TC', serif`;const s=this.x+this.width/2,o=e(this,ut)?t+e(this,ye):0,c=li(this.ctx,e(this,X)),d=(this.height-c)/2,g=s+o/2,l=this.y+d,u=this.width-o;if(this.ctx.fillText(e(this,X),g,l,u),e(this,ut)){const m=Math.min(this.ctx.measureText(e(this,X)).width,u),p=s-o/2-m/2;this.ctx.drawImage(e(this,Pt),p,this.y,t,i)}this.ctx.restore()}}X=new WeakMap,ut=new WeakMap,we=new WeakMap,Gt=new WeakMap,Rt=new WeakMap,Kt=new WeakMap,Pt=new WeakMap,ye=new WeakMap,Ct=new WeakMap;var B,G,$t,C,K,gt,pt,j,zt,xe,ui;class ai{constructor(n){a(this,xe);a(this,B,void 0);a(this,G,void 0);a(this,$t,1);a(this,C,0);a(this,K,0);a(this,gt,0);a(this,pt,0);a(this,j,null);a(this,zt,null);h(this,B,n),h(this,G,n.canvas)}get scale(){return e(this,$t)}async loadImage(n){try{const t=await Ot(n.url);h(this,j,t),h(this,gt,t.width),h(this,pt,t.height),h(this,zt,n)}catch(t){throw console.error(t),new Error("Failed to load wanted image.")}}setSize({width:n,height:t,padding:i}){if(!e(this,j))throw new Error("Failed to set size: wanted image is null");h(this,gt,n!=null?n:e(this,gt)),h(this,pt,t!=null?t:e(this,pt)),h(this,K,i!=null?i:e(this,K));const s=e(this,j).width+e(this,K)*2,o=e(this,j).height+e(this,K)*2,c=Xe(e(this,gt),e(this,pt),s,o);return h(this,$t,c),h(this,C,e(this,K)*c),e(this,G).width=s*c,e(this,G).height=o*c,{wantedImageInfo:f(this,xe,ui).call(this,c,e(this,C)),scale:c,scaledPadding:e(this,C)}}render(){!e(this,j)||(e(this,B).save(),e(this,B).shadowColor="rgba(0, 0, 0, 1)",e(this,B).shadowBlur=e(this,C),e(this,B).drawImage(e(this,j),e(this,C),e(this,C),e(this,G).width-e(this,C)*2,e(this,G).height-e(this,C)*2),e(this,B).restore())}}B=new WeakMap,G=new WeakMap,$t=new WeakMap,C=new WeakMap,K=new WeakMap,gt=new WeakMap,pt=new WeakMap,j=new WeakMap,zt=new WeakMap,xe=new WeakSet,ui=function(n,t){if(!e(this,zt))throw new Error("Failed to calculate wanted image info: WantedImageInfo object is null");const{url:i,width:s,height:o,avatarPosition:c,namePosition:d,bountyPosition:g,bountyFontSize:l,boundaryOffset:u,bellySignSize:m}=e(this,zt),p=v=>{const{x:L,y:T,width:ct,height:yt}=v;return{x:L*n+t,y:T*n+t,width:ct*n,height:yt*n}};return{url:i,width:s,height:o,avatarPosition:p(c),namePosition:p(d),bountyPosition:p(g),bountyFontSize:l*n,boundaryOffset:{left:u.left*n+t,right:u.right*n+t,top:u.top*n+t,bottom:u.bottom*n+t},bellySignSize:{width:m.width*n,height:m.height*n}}};var b,I,$,z,mt,ft,R,bt,Jt,Qt,Se,gi,ke,pi,Ee,mi,Le,fi,Ae,bi,Ie,vi,Re,wi,Zt,Oe,Vt,Ue,te,De,Pe,yi,Ce,xi;class ts extends _e{constructor(t,i){super(t);a(this,Se);a(this,ke);a(this,Ee);a(this,Le);a(this,Ae);a(this,Ie);a(this,Re);a(this,Zt);a(this,Vt);a(this,te);a(this,Pe);a(this,Ce);a(this,b,void 0);a(this,I,!1);a(this,$,!1);a(this,z,!1);a(this,mt,4);a(this,ft,null);a(this,R,new Map);a(this,bt,0);a(this,Jt,0);a(this,Qt,0);h(this,b,i),i.on("imageloaded",()=>this.reset()),t.canvas.addEventListener("wheel",f(this,Se,gi).bind(this)),t.canvas.addEventListener("pointerdown",f(this,Ee,mi).bind(this)),t.canvas.addEventListener("pointerup",f(this,Le,fi).bind(this)),t.canvas.addEventListener("pointercancel",f(this,Ae,bi).bind(this)),t.canvas.addEventListener("pointermove",f(this,Ie,vi).bind(this)),t.canvas.addEventListener("pointerout",f(this,Re,wi).bind(this))}reset(){this.x=e(this,b).x,this.y=e(this,b).y,this.width=e(this,b).width,this.height=e(this,b).height,h(this,I,!1),h(this,$,!1),h(this,z,!1)}render(){!e(this,I)&&!e(this,z)||(this.ctx.save(),Je(this,bt)._++,e(this,bt)>16&&h(this,bt,0),this.ctx.lineDashOffset=-e(this,bt),this.ctx.fillStyle="rgba(255,255,255,0.5)",this.ctx.strokeStyle="red",this.ctx.lineWidth=e(this,mt),this.ctx.setLineDash([10,5]),this.ctx.fillRect(this.x,this.y,this.width,this.height),this.ctx.strokeRect(this.x,this.y,this.width,this.height),this.ctx.restore())}}b=new WeakMap,I=new WeakMap,$=new WeakMap,z=new WeakMap,mt=new WeakMap,ft=new WeakMap,R=new WeakMap,bt=new WeakMap,Jt=new WeakMap,Qt=new WeakMap,Se=new WeakSet,gi=function(t){t.preventDefault();const i=t.deltaY>0?.95:1.05;f(this,te,De).call(this,i)},ke=new WeakSet,pi=function(t){const{left:i,top:s}=this.ctx.canvas.getBoundingClientRect(),o=t.clientX-i,c=t.clientY-s;if(e(this,$)){const d=t.clientX-e(this,Jt),g=t.clientY-e(this,Qt);f(this,Ce,xi).call(this,d,g)}e(this,z)||f(this,Pe,yi).call(this,o,c),ii(o,c,this.x,this.y,this.width,this.height,e(this,mt))?h(this,I,!0):h(this,I,!1),h(this,Jt,t.clientX),h(this,Qt,t.clientY)},Ee=new WeakSet,mi=function(t){if(t.pointerType==="mouse"&&t.button===0){h(this,$,!0);return}e(this,R).set(t.pointerId,t);const{left:i,top:s}=this.ctx.canvas.getBoundingClientRect();let o=!1;for(let c of e(this,R).values()){const d=c.clientX-i,g=c.clientY-s;if(ii(d,g,this.x,this.y,this.width,this.height,e(this,mt))){o=!0;break}}h(this,I,o)},Le=new WeakSet,fi=function(t){if(t.pointerType==="mouse"&&t.button===0){h(this,$,!1),h(this,z,!1);return}f(this,Zt,Oe).call(this,t)},Ae=new WeakSet,bi=function(t){f(this,Zt,Oe).call(this,t)},Ie=new WeakSet,vi=function(t){if(t.pointerType==="mouse"){f(this,ke,pi).call(this,t);return}const i=Array.from(e(this,R).values());if(i.length===1&&e(this,I)){const s=i[0],{clientX:o,clientY:c}=t,d=e(this,R).get(s.pointerId);if(d){const g=o-d.clientX,l=c-d.clientY;this.x+=g,this.y+=l,e(this,b).x+=g,e(this,b).y+=l,e(this,b).updateRenderPosition()}}if(i.length===2&&e(this,I)){let s=e(this,R).get(i[0].pointerId),o=e(this,R).get(i[1].pointerId);if(s&&o){const c=i[0].pointerId===t.pointerId?i[1]:i[0];let d=f(this,Vt,Ue).call(this,c,t),g=f(this,Vt,Ue).call(this,s,o),l=d>g?1.02:.98;f(this,te,De).call(this,l)}}e(this,R).set(t.pointerId,t)},Re=new WeakSet,wi=function(t){t.pointerType==="mouse"&&(h(this,$,!1),h(this,z,!1))},Zt=new WeakSet,Oe=function(t){e(this,R).delete(t.pointerId),e(this,R).size||h(this,I,!1)},Vt=new WeakSet,Ue=function(t,i){const s=Math.abs(t.clientX-i.clientX),o=Math.abs(t.clientY-i.clientY);return Math.pow(s,2)+Math.pow(o,2)},te=new WeakSet,De=function(t){const i=this.width*t-this.width,s=this.height*t-this.height;this.x=this.x-i/2,this.width=this.width+i,this.y=this.y-s/2,this.height=this.height+s,e(this,b).x=this.x,e(this,b).y=this.y,e(this,b).width=this.width,e(this,b).height=this.height,e(this,b).updateRenderPosition()},Pe=new WeakSet,yi=function(t,i){const s=Ki(t,i,this.x,this.y,this.width,this.height,e(this,mt));s.left||s.right?(this.ctx.canvas.style.cursor="ew-resize",h(this,ft,s.left?"left":"right")):s.top||s.bottom?(this.ctx.canvas.style.cursor="ns-resize",h(this,ft,s.top?"top":"bottom")):e(this,I)?this.ctx.canvas.style.cursor="move":this.ctx.canvas.style.cursor="default"},Ce=new WeakSet,xi=function(t,i){switch(this.ctx.canvas.style.cursor){case"move":this.x+=t,this.y+=i,e(this,b).x+=t,e(this,b).y+=i,e(this,b).updateRenderPosition();break;case"ew-resize":{if(h(this,z,!0),e(this,ft)==="right"){const s=Math.max(this.width+t,1);this.width=s,e(this,b).width=s}else{const s=this.x+t;if(s>=this.x+this.width)break;const o=this.width-t;this.x=s,e(this,b).x=s,this.width=o,e(this,b).width=o}e(this,b).updateRenderPosition();break}case"ns-resize":{if(h(this,z,!0),e(this,ft)==="bottom"){const s=Math.max(this.height+i,1);this.height=s,e(this,b).height=s}else{const s=this.y+i;if(s>=this.y+this.height)break;const o=this.height-i;this.y=s,e(this,b).y=s,this.height=o,e(this,b).height=o}e(this,b).updateRenderPosition()}}};const es="wanted-poster",is=["name","bounty","avatar-url","filter","padding"];var J,Q,ee,k,Tt,N,O,U,D,_t,ie,Mt,fe,se,He,ne,qe;class ss extends HTMLElement{constructor(){super();a(this,Mt);a(this,se);a(this,ne);a(this,J,void 0);a(this,Q,void 0);a(this,ee,void 0);a(this,k,void 0);a(this,Tt,void 0);a(this,N,void 0);a(this,O,void 0);a(this,U,void 0);a(this,D,void 0);a(this,_t,void 0);a(this,ie,void 0);h(this,D,"init");const t=this.attachShadow({mode:"open"}),i=document.createElement("canvas"),s=document.createElement("div");s.className="container",s.appendChild(i);const o=document.createElement("style");o.textContent=Ji,t.append(o,s);const c=i.getContext("2d");h(this,J,s),h(this,Q,i),h(this,ee,c),h(this,U,new ai(c)),h(this,k,new ri(c)),h(this,N,new si(c)),h(this,O,new oi(c)),h(this,Tt,new ts(c,e(this,k))),h(this,_t,new ResizeObserver(()=>{clearTimeout(e(this,ie)),h(this,ie,window.setTimeout(()=>f(this,se,He).call(this),200))})),e(this,_t).observe(s)}async export(){var Ge,Ke;const t=document.createElement("canvas");t.style.display="none",e(this,J).appendChild(t);const i=t.getContext("2d"),s=f(this,Mt,fe).call(this),o=new ai(i),c=new ri(i),d=new si(i),g=new oi(i);await o.loadImage(pe);const l=pe.width+s*2,u=pe.height+s*2,{wantedImageInfo:m}=o.setSize({width:l,height:u,padding:s});await c.init(m),await d.init(m.namePosition),await g.init(m),await c.loadImage(this.getAttribute("avatar-url")),d.text=(Ge=this.getAttribute("name"))!=null?Ge:"",g.text=(Ke=this.getAttribute("bounty"))!=null?Ke:"";const{x:p,y:v,width:L,height:T,filter:ct}=e(this,k),yt=e(this,U).scale;c.x=p/yt,c.y=v/yt,c.width=L/yt,c.height=T/yt,c.filter=ct,c.updateRenderPosition(),c.render(),o.render(),g.render(),d.render();try{const ue=await new Promise(Ii=>{t.toBlob(Ri=>Ii(Ri),"image/png",1)});if(!ue)throw new Error("blob is null");const $e=URL.createObjectURL(ue);$i($e,"wanted-poster.png"),URL.revokeObjectURL($e),e(this,J).removeChild(t)}catch(ue){console.error(ue),this.dispatchEvent(new CustomEvent("ExportError",{bubbles:!0}))}}static get observedAttributes(){return is}async connectedCallback(){var o,c;console.log("[connected]"),await new Promise(d=>{setTimeout(()=>d(""))}),h(this,D,"loading");const t=f(this,Mt,fe).call(this),i=e(this,J).getBoundingClientRect();try{await e(this,U).loadImage(pe);const{wantedImageInfo:d}=e(this,U).setSize({width:i.width,height:i.height,padding:t});await e(this,k).init(d),await e(this,N).init(d.namePosition),await e(this,O).init(d),await e(this,k).loadImage(this.getAttribute("avatar-url"))}catch(d){h(this,D,"error"),console.error("Failed to init wanted poster.",d);return}e(this,N).text=(o=this.getAttribute("name"))!=null?o:"",e(this,O).text=(c=this.getAttribute("bounty"))!=null?c:"";const s=this.getAttribute("filter");s&&(e(this,k).filter=s),h(this,D,"success"),f(this,ne,qe).call(this),this.dispatchEvent(new CustomEvent("WantedPosterLoaded",{bubbles:!0}))}disconnectedCallback(){console.log("[disconnected]"),e(this,_t).disconnect()}adoptedCallback(){console.log("[adopted]")}async attributeChangedCallback(t,i,s){if(e(this,D)==="success")switch(t){case"name":e(this,N).text=s;break;case"bounty":e(this,O).text=s;break;case"avatar-url":{await e(this,k).loadImage(s);break}case"filter":{e(this,k).filter=s;break}case"padding":{f(this,se,He).call(this);break}}}}J=new WeakMap,Q=new WeakMap,ee=new WeakMap,k=new WeakMap,Tt=new WeakMap,N=new WeakMap,O=new WeakMap,U=new WeakMap,D=new WeakMap,_t=new WeakMap,ie=new WeakMap,Mt=new WeakSet,fe=function(){const t=this.getAttribute("padding");if(!t)return 0;const i=Number.parseInt(t);return Number.isNaN(i)?0:i},se=new WeakSet,He=function(){if(e(this,D)!=="success")return;const t=f(this,Mt,fe).call(this),i=e(this,J).getBoundingClientRect(),s=Xe(i.width,i.height,e(this,Q).width,e(this,Q).height),{wantedImageInfo:o}=e(this,U).setSize({width:i.width,height:i.height,padding:t});e(this,N).setPosition(o.namePosition),e(this,O).setPosition(o),e(this,k).setWantedImageInfo(o),e(this,k).scale(s),e(this,Tt).scale(s)},ne=new WeakSet,qe=function(){e(this,ee).clearRect(0,0,e(this,Q).width,e(this,Q).height),e(this,k).render(),e(this,U).render(),e(this,O).render(),e(this,N).render(),e(this,Tt).render(),requestAnimationFrame(f(this,ne,qe).bind(this))};customElements.define(es,ss);const ns=`:host{--text-shadow: .1rem .1rem .1rem rgba(0, 0, 0, .5);--element-filter: drop-shadow(.1rem .2rem .1rem rgba(0, 0, 0, .4)) drop-shadow(-.1rem 0 .1rem rgba(0, 0, 0, .4)) contrast(100%) brightness(100%);--element-hover-filter: drop-shadow(.2rem .3rem .1rem rgba(0, 0, 0, .4)) drop-shadow(-.2rem 0 .1rem rgba(0, 0, 0, .5)) contrast(110%) brightness(110%);--slider-thumb-size: 2rem;display:block;position:fixed;top:0;left:0;width:18.75rem;max-width:80%;height:100%;transform:translate(-105%);transition:transform .2s;box-shadow:.1rem 0 .3rem #00000080;background:linear-gradient(120deg,rgb(245 198 95),rgb(245 218 158),rgb(245 198 96));border:1px solid #3b230e;padding:.125rem;box-sizing:border-box}:host(.open){transform:translate(0)}.container{display:flex;flex-direction:column;width:100%;height:100%;background:url(./images/wood-bg.png) repeat-y center top;background-size:100% auto;border:.0625rem solid rgb(180,150,81);box-shadow:inset 0 0 .2rem .2rem #0000007f;box-sizing:border-box}.field-container{display:flex;flex-direction:column;gap:2rem;flex:1 0;padding:1rem;overflow-y:auto;overflow-x:hidden}.action-container{display:flex;align-items:center;justify-content:space-around;height:4rem;padding:0 1rem}.wood-button{border:0;font-size:1rem;outline:none;color:#fff;cursor:pointer;background-image:url(./images/wood-button.png);background-color:transparent;background-size:100% 100%;background-repeat:no-repeat;background-position:center;width:6rem;height:2rem;display:flex;align-items:center;justify-content:center;color:#fffc;text-shadow:var(--text-shadow);filter:var(--element-filter);transition:.2s}.wood-button:hover{filter:var(--element-hover-filter)}.close-button{border:0;outline:none;cursor:pointer;background-image:url(./images/close-button.png);background-color:transparent;background-size:100% 100%;background-repeat:no-repeat;background-position:center;width:2rem;height:2rem;filter:var(--element-filter);transition:.2s}.close-button:hover{filter:var(--element-hover-filter)}.text-input{border:0;outline:none;color:#584034;background-image:url(./images/input-frame.png);background-color:transparent;background-size:100% 100%;background-repeat:no-repeat;background-position:center;text-align:center;line-height:4rem;font-size:2rem;padding:0 1rem;text-shadow:var(--text-shadow);filter:var(--element-filter)}.text-input::placeholder{color:#0000004d;font-size:2rem;text-shadow:none}.slider{display:flex;flex-direction:column;align-items:center}.slider__label{font-family:sans-serif;color:#584034;font-size:.75rem;background-image:url(./images/scroll-paper.png);background-color:transparent;background-size:100% 100%;background-repeat:no-repeat;background-position:center;width:6rem;height:2rem;display:inline-flex;align-items:center;justify-content:center;padding-bottom:.1rem;box-sizing:border-box;margin:0;position:relative}.slider__input{appearance:none;width:100%;height:2.5rem;background:transparent;outline:none}.slider__input::-webkit-slider-runnable-track{height:.75rem;background-color:#584034;border:1px solid rgba(0,0,0,.8);box-shadow:0 0 3px 1px #000c;border-radius:.1rem}.slider__input::-moz-range-track{height:.75rem;background-color:#584034;border:1px solid rgba(0,0,0,.8);box-shadow:0 0 3px 1px #000c;border-radius:.1rem}.slider__input::-webkit-slider-thumb{appearance:none;position:relative;top:-.75rem;width:var(--slider-thumb-size);height:var(--slider-thumb-size);border:0;background:url(./images/slider-thumb.png);background-color:transparent;background-size:cover;background-repeat:no-repeat;background-position:center;cursor:pointer;filter:var(--element-filter)}.slider__input::-moz-range-thumb{position:relative;top:-.75rem;width:var(--slider-thumb-size);height:var(--slider-thumb-size);border:0;background:url(./images/slider-thumb.png);background-color:transparent;background-size:cover;background-repeat:no-repeat;background-position:center;cursor:pointer;filter:var(--element-filter)}::selection{color:#fff;background:rgba(88,64,52,.8);filter:brightness(120%)}::-webkit-scrollbar{width:.2rem}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:#35261f;border-radius:.1rem}::-webkit-scrollbar-corner{background:transparent}
`,Ht=new Map,Dt={avatarUrl:"",name:"",bounty:"",filter:"",padding:10,blur:0,brightness:100,contrast:105,grayscale:35,hueRotate:0,saturate:80,sepia:40};function Fe({blur:r,brightness:n,contrast:t,grayscale:i,hueRotate:s,saturate:o,sepia:c}){return`blur(${r}px) brightness(${n}%) contrast(${t}%) grayscale(${i}%) hue-rotate(${s}deg) saturate(${o}%) sepia(${c}%)`}const y=new Proxy({...Dt,filter:Fe(Dt)},{set(r,n,t,i){if(!(n in Dt))return!1;switch(n){case"blur":case"brightness":case"contrast":case"grayscale":case"hueRotate":case"saturate":case"sepia":const s=Fe({...r,[n]:t});if(s===r.filter)break;r.filter=s,setTimeout(()=>{var c;((c=Ht.get("filter"))!=null?c:[]).forEach(d=>d("filter",s,r))})}return setTimeout(()=>{var o;((o=Ht.get(n))!=null?o:[]).forEach(c=>c(n,t,r))}),Reflect.set(r,n,t,i)}});function x(r,n){let t=Ht.get(r);t||(t=[]),t.push(n),Ht.set(r,t)}function S(r,n){let t=Ht.get(r);if(!t)return;const i=t.findIndex(s=>s===n);i>-1&&t.splice(i,1)}function Si(){Object.assign(y,{...Dt,filter:Fe(Dt)})}const ki=document.createElement("template");ki.innerHTML=`
<div class="container">
  <div class="field-container">
    <input id="nameInput" class="text-input" placeholder="Name"/>
    <input id="bountyInput" class="text-input" placeholder="Bounty"/>

    <div class="slider">
      <label for="paddingSlider" class="slider__label">Padding</label>
      <input id="paddingSlider" class="slider__input" type="range" min="0" max="20" >
    </div>

    <div class="slider">
      <label for="blurSlider" class="slider__label">Blur</label>
      <input id="blurSlider" class="slider__input" type="range" min="0" max="10" >
    </div>

    <div class="slider">
      <label for="brightnessSlider" class="slider__label">Brightness</label>
      <input id="brightnessSlider" class="slider__input" type="range" min="0" max="200" >
    </div>

    <div class="slider">
      <label for="contrastSlider" class="slider__label">Contrast</label>
      <input id="contrastSlider" class="slider__input" type="range" min="0" max="200" >
    </div>

    <div class="slider">
      <label for="grayscaleSlider" class="slider__label">Grayscale</label>
      <input id="grayscaleSlider" class="slider__input" type="range" min="0" max="100" >
    </div>

    <div class="slider">
      <label for="hueRotateSlider" class="slider__label">Hue Rotate</label>
      <input id="hueRotateSlider" class="slider__input" type="range" min="0" max="360" >
    </div>

    <div class="slider">
      <label for="saturateSlider" class="slider__label">Saturate</label>
      <input id="saturateSlider" class="slider__input" type="range" min="0" max="200" >
    </div>

    <div class="slider">
      <label for="sepiaSlider" class="slider__label">Sepia</label>
      <input id="sepiaSlider" class="slider__input" type="range" min="0" max="100" >
    </div>
  </div>
  <div class="action-container">
    <button id="closeButton" class="close-button" aria-label="Close side-menu button" title="Close"></button>
    <button id="resetButton" class="wood-button" aria-label="Reset button" title="Reset to default settings.">RESET</button>
  </div>
</div>

`;const rs="side-menu";var Wt,Z,V,tt,et,it,st,nt,rt,ot,at,re,oe,Bt,w;class os extends HTMLElement{constructor(){super();a(this,Wt,!1);a(this,Z,void 0);a(this,V,void 0);a(this,tt,void 0);a(this,et,void 0);a(this,it,void 0);a(this,st,void 0);a(this,nt,void 0);a(this,rt,void 0);a(this,ot,void 0);a(this,at,void 0);a(this,re,void 0);a(this,oe,void 0);a(this,Bt,void 0);a(this,w,void 0);const t=this.attachShadow({mode:"open"}),i=document.createElement("style");i.textContent=ns,t.append(i,ki.content.cloneNode(!0)),h(this,Z,t.querySelector("#nameInput")),h(this,V,t.querySelector("#bountyInput")),h(this,tt,t.querySelector("#paddingSlider")),h(this,et,t.querySelector("#blurSlider")),h(this,it,t.querySelector("#brightnessSlider")),h(this,st,t.querySelector("#contrastSlider")),h(this,nt,t.querySelector("#grayscaleSlider")),h(this,rt,t.querySelector("#hueRotateSlider")),h(this,ot,t.querySelector("#saturateSlider")),h(this,at,t.querySelector("#sepiaSlider")),h(this,re,t.querySelector("#closeButton")),h(this,oe,t.querySelector("#resetButton")),h(this,w,(s,o)=>{switch(o=o.toString(),s){case"name":e(this,Z).value=o;break;case"bounty":e(this,V).value=o;break;case"padding":e(this,tt).value=o;break;case"blur":e(this,et).value=o;break;case"brightness":e(this,it).value=o;break;case"contrast":e(this,st).value=o;break;case"grayscale":e(this,nt).value=o;break;case"hueRotate":e(this,rt).value=o;break;case"saturate":e(this,ot).value=o;break;case"sepia":e(this,at).value=o;break}}),h(this,Bt,s=>{s.target instanceof Node&&this.contains(s.target)||this.toggle(!1)})}toggle(t){if(t){h(this,Wt,!0),this.classList.add("open"),setTimeout(()=>{h(this,Wt,!1)},200);return}!e(this,Wt)&&this.classList.remove("open")}connectedCallback(){window.addEventListener("pointerdown",e(this,Bt)),x("name",e(this,w)),x("bounty",e(this,w)),x("padding",e(this,w)),x("blur",e(this,w)),x("saturate",e(this,w)),x("contrast",e(this,w)),x("grayscale",e(this,w)),x("hueRotate",e(this,w)),x("hueRotate",e(this,w)),x("sepia",e(this,w)),e(this,Z).value=y.name,e(this,V).value=y.bounty.toString(),e(this,tt).value=y.padding.toString(),e(this,et).value=y.blur.toString(),e(this,it).value=y.brightness.toString(),e(this,st).value=y.contrast.toString(),e(this,nt).value=y.grayscale.toString(),e(this,rt).value=y.hueRotate.toString(),e(this,ot).value=y.saturate.toString(),e(this,at).value=y.sepia.toString(),e(this,Z).addEventListener("keyup",()=>y.name=e(this,Z).value),e(this,V).addEventListener("keyup",()=>y.bounty=e(this,V).value),e(this,tt).addEventListener("change",()=>y.padding=parseInt(e(this,tt).value)),e(this,et).addEventListener("change",()=>y.blur=parseInt(e(this,et).value)),e(this,it).addEventListener("change",()=>y.brightness=parseInt(e(this,it).value)),e(this,st).addEventListener("change",()=>y.contrast=parseInt(e(this,st).value)),e(this,nt).addEventListener("change",()=>y.grayscale=parseInt(e(this,nt).value)),e(this,rt).addEventListener("change",()=>y.hueRotate=parseInt(e(this,rt).value)),e(this,ot).addEventListener("change",()=>y.saturate=parseInt(e(this,ot).value)),e(this,at).addEventListener("change",()=>y.sepia=parseInt(e(this,at).value)),e(this,re).addEventListener("click",()=>this.toggle(!1)),e(this,oe).addEventListener("click",Si)}disconnectedCallback(){window.removeEventListener("pointerdown",e(this,Bt)),S("name",e(this,w)),S("bounty",e(this,w)),S("padding",e(this,w)),S("blur",e(this,w)),S("saturate",e(this,w)),S("contrast",e(this,w)),S("grayscale",e(this,w)),S("hueRotate",e(this,w)),S("hueRotate",e(this,w)),S("sepia",e(this,w))}}Wt=new WeakMap,Z=new WeakMap,V=new WeakMap,tt=new WeakMap,et=new WeakMap,it=new WeakMap,st=new WeakMap,nt=new WeakMap,rt=new WeakMap,ot=new WeakMap,at=new WeakMap,re=new WeakMap,oe=new WeakMap,Bt=new WeakMap,w=new WeakMap;customElements.define(rs,os);const as=`:host{display:block;width:100%;height:100%;background-image:url(./images/wood-panel.jpg);background-blend-mode:multiply;background-size:cover;background-position:center;padding:1rem;box-sizing:border-box;transition:background-color .2s}:host(.warcriminal){background-image:url(./images/wood-panel.jpg),url(./images/blood-stains-0.png)}:host(.dragin){background-color:silver}.github-corner{transition:.2s}.github-corner:hover{filter:brightness(130%)}#uploadInput{display:none}.blood-overlay{position:absolute;width:100%;height:100%;top:0;left:0;opacity:.8;display:none;background-image:url(./images/blood-stains-1.png);background-size:cover;background-position:center;mix-blend-mode:multiply;animation-name:fade-in;animation-duration:4s}.blood-overlay--visible{display:block}.loading-overlay{position:absolute;width:100%;height:100%;top:0;left:0;display:flex;align-items:center;justify-content:center;background-image:radial-gradient(#e1e4e7,#a5aab0)}.loading-overlay__luffy{max-width:50vw;max-height:40vh;animation-name:logo-blink;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear;filter:contrast(80%) brightness(85%) drop-shadow(0 1px 3px gray)}.button-container{position:absolute;display:flex;width:100%;box-sizing:border-box;gap:.5rem;bottom:0;left:0;padding:0 1rem 1rem}.criminal{outline:none;position:relative;cursor:pointer;margin-left:auto;width:5rem;height:5rem;border:0;padding:0;background-color:transparent;visibility:hidden;opacity:0;transition:2s}.criminal--visible{visibility:visible;opacity:1}.criminal.criminal--visible:after{top:55%;opacity:1}.criminal:before{position:absolute;top:0;left:0;content:" ";width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:center;transition:filter .5s;background-image:url(./images/criminal-avatar.png);filter:contrast(85%) brightness(0%) drop-shadow(1px 1px .5rem crimson) drop-shadow(-1px -1px .5rem crimson)}.criminal--stamp:before{background-image:url(./images/criminal-stamp.png),url(./images/criminal-avatar.png);filter:contrast(85%) brightness(110%) drop-shadow(1px 1px .1rem rgba(0,0,0,.5)) drop-shadow(-1px -1px .1rem rgba(0,0,0,.5))}.criminal:after{position:absolute;top:120%;left:53%;transform:translate(-50%,-50%);color:#fff;content:"?";font-size:2rem;filter:brightness(100%)!important;transition:1s ease-out;opacity:0}.criminal--stamp:after{content:""}@keyframes logo-blink{50%{filter:contrast(120%) brightness(110%) drop-shadow(0 5px 3px gray)}}@keyframes fade-in{0%{opacity:0}to{opacity:.8}}
`,Ei=document.createElement("template");Ei.innerHTML=`
  <input id="uploadInput" type="file" accept="image/*">
  <slot name="poster"></slot>
  <div class="blood-overlay"></div>

  <github-corner
    class="github-corner"
    background-color="#584034"
    duration="1s"
    size="5rem"
    href="https://github.com/YuskaWu/one-piece-wanted-poster"
    title="GitHub page">
  </github-corner>

  <div class="button-container">
    <wanted-button
      id="configButton"
      icon="fa-cog"
      title="Open the edit panel.">
      EDIT
    </wanted-button>

    <wanted-button
      id="uploadButton"
      icon="fa-upload"
      title="Import local image to edit.">
      IMPORT
    </wanted-button>

    <wanted-button
      id="downloadButton"
      icon="fa-download"
      title="Export as image file.">
      EXPORT
    </wanted-button>

    <button id="criminalButton" class="criminal" aria-label="Criminal mode button" title="War criminal"></button>
  </div>

  <slot name="sideMenu"></slot>

  <div class="loading-overlay">
    <img class="loading-overlay__luffy" src="./images/luffy.png" alt="luffy logo"/>
  </div>
`;const hs="app-container",me="#warcriminal",cs={padding:10,name:"PUTLER",bounty:"War Criminal",avatarUrl:"./images/war-criminal.png"};var ae,jt,H,he,ce,vt,wt,le,A,Nt,E,ze,Li,Te,Ai,de,Ye,ht,xt;class ls extends HTMLElement{constructor(){super();a(this,ze);a(this,Te);a(this,de);a(this,ht);a(this,ae,void 0);a(this,jt,void 0);a(this,H,void 0);a(this,he,void 0);a(this,ce,void 0);a(this,vt,void 0);a(this,wt,void 0);a(this,le,0);a(this,A,void 0);a(this,Nt,void 0);a(this,E,void 0);const t=this.attachShadow({mode:"open"});h(this,A,t);const i=document.createElement("style");i.textContent=as,t.append(i,Ei.content.cloneNode(!0)),t.addEventListener("WantedPosterLoaded",()=>{f(this,ze,Li).call(this)});const s=e(this,A).querySelector("slot[name=poster]");h(this,jt,s==null?void 0:s.assignedNodes()[0]);const o=e(this,A).querySelector("slot[name=sideMenu]");h(this,ae,o==null?void 0:o.assignedNodes()[0]),h(this,H,e(this,A).querySelector("#uploadInput")),h(this,he,e(this,A).querySelector("#configButton")),h(this,ce,e(this,A).querySelector("#uploadButton")),h(this,vt,e(this,A).querySelector("#downloadButton")),h(this,wt,e(this,A).querySelector("#criminalButton")),h(this,Nt,f(this,Te,Ai).bind(this)),h(this,E,(c,d)=>{switch(c){case"avatarUrl":f(this,ht,xt).call(this,{"avatar-url":d.toString()});case"name":case"bounty":case"padding":case"filter":f(this,ht,xt).call(this,{[c]:d.toString()})}}),window.addEventListener("hashchange",e(this,Nt))}connectedCallback(){h(this,le,new Date().getTime()),f(this,ht,xt).call(this,{padding:y.padding.toString(),filter:y.filter}),x("avatarUrl",e(this,E)),x("name",e(this,E)),x("bounty",e(this,E)),x("padding",e(this,E)),x("filter",e(this,E)),location.hash===me&&f(this,de,Ye).call(this,!0),this.addEventListener("dragover",t=>{t.preventDefault()}),this.addEventListener("dragenter",()=>{this.classList.add("dragin")}),this.addEventListener("dragleave",()=>{this.classList.remove("dragin")}),this.addEventListener("drop",t=>{var o;t.preventDefault(),this.classList.remove("dragin");const i=(o=t.dataTransfer)==null?void 0:o.files[0];if(!i||!i.type.startsWith("image"))return;const s=URL.createObjectURL(i);f(this,ht,xt).call(this,{"avatar-url":s})}),e(this,H).addEventListener("change",()=>{const t=e(this,H).files?e(this,H).files[0]:null;if(!t||!t.type.startsWith("image"))return;const i=URL.createObjectURL(t);f(this,ht,xt).call(this,{"avatar-url":i})}),e(this,he).addEventListener("click",()=>{e(this,ae).toggle(!0)}),e(this,ce).addEventListener("click",()=>{e(this,H).value="",e(this,H).click()}),e(this,vt).addEventListener("click",async()=>{e(this,vt).setAttribute("loading","true"),await e(this,jt).export(),e(this,vt).removeAttribute("loading")}),e(this,wt).addEventListener("click",()=>{const t=location.hash===me;location.hash=t?"":me})}disconnectedCallback(){window.removeEventListener("hashchange",e(this,Nt)),S("avatarUrl",e(this,E)),S("name",e(this,E)),S("bounty",e(this,E)),S("padding",e(this,E)),S("filter",e(this,E))}}ae=new WeakMap,jt=new WeakMap,H=new WeakMap,he=new WeakMap,ce=new WeakMap,vt=new WeakMap,wt=new WeakMap,le=new WeakMap,A=new WeakMap,Nt=new WeakMap,E=new WeakMap,ze=new WeakSet,Li=function(){const t=e(this,A).querySelector(".loading-overlay");let i=1e3,s=setInterval(()=>{new Date().getTime()-e(this,le)<i||(clearTimeout(s),t.style.transition="opacity 1s",t.style.opacity="0",setTimeout(()=>t.remove(),1e3),setTimeout(()=>e(this,wt).classList.add("criminal--visible"),3e3))},200)},Te=new WeakSet,Ai=function(){f(this,de,Ye).call(this,location.hash===me)},de=new WeakSet,Ye=function(t){const i=e(this,A).querySelector(".blood-overlay");!i||(this.classList.toggle("warcriminal"),i.classList.toggle("blood-overlay--visible"),e(this,wt).classList.toggle("criminal--stamp"),t&&(Si(),Object.assign(y,{...cs})))},ht=new WeakSet,xt=function(t){var s;const i=Object.keys(t);for(let o of i){const c=(s=t[o])!=null?s:"";e(this,jt).setAttribute(o,c)}};customElements.define(hs,ls);
