var _o=Object.defineProperty;var Po=(i,s,t)=>s in i?_o(i,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[s]=t;var P=(i,s,t)=>(Po(i,typeof s!="symbol"?s+"":s,t),t),Ci=(i,s,t)=>{if(!s.has(i))throw TypeError("Cannot "+t)};var o=(i,s,t)=>(Ci(i,s,"read from private field"),t?t.call(i):s.get(i)),d=(i,s,t)=>{if(s.has(i))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(i):s.set(i,t)},u=(i,s,t,n)=>(Ci(i,s,"write to private field"),n?n.call(i,t):s.set(i,t),t);var Ye=(i,s,t,n)=>({set _(e){u(i,s,e,t)},get _(){return o(i,s,n)}}),g=(i,s,t)=>(Ci(i,s,"access private method"),t);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=t(e);fetch(e.href,r)}})();const zo="modulepreload",Bo=function(i,s){return new URL(i,s).href},sn={},Pn=function(s,t,n){if(!t||t.length===0)return s();const e=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=Bo(r,n),r in sn)return;sn[r]=!0;const a=r.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!n)for(let p=e.length-1;p>=0;p--){const f=e[p];if(f.href===r&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${c}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":zo,a||(h.as="script",h.crossOrigin=""),h.href=r,document.head.appendChild(h),a)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>s()).catch(r=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r})};function Mo(i={}){const{immediate:s=!1,onNeedRefresh:t,onOfflineReady:n,onRegistered:e,onRegisteredSW:r,onRegisterError:a}=i;let c,l,h;const p=async(m=!0)=>{await l,await(h==null?void 0:h())};async function f(){if("serviceWorker"in navigator){const{Workbox:m}=await Pn(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[],import.meta.url);c=new m("./service-worker.js",{scope:"./",type:"classic"}),h=async()=>{await(c==null?void 0:c.messageSkipWaiting())};{let y=!1;const k=()=>{y=!0,c==null||c.addEventListener("controlling",w=>{w.isUpdate&&window.location.reload()}),t==null||t()};c.addEventListener("installed",w=>{typeof w.isUpdate>"u"?typeof w.isExternal<"u"?w.isExternal?k():!y&&(n==null||n()):w.isExternal?window.location.reload():!y&&(n==null||n()):w.isUpdate||n==null||n()}),c.addEventListener("waiting",k),c.addEventListener("externalwaiting",k)}c.register({immediate:s}).then(y=>{r?r("./service-worker.js",y):e==null||e(y)}).catch(y=>{a==null||a(y)})}}return l=f(),p}Mo();/**
* (c) Iconify
*
* For the full copyright and license information, please view the license.txt
* files at https://github.com/iconify/iconify
*
* Licensed under MIT.
*
* @license MIT
* @version 1.0.8
*/const zn=Object.freeze({left:0,top:0,width:16,height:16}),Je=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),De=Object.freeze({...zn,...Je}),Mi=Object.freeze({...De,body:"",hidden:!1}),Uo=Object.freeze({width:null,height:null}),Bn=Object.freeze({...Uo,...Je});function No(i,s=0){const t=i.replace(/^-?[0-9.]*/,"");function n(e){for(;e<0;)e+=4;return e%4}if(t===""){const e=parseInt(i);return isNaN(e)?0:n(e)}else if(t!==i){let e=0;switch(t){case"%":e=25;break;case"deg":e=90}if(e){let r=parseFloat(i.slice(0,i.length-t.length));return isNaN(r)?0:(r=r/e,r%1===0?n(r):0)}}return s}const Oo=/[\s,]+/;function jo(i,s){s.split(Oo).forEach(t=>{switch(t.trim()){case"horizontal":i.hFlip=!0;break;case"vertical":i.vFlip=!0;break}})}const Mn={...Bn,preserveAspectRatio:""};function rn(i){const s={...Mn},t=(n,e)=>i.getAttribute(n)||e;return s.width=t("width",null),s.height=t("height",null),s.rotate=No(t("rotate","")),jo(s,t("flip","")),s.preserveAspectRatio=t("preserveAspectRatio",t("preserveaspectratio","")),s}function qo(i,s){for(const t in Mn)if(i[t]!==s[t])return!0;return!1}const re=/^[a-z0-9]+(-[a-z0-9]+)*$/,Ge=(i,s,t,n="")=>{const e=i.split(":");if(i.slice(0,1)==="@"){if(e.length<2||e.length>3)return null;n=e.shift().slice(1)}if(e.length>3||!e.length)return null;if(e.length>1){const c=e.pop(),l=e.pop(),h={provider:e.length>0?e[0]:n,prefix:l,name:c};return s&&!Ve(h)?null:h}const r=e[0],a=r.split("-");if(a.length>1){const c={provider:n,prefix:a.shift(),name:a.join("-")};return s&&!Ve(c)?null:c}if(t&&n===""){const c={provider:n,prefix:"",name:r};return s&&!Ve(c,t)?null:c}return null},Ve=(i,s)=>i?!!((i.provider===""||i.provider.match(re))&&(s&&i.prefix===""||i.prefix.match(re))&&i.name.match(re)):!1;function Fo(i,s){const t={};!i.hFlip!=!s.hFlip&&(t.hFlip=!0),!i.vFlip!=!s.vFlip&&(t.vFlip=!0);const n=((i.rotate||0)+(s.rotate||0))%4;return n&&(t.rotate=n),t}function an(i,s){const t=Fo(i,s);for(const n in Mi)n in Je?n in i&&!(n in t)&&(t[n]=Je[n]):n in s?t[n]=s[n]:n in i&&(t[n]=i[n]);return t}function $o(i,s){const t=i.icons,n=i.aliases||Object.create(null),e=Object.create(null);function r(a){if(t[a])return e[a]=[];if(!(a in e)){e[a]=null;const c=n[a]&&n[a].parent,l=c&&r(c);l&&(e[a]=[c].concat(l))}return e[a]}return(s||Object.keys(t).concat(Object.keys(n))).forEach(r),e}function Ho(i,s,t){const n=i.icons,e=i.aliases||Object.create(null);let r={};function a(c){r=an(n[c]||e[c],r)}return a(s),t.forEach(a),an(i,r)}function Un(i,s){const t=[];if(typeof i!="object"||typeof i.icons!="object")return t;i.not_found instanceof Array&&i.not_found.forEach(e=>{s(e,null),t.push(e)});const n=$o(i);for(const e in n){const r=n[e];r&&(s(e,Ho(i,e,r)),t.push(e))}return t}const Wo={provider:"",aliases:{},not_found:{},...zn};function Ai(i,s){for(const t in s)if(t in i&&typeof i[t]!=typeof s[t])return!1;return!0}function Nn(i){if(typeof i!="object"||i===null)return null;const s=i;if(typeof s.prefix!="string"||!i.icons||typeof i.icons!="object"||!Ai(i,Wo))return null;const t=s.icons;for(const e in t){const r=t[e];if(!e.match(re)||typeof r.body!="string"||!Ai(r,Mi))return null}const n=s.aliases||Object.create(null);for(const e in n){const r=n[e],a=r.parent;if(!e.match(re)||typeof a!="string"||!t[a]&&!n[a]||!Ai(r,Mi))return null}return s}const Ze=Object.create(null);function Do(i,s){return{provider:i,prefix:s,icons:Object.create(null),missing:new Set}}function It(i,s){const t=Ze[i]||(Ze[i]=Object.create(null));return t[s]||(t[s]=Do(i,s))}function Ki(i,s){return Nn(s)?Un(s,(t,n)=>{n?i.icons[t]=n:i.missing.add(t)}):[]}function Go(i,s,t){try{if(typeof t.body=="string")return i.icons[s]={...t},!0}catch{}return!1}function Qo(i,s){let t=[];return(typeof i=="string"?[i]:Object.keys(Ze)).forEach(e=>{(typeof e=="string"&&typeof s=="string"?[s]:Object.keys(Ze[e]||{})).forEach(a=>{const c=It(e,a);t=t.concat(Object.keys(c.icons).map(l=>(e!==""?"@"+e+":":"")+a+":"+l))})}),t}let ce=!1;function On(i){return typeof i=="boolean"&&(ce=i),ce}function le(i){const s=typeof i=="string"?Ge(i,!0,ce):i;if(s){const t=It(s.provider,s.prefix),n=s.name;return t.icons[n]||(t.missing.has(n)?null:void 0)}}function jn(i,s){const t=Ge(i,!0,ce);if(!t)return!1;const n=It(t.provider,t.prefix);return Go(n,t.name,s)}function cn(i,s){if(typeof i!="object")return!1;if(typeof s!="string"&&(s=i.provider||""),ce&&!s&&!i.prefix){let e=!1;return Nn(i)&&(i.prefix="",Un(i,(r,a)=>{a&&jn(r,a)&&(e=!0)})),e}const t=i.prefix;if(!Ve({provider:s,prefix:t,name:"a"}))return!1;const n=It(s,t);return!!Ki(n,i)}function Yo(i){return!!le(i)}function Xo(i){const s=le(i);return s?{...De,...s}:null}function Vo(i){const s={loaded:[],missing:[],pending:[]},t=Object.create(null);i.sort((e,r)=>e.provider!==r.provider?e.provider.localeCompare(r.provider):e.prefix!==r.prefix?e.prefix.localeCompare(r.prefix):e.name.localeCompare(r.name));let n={provider:"",prefix:"",name:""};return i.forEach(e=>{if(n.name===e.name&&n.prefix===e.prefix&&n.provider===e.provider)return;n=e;const r=e.provider,a=e.prefix,c=e.name,l=t[r]||(t[r]=Object.create(null)),h=l[a]||(l[a]=It(r,a));let p;c in h.icons?p=s.loaded:a===""||h.missing.has(c)?p=s.missing:p=s.pending;const f={provider:r,prefix:a,name:c};p.push(f)}),s}function qn(i,s){i.forEach(t=>{const n=t.loaderCallbacks;n&&(t.loaderCallbacks=n.filter(e=>e.id!==s))})}function Ko(i){i.pendingCallbacksFlag||(i.pendingCallbacksFlag=!0,setTimeout(()=>{i.pendingCallbacksFlag=!1;const s=i.loaderCallbacks?i.loaderCallbacks.slice(0):[];if(!s.length)return;let t=!1;const n=i.provider,e=i.prefix;s.forEach(r=>{const a=r.icons,c=a.pending.length;a.pending=a.pending.filter(l=>{if(l.prefix!==e)return!0;const h=l.name;if(i.icons[h])a.loaded.push({provider:n,prefix:e,name:h});else if(i.missing.has(h))a.missing.push({provider:n,prefix:e,name:h});else return t=!0,!0;return!1}),a.pending.length!==c&&(t||qn([i],r.id),r.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),r.abort))})}))}let Jo=0;function Zo(i,s,t){const n=Jo++,e=qn.bind(null,t,n);if(!s.pending.length)return e;const r={id:n,icons:s,callback:i,abort:e};return t.forEach(a=>{(a.loaderCallbacks||(a.loaderCallbacks=[])).push(r)}),e}const Ui=Object.create(null);function ln(i,s){Ui[i]=s}function Ni(i){return Ui[i]||Ui[""]}function ts(i,s=!0,t=!1){const n=[];return i.forEach(e=>{const r=typeof e=="string"?Ge(e,s,t):e;r&&n.push(r)}),n}var es={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function is(i,s,t,n){const e=i.resources.length,r=i.random?Math.floor(Math.random()*e):i.index;let a;if(i.random){let x=i.resources.slice(0);for(a=[];x.length>1;){const N=Math.floor(Math.random()*x.length);a.push(x[N]),x=x.slice(0,N).concat(x.slice(N+1))}a=a.concat(x)}else a=i.resources.slice(r).concat(i.resources.slice(0,r));const c=Date.now();let l="pending",h=0,p,f=null,m=[],y=[];typeof n=="function"&&y.push(n);function k(){f&&(clearTimeout(f),f=null)}function w(){l==="pending"&&(l="aborted"),k(),m.forEach(x=>{x.status==="pending"&&(x.status="aborted")}),m=[]}function Et(x,N){N&&(y=[]),typeof x=="function"&&y.push(x)}function et(){return{startTime:c,payload:s,status:l,queriesSent:h,queriesPending:m.length,subscribe:Et,abort:w}}function E(){l="failed",y.forEach(x=>{x(void 0,p)})}function _(){m.forEach(x=>{x.status==="pending"&&(x.status="aborted")}),m=[]}function Ti(x,N,ie){const Qe=N!=="success";switch(m=m.filter(Lt=>Lt!==x),l){case"pending":break;case"failed":if(Qe||!i.dataAfterTimeout)return;break;default:return}if(N==="abort"){p=ie,E();return}if(Qe){p=ie,m.length||(a.length?ee():E());return}if(k(),_(),!i.random){const Lt=i.resources.indexOf(x.resource);Lt!==-1&&Lt!==i.index&&(i.index=Lt)}l="completed",y.forEach(Lt=>{Lt(ie)})}function ee(){if(l!=="pending")return;k();const x=a.shift();if(x===void 0){if(m.length){f=setTimeout(()=>{k(),l==="pending"&&(_(),E())},i.timeout);return}E();return}const N={status:"pending",resource:x,callback:(ie,Qe)=>{Ti(N,ie,Qe)}};m.push(N),h++,f=setTimeout(ee,i.rotate),t(x,s,N.callback)}return setTimeout(ee),et}function Fn(i){const s={...es,...i};let t=[];function n(){t=t.filter(c=>c().status==="pending")}function e(c,l,h){const p=is(s,c,l,(f,m)=>{n(),h&&h(f,m)});return t.push(p),p}function r(c){return t.find(l=>c(l))||null}return{query:e,find:r,setIndex:c=>{s.index=c},getIndex:()=>s.index,cleanup:n}}function Ji(i){let s;if(typeof i.resources=="string")s=[i.resources];else if(s=i.resources,!(s instanceof Array)||!s.length)return null;return{resources:s,path:i.path||"/",maxURL:i.maxURL||500,rotate:i.rotate||750,timeout:i.timeout||5e3,random:i.random===!0,index:i.index||0,dataAfterTimeout:i.dataAfterTimeout!==!1}}const Ei=Object.create(null),ne=["https://api.simplesvg.com","https://api.unisvg.com"],Ke=[];for(;ne.length>0;)ne.length===1||Math.random()>.5?Ke.push(ne.shift()):Ke.push(ne.pop());Ei[""]=Ji({resources:["https://api.iconify.design"].concat(Ke)});function hn(i,s){const t=Ji(s);return t===null?!1:(Ei[i]=t,!0)}function Li(i){return Ei[i]}function ns(){return Object.keys(Ei)}function dn(){}const Ri=Object.create(null);function os(i){if(!Ri[i]){const s=Li(i);if(!s)return;const t=Fn(s),n={config:s,redundancy:t};Ri[i]=n}return Ri[i]}function $n(i,s,t){let n,e;if(typeof i=="string"){const r=Ni(i);if(!r)return t(void 0,424),dn;e=r.send;const a=os(i);a&&(n=a.redundancy)}else{const r=Ji(i);if(r){n=Fn(r);const a=i.resources?i.resources[0]:"",c=Ni(a);c&&(e=c.send)}}return!n||!e?(t(void 0,424),dn):n.query(s,e,t)().abort}const un="iconify2",he="iconify",Hn=he+"-count",pn=he+"-version",Wn=36e5,ss=168;function Oi(i,s){try{return i.getItem(s)}catch{}}function Zi(i,s,t){try{return i.setItem(s,t),!0}catch{}}function fn(i,s){try{i.removeItem(s)}catch{}}function ji(i,s){return Zi(i,Hn,s.toString())}function qi(i){return parseInt(Oi(i,Hn))||0}const qt={local:!0,session:!0},Dn={local:new Set,session:new Set};let tn=!1;function rs(i){tn=i}let Xe=typeof window>"u"?{}:window;function Gn(i){const s=i+"Storage";try{if(Xe&&Xe[s]&&typeof Xe[s].length=="number")return Xe[s]}catch{}qt[i]=!1}function Qn(i,s){const t=Gn(i);if(!t)return;const n=Oi(t,pn);if(n!==un){if(n){const c=qi(t);for(let l=0;l<c;l++)fn(t,he+l.toString())}Zi(t,pn,un),ji(t,0);return}const e=Math.floor(Date.now()/Wn)-ss,r=c=>{const l=he+c.toString(),h=Oi(t,l);if(typeof h=="string"){try{const p=JSON.parse(h);if(typeof p=="object"&&typeof p.cached=="number"&&p.cached>e&&typeof p.provider=="string"&&typeof p.data=="object"&&typeof p.data.prefix=="string"&&s(p,c))return!0}catch{}fn(t,l)}};let a=qi(t);for(let c=a-1;c>=0;c--)r(c)||(c===a-1?(a--,ji(t,a)):Dn[i].add(c))}function Yn(){if(!tn){rs(!0);for(const i in qt)Qn(i,s=>{const t=s.data,n=s.provider,e=t.prefix,r=It(n,e);if(!Ki(r,t).length)return!1;const a=t.lastModified||-1;return r.lastModifiedCached=r.lastModifiedCached?Math.min(r.lastModifiedCached,a):a,!0})}}function as(i,s){const t=i.lastModifiedCached;if(t&&t>=s)return t===s;if(i.lastModifiedCached=s,t)for(const n in qt)Qn(n,e=>{const r=e.data;return e.provider!==i.provider||r.prefix!==i.prefix||r.lastModified===s});return!0}function cs(i,s){tn||Yn();function t(n){let e;if(!qt[n]||!(e=Gn(n)))return;const r=Dn[n];let a;if(r.size)r.delete(a=Array.from(r).shift());else if(a=qi(e),!ji(e,a+1))return;const c={cached:Math.floor(Date.now()/Wn),provider:i.provider,data:s};return Zi(e,he+a.toString(),JSON.stringify(c))}s.lastModified&&!as(i,s.lastModified)||Object.keys(s.icons).length&&(s.not_found&&(s=Object.assign({},s),delete s.not_found),t("local")||t("session"))}function gn(){}function ls(i){i.iconsLoaderFlag||(i.iconsLoaderFlag=!0,setTimeout(()=>{i.iconsLoaderFlag=!1,Ko(i)}))}function hs(i,s){i.iconsToLoad?i.iconsToLoad=i.iconsToLoad.concat(s).sort():i.iconsToLoad=s,i.iconsQueueFlag||(i.iconsQueueFlag=!0,setTimeout(()=>{i.iconsQueueFlag=!1;const{provider:t,prefix:n}=i,e=i.iconsToLoad;delete i.iconsToLoad;let r;if(!e||!(r=Ni(t)))return;r.prepare(t,n,e).forEach(c=>{$n(t,c,l=>{if(typeof l!="object")c.icons.forEach(h=>{i.missing.add(h)});else try{const h=Ki(i,l);if(!h.length)return;const p=i.pendingIcons;p&&h.forEach(f=>{p.delete(f)}),cs(i,l)}catch(h){console.error(h)}ls(i)})})}))}const en=(i,s)=>{const t=ts(i,!0,On()),n=Vo(t);if(!n.pending.length){let l=!0;return s&&setTimeout(()=>{l&&s(n.loaded,n.missing,n.pending,gn)}),()=>{l=!1}}const e=Object.create(null),r=[];let a,c;return n.pending.forEach(l=>{const{provider:h,prefix:p}=l;if(p===c&&h===a)return;a=h,c=p,r.push(It(h,p));const f=e[h]||(e[h]=Object.create(null));f[p]||(f[p]=[])}),n.pending.forEach(l=>{const{provider:h,prefix:p,name:f}=l,m=It(h,p),y=m.pendingIcons||(m.pendingIcons=new Set);y.has(f)||(y.add(f),e[h][p].push(f))}),r.forEach(l=>{const{provider:h,prefix:p}=l;e[h][p].length&&hs(l,e[h][p])}),s?Zo(s,n,r):gn},ds=i=>new Promise((s,t)=>{const n=typeof i=="string"?Ge(i,!0):i;if(!n){t(i);return}en([n||i],e=>{if(e.length&&n){const r=le(n);if(r){s({...De,...r});return}}t(i)})});function us(i){try{const s=typeof i=="string"?JSON.parse(i):i;if(typeof s.body=="string")return{...s}}catch{}}function ps(i,s){const t=typeof i=="string"?Ge(i,!0,!0):null;if(!t){const r=us(i);return{value:i,data:r}}const n=le(t);if(n!==void 0||!t.prefix)return{value:i,name:t,data:n};const e=en([t],()=>s(i,t,le(t)));return{value:i,name:t,loading:e}}function _i(i){return i.hasAttribute("inline")}let Xn=!1;try{Xn=navigator.vendor.indexOf("Apple")===0}catch{}function fs(i,s){switch(s){case"svg":case"bg":case"mask":return s}return s!=="style"&&(Xn||i.indexOf("<a")===-1)?"svg":i.indexOf("currentColor")===-1?"bg":"mask"}const gs=/(-?[0-9.]*[0-9]+[0-9.]*)/g,ms=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Fi(i,s,t){if(s===1)return i;if(t=t||100,typeof i=="number")return Math.ceil(i*s*t)/t;if(typeof i!="string")return i;const n=i.split(gs);if(n===null||!n.length)return i;const e=[];let r=n.shift(),a=ms.test(r);for(;;){if(a){const c=parseFloat(r);isNaN(c)?e.push(r):e.push(Math.ceil(c*s*t)/t)}else e.push(r);if(r=n.shift(),r===void 0)return e.join("");a=!a}}const bs=i=>i==="unset"||i==="undefined"||i==="none";function Vn(i,s){const t={...De,...i},n={...Bn,...s},e={left:t.left,top:t.top,width:t.width,height:t.height};let r=t.body;[t,n].forEach(k=>{const w=[],Et=k.hFlip,et=k.vFlip;let E=k.rotate;Et?et?E+=2:(w.push("translate("+(e.width+e.left).toString()+" "+(0-e.top).toString()+")"),w.push("scale(-1 1)"),e.top=e.left=0):et&&(w.push("translate("+(0-e.left).toString()+" "+(e.height+e.top).toString()+")"),w.push("scale(1 -1)"),e.top=e.left=0);let _;switch(E<0&&(E-=Math.floor(E/4)*4),E=E%4,E){case 1:_=e.height/2+e.top,w.unshift("rotate(90 "+_.toString()+" "+_.toString()+")");break;case 2:w.unshift("rotate(180 "+(e.width/2+e.left).toString()+" "+(e.height/2+e.top).toString()+")");break;case 3:_=e.width/2+e.left,w.unshift("rotate(-90 "+_.toString()+" "+_.toString()+")");break}E%2===1&&(e.left!==e.top&&(_=e.left,e.left=e.top,e.top=_),e.width!==e.height&&(_=e.width,e.width=e.height,e.height=_)),w.length&&(r='<g transform="'+w.join(" ")+'">'+r+"</g>")});const a=n.width,c=n.height,l=e.width,h=e.height;let p,f;a===null?(f=c===null?"1em":c==="auto"?h:c,p=Fi(f,l/h)):(p=a==="auto"?l:a,f=c===null?Fi(p,h/l):c==="auto"?h:c);const m={},y=(k,w)=>{bs(w)||(m[k]=w.toString())};return y("width",p),y("height",f),m.viewBox=e.left.toString()+" "+e.top.toString()+" "+l.toString()+" "+h.toString(),{attributes:m,body:r}}const ys=()=>{let i;try{if(i=fetch,typeof i=="function")return i}catch{}};let ti=ys();function ws(i){ti=i}function xs(){return ti}function vs(i,s){const t=Li(i);if(!t)return 0;let n;if(!t.maxURL)n=0;else{let e=0;t.resources.forEach(a=>{e=Math.max(e,a.length)});const r=s+".json?icons=";n=t.maxURL-e-t.path.length-r.length}return n}function Ss(i){return i===404}const ks=(i,s,t)=>{const n=[],e=vs(i,s),r="icons";let a={type:r,provider:i,prefix:s,icons:[]},c=0;return t.forEach((l,h)=>{c+=l.length+1,c>=e&&h>0&&(n.push(a),a={type:r,provider:i,prefix:s,icons:[]},c=l.length),a.icons.push(l)}),n.push(a),n};function Is(i){if(typeof i=="string"){const s=Li(i);if(s)return s.path}return"/"}const Es=(i,s,t)=>{if(!ti){t("abort",424);return}let n=Is(s.provider);switch(s.type){case"icons":{const r=s.prefix,c=s.icons.join(","),l=new URLSearchParams({icons:c});n+=r+".json?"+l.toString();break}case"custom":{const r=s.uri;n+=r.slice(0,1)==="/"?r.slice(1):r;break}default:t("abort",400);return}let e=503;ti(i+n).then(r=>{const a=r.status;if(a!==200){setTimeout(()=>{t(Ss(a)?"abort":"next",a)});return}return e=501,r.json()}).then(r=>{if(typeof r!="object"||r===null){setTimeout(()=>{r===404?t("abort",r):t("next",e)});return}setTimeout(()=>{t("success",r)})}).catch(()=>{t("next",e)})},Ls={prepare:ks,send:Es};function mn(i,s){switch(i){case"local":case"session":qt[i]=s;break;case"all":for(const t in qt)qt[t]=s;break}}const Pi="data-style";let Kn="";function Ts(i){Kn=i}function bn(i,s){let t=Array.from(i.childNodes).find(n=>n.hasAttribute&&n.hasAttribute(Pi));t||(t=document.createElement("style"),t.setAttribute(Pi,Pi),i.appendChild(t)),t.textContent=":host{display:inline-block;vertical-align:"+(s?"-0.125em":"0")+"}span,svg{display:block}"+Kn}function Jn(){ln("",Ls),On(!0);let i;try{i=window}catch{}if(i){if(Yn(),i.IconifyPreload!==void 0){const t=i.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(e=>{try{(typeof e!="object"||e===null||e instanceof Array||typeof e.icons!="object"||typeof e.prefix!="string"||!cn(e))&&console.error(n)}catch{console.error(n)}})}if(i.IconifyProviders!==void 0){const t=i.IconifyProviders;if(typeof t=="object"&&t!==null)for(const n in t){const e="IconifyProviders["+n+"] is invalid.";try{const r=t[n];if(typeof r!="object"||!r||r.resources===void 0)continue;hn(n,r)||console.error(e)}catch{console.error(e)}}}}return{enableCache:t=>mn(t,!0),disableCache:t=>mn(t,!1),iconExists:Yo,getIcon:Xo,listIcons:Qo,addIcon:jn,addCollection:cn,calculateSize:Fi,buildIcon:Vn,loadIcons:en,loadIcon:ds,addAPIProvider:hn,appendCustomStyle:Ts,_api:{getAPIConfig:Li,setAPIModule:ln,sendAPIQuery:$n,setFetch:ws,getFetch:xs,listAPIProviders:ns}}}function Zn(i,s){let t=i.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in s)t+=" "+n+'="'+s[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+i+"</svg>"}function Cs(i){return i.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function As(i){return"data:image/svg+xml,"+Cs(i)}function Rs(i){return'url("'+As(i)+'")'}const $i={"background-color":"currentColor"},to={"background-color":"transparent"},yn={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},wn={"-webkit-mask":$i,mask:$i,background:to};for(const i in wn){const s=wn[i];for(const t in yn)s[i+"-"+t]=yn[t]}function xn(i){return i?i+(i.match(/^[-0-9.]+$/)?"px":""):"inherit"}function _s(i,s,t){const n=document.createElement("span");let e=i.body;e.indexOf("<a")!==-1&&(e+="<!-- "+Date.now()+" -->");const r=i.attributes,a=Zn(e,{...r,width:s.width+"",height:s.height+""}),c=Rs(a),l=n.style,h={"--svg":c,width:xn(r.width),height:xn(r.height),...t?$i:to};for(const p in h)l.setProperty(p,h[p]);return n}let ae;function Ps(){try{ae=window.trustedTypes.createPolicy("iconify",{createHTML:i=>i})}catch{ae=null}}function zs(i){return ae===void 0&&Ps(),ae?ae.createHTML(i):i}function Bs(i){const s=document.createElement("span"),t=i.attributes;let n="";t.width||(n="width: inherit;"),t.height||(n+="height: inherit;"),n&&(t.style=n);const e=Zn(i.body,t);return s.innerHTML=zs(e),s.firstChild}function vn(i,s){const t=s.icon.data,n=s.customisations,e=Vn(t,n);n.preserveAspectRatio&&(e.attributes.preserveAspectRatio=n.preserveAspectRatio);const r=s.renderedMode;let a;switch(r){case"svg":a=Bs(e);break;default:a=_s(e,{...De,...t},r==="mask")}const c=Array.from(i.childNodes).find(l=>{const h=l.tagName&&l.tagName.toUpperCase();return h==="SPAN"||h==="SVG"});c?a.tagName==="SPAN"&&c.tagName===a.tagName?c.setAttribute("style",a.getAttribute("style")):i.replaceChild(a,c):i.appendChild(a)}function Sn(i,s,t){const n=t&&(t.rendered?t:t.lastRender);return{rendered:!1,inline:s,icon:i,lastRender:n}}function Ms(i="iconify-icon"){let s,t;try{s=window.customElements,t=window.HTMLElement}catch{return}if(!s||!t)return;const n=s.get(i);if(n)return n;const e=["icon","mode","inline","width","height","rotate","flip"],r=class extends t{constructor(){super();P(this,"_shadowRoot");P(this,"_state");P(this,"_checkQueued",!1);const l=this._shadowRoot=this.attachShadow({mode:"open"}),h=_i(this);bn(l,h),this._state=Sn({value:""},h),this._queueCheck()}static get observedAttributes(){return e.slice(0)}attributeChangedCallback(l){if(l==="inline"){const h=_i(this),p=this._state;h!==p.inline&&(p.inline=h,bn(this._shadowRoot,h))}else this._queueCheck()}get icon(){const l=this.getAttribute("icon");if(l&&l.slice(0,1)==="{")try{return JSON.parse(l)}catch{}return l}set icon(l){typeof l=="object"&&(l=JSON.stringify(l)),this.setAttribute("icon",l)}get inline(){return _i(this)}set inline(l){l?this.setAttribute("inline","true"):this.removeAttribute("inline")}restartAnimation(){const l=this._state;if(l.rendered){const h=this._shadowRoot;if(l.renderedMode==="svg")try{h.lastChild.setCurrentTime(0);return}catch{}vn(h,l)}}get status(){const l=this._state;return l.rendered?"rendered":l.icon.data===null?"failed":"loading"}_queueCheck(){this._checkQueued||(this._checkQueued=!0,setTimeout(()=>{this._check()}))}_check(){if(!this._checkQueued)return;this._checkQueued=!1;const l=this._state,h=this.getAttribute("icon");if(h!==l.icon.value){this._iconChanged(h);return}if(!l.rendered)return;const p=this.getAttribute("mode"),f=rn(this);(l.attrMode!==p||qo(l.customisations,f))&&this._renderIcon(l.icon,f,p)}_iconChanged(l){const h=ps(l,(p,f,m)=>{const y=this._state;if(y.rendered||this.getAttribute("icon")!==p)return;const k={value:p,name:f,data:m};k.data?this._gotIconData(k):y.icon=k});h.data?this._gotIconData(h):this._state=Sn(h,this._state.inline,this._state)}_gotIconData(l){this._checkQueued=!1,this._renderIcon(l,rn(this),this.getAttribute("mode"))}_renderIcon(l,h,p){const f=fs(l.data.body,p),m=this._state.inline;vn(this._shadowRoot,this._state={rendered:!0,icon:l,inline:m,customisations:h,attrMode:p,renderedMode:f})}};e.forEach(c=>{c in r.prototype||Object.defineProperty(r.prototype,c,{get:function(){return this.getAttribute(c)},set:function(l){l!==null?this.setAttribute(c,l):this.removeAttribute(c)}})});const a=Jn();for(const c in a)r[c]=r.prototype[c]=a[c];return s.define(i,r),r}Ms()||Jn();const de=new Map,ue={photoUrl:"",name:"",bounty:"",nameSpacing:0,bountySpacing:1,filter:"",posterShadow:0,photoShadow:0,blur:0,brightness:100,contrast:100,grayscale:0,hueRotate:0,saturate:100,sepia:0};function Us(i){return i in ue}function Hi({blur:i,brightness:s,contrast:t,grayscale:n,hueRotate:e,saturate:r,sepia:a}){return`blur(${i}px) brightness(${s}%) contrast(${t}%) grayscale(${n}%) hue-rotate(${e}deg) saturate(${r}%) sepia(${a}%)`}const b=new Proxy({...ue,filter:Hi(ue)},{set(i,s,t,n){if(!Us(s))return!0;switch(s){case"blur":case"brightness":case"contrast":case"grayscale":case"hueRotate":case"saturate":case"sepia":{const e=Hi({...i,[s]:t});if(e===i.filter)break;i.filter=e,setTimeout(()=>{(de.get("filter")??[]).forEach(a=>a("filter",e,i))})}}return setTimeout(()=>{(de.get(s)??[]).forEach(r=>r(s,t,i))}),Reflect.set(i,s,t,n)}});function I(i,s){let t=de.get(i);t||(t=[],de.set(i,t)),t.push(s)}function R(i,s){const t=de.get(i);if(!t)return;const n=t.findIndex(e=>e===s);n>-1&&t.splice(n,1)}function zi(i={}){Object.assign(b,{...b,filter:Hi(ue),...i})}function Ns(i={}){Object.assign(b,{...ue,...i})}const se={posterShadow:5,photoShadow:4,blur:0,brightness:100,contrast:100,hueRotate:0,grayscale:12,saturate:80,sepia:15,name:"PUTLER",bounty:"War Criminal",nameSpacing:0,bountySpacing:1,photoUrls:["./images/war-criminal/photo-01.png","./images/war-criminal/photo-02.png","./images/war-criminal/photo-03.png"]};function Os(i){var s;(s=window.launchQueue)==null||s.setConsumer(t=>{var n;(n=t.files)!=null&&n.length&&i(t.files)})}function js(i){return i.kind==="file"}const kn={setConsumer:Os,isFileHandle:js},qs=":host{display:block;position:relative;transition:background-color .2s;box-sizing:border-box;background-image:url("+new URL("../images/cement-wall.jpg",import.meta.url).href+");background-position:center;background-size:cover;background-blend-mode:multiply;padding:1rem;width:100%;height:100%}:host(.warcriminal){background-image:url("+new URL("../images/cement-wall.jpg",import.meta.url).href+"),url("+new URL("../images/blood-stains-0.png",import.meta.url).href+")}:host(.dragin){background-color:silver}#uploadInput{display:none}.blood-overlay{display:none;position:absolute;top:0;left:0;opacity:.8;mix-blend-mode:multiply;animation-duration:4s;animation-name:fade-in;background-image:url("+new URL("../images/blood-stains-1.png",import.meta.url).href+");background-position:center;background-size:cover;width:100%;height:100%}.blood-overlay--visible{display:block}.loading-overlay{display:flex;position:absolute;top:0;left:0;justify-content:center;align-items:center;background-image:radial-gradient(#e1e4e7,#a5aab0);width:100%;height:100%}.loading-overlay__luffy{filter:drop-shadow(0 3px 3px rgb(0 0 0 / 50%));max-width:50vw;max-height:40vh}.tips-button{position:absolute;top:.8rem;left:.8rem;cursor:pointer;outline:none;border:0;background-color:transparent;padding:0}.tips-button>svg{filter:drop-shadow(0 0 2px rgb(0 0 0 / 50%));transition:.2s}.tips-button>svg:hover{filter:drop-shadow(0 0 3px #c08000) drop-shadow(0 0 5px #fffca3)}.tips-button--hidden{display:none}.optc-button{position:fixed;top:.5rem;right:5rem;filter:drop-shadow(0 0 .125rem rgb(0 0 0));transition:filter .2s;cursor:pointer;outline:none;border:0;background-image:url("+new URL("../images/tavern-button.png",import.meta.url).href+");background-position:center;background-size:contain;background-repeat:no-repeat;background-color:transparent;padding:0;width:2.4rem;height:2.4rem}.optc-button--hidden{display:none}.optc-button:hover{filter:drop-shadow(0 0 .18rem rgba(0 0 0))}.button-container{display:flex;position:absolute;bottom:0;left:0;gap:.5rem;box-sizing:border-box;padding:0 1rem 1rem}.button-container--hidden{display:none}.criminal{position:fixed;right:1rem;bottom:1.2rem;visibility:hidden;opacity:0;transition:visiblity 2s,opacity 2s;cursor:pointer;margin-left:auto;outline:none;border:0;background-color:transparent;padding:0;width:4rem;max-width:15vw;height:4rem;max-height:15vw}.criminal--visible{visibility:visible;opacity:1}.criminal.criminal--visible:after{top:55%;opacity:1}.criminal:before{position:absolute;top:0;left:0;filter:contrast(85%) brightness(0%) drop-shadow(1px 1px .5rem crimson) drop-shadow(-1px -1px .5rem crimson);transition:filter .5s;background-image:url("+new URL("../images/war-criminal/criminal-avatar.png",import.meta.url).href+');background-position:center;background-size:contain;background-repeat:no-repeat;width:100%;height:100%;content:" "}.criminal--stamp:before{filter:contrast(85%) brightness(110%) drop-shadow(1px 1px .1rem rgb(0 0 0 / 50%)) drop-shadow(-1px -1px .1rem rgb(0 0 0 / 50%));background-image:url('+new URL("../images/war-criminal/criminal-stamp.png",import.meta.url).href+"),url("+new URL("../images/war-criminal/criminal-avatar.png",import.meta.url).href+`)}.criminal:after{position:absolute;top:120%;left:53%;transform:translate(-50%,-50%);opacity:0;filter:brightness(100%)!important;transition:1s ease-out;content:"?";color:#fff;font-size:min(7vw,2rem)}.criminal--stamp:after{content:""}@keyframes fade-in{0%{opacity:0}to{opacity:.8}}
`,Fs=`<input id="uploadInput" type="file" accept="image/*">\r
<slot name="poster"></slot>\r
<div class="blood-overlay"></div>\r
\r
<div class="button-container">\r
  <wanted-button id="editButton" aria-label="Edit panel button" title="Open the edit panel.">\r
    <iconify-icon slot="icon" icon="fluent-mdl2:edit-photo"></iconify-icon>\r
    EDIT\r
  </wanted-button>\r
\r
  <wanted-button id="importButton" aria-label="Import button" title="Import local image to edit.">\r
    <iconify-icon slot="icon" icon="uil:image-upload"></iconify-icon>\r
    IMPORT\r
  </wanted-button>\r
\r
  <wanted-button id="exportButton" aria-label="Export button" title="Export as image file.">\r
    <iconify-icon slot="icon" icon="uil:image-download"></iconify-icon>\r
    EXPORT\r
  </wanted-button>\r
</div>\r
\r
<button id="criminalButton" class="criminal" aria-label="Criminal mode button" title="War criminal"></button>\r
\r
<button id="tipsButton" class="tips-button" aria-label="Tips button" title="Tips">\r
  <svg width="32" height="32" viewBox="0 0 25 22">\r
    <defs>\r
      <radialGradient id="logo-gradient" cx="34%" cy="32%" fr="5%">\r
        <stop offset="0%" stop-color="#FFFDA8"></stop>\r
        <stop offset="70%" stop-color="#FFAB00"></stop>\r
      </radialGradient>\r
    </defs>\r
    <path fill="url('#logo-gradient')" stroke="#4E4A49"\r
      d="m22 10l-.625-1.375L20 8l1.375-.625L22 6l.625 1.375L24 8l-1.375.625Zm-3-4l-.95-2.05L16 3l2.05-.95L19 0l.95 2.05L22 3l-2.05.95ZM9 22q-.825 0-1.412-.587Q7 20.825 7 20h4q0 .825-.587 1.413Q9.825 22 9 22Zm-4-3v-2h8v2Zm.25-3q-1.725-1.025-2.737-2.75Q1.5 11.525 1.5 9.5q0-3.125 2.188-5.312Q5.875 2 9 2q3.125 0 5.312 2.188Q16.5 6.375 16.5 9.5q0 2.025-1.012 3.75q-1.013 1.725-2.738 2.75Z" />\r
  </svg>\r
</button>\r
\r
<button id="optcButton" class="optc-button" aria-label="ONE PIECE Treasure Cruise gallery"\r
  title="ONE PIECE Treasure Cruise gallery">\r
</button>\r
\r
<tips-dialog></tips-dialog>\r
\r
<slot></slot>\r
\r
<edit-panel></edit-panel>\r
<optc-gallery-panel></optc-gallery-panel>\r
\r
\r
<div class="loading-overlay">\r
  <luffy-logo class="loading-overlay__luffy"></luffy-logo>\r
</div>`,$s="app-container",oe="#warcriminal",eo=document.createElement("template");eo.innerHTML=Fs;var pe,fe,ge,Ft,V,me,be,nt,ot,$t,Ht,ye,we,L,Wt,T,ii,io,ni,no,xe,Wi,oi,oo,Q,it;class Hs extends HTMLElement{constructor(){super();d(this,ii);d(this,ni);d(this,xe);d(this,oi);d(this,Q);d(this,pe,void 0);d(this,fe,void 0);d(this,ge,void 0);d(this,Ft,void 0);d(this,V,void 0);d(this,me,void 0);d(this,be,void 0);d(this,nt,void 0);d(this,ot,void 0);d(this,$t,void 0);d(this,Ht,void 0);d(this,ye,0);d(this,we,0);d(this,L,void 0);d(this,Wt,void 0);d(this,T,void 0);const t=this.attachShadow({mode:"open"});u(this,L,t);const n=document.createElement("style");n.textContent=qs,t.append(n,eo.content.cloneNode(!0)),t.addEventListener("WantedPosterLoaded",()=>{g(this,ii,io).call(this)});const e=o(this,L).querySelector("slot[name=poster]");u(this,Ft,e==null?void 0:e.assignedNodes()[0]),u(this,pe,o(this,L).querySelector("edit-panel")),u(this,fe,o(this,L).querySelector("optc-gallery-panel")),u(this,ge,o(this,L).querySelector("tips-dialog")),u(this,V,o(this,L).querySelector("#uploadInput")),u(this,me,o(this,L).querySelector("#editButton")),u(this,be,o(this,L).querySelector("#importButton")),u(this,nt,o(this,L).querySelector("#exportButton")),u(this,ot,o(this,L).querySelector("#criminalButton")),u(this,$t,o(this,L).querySelector("#tipsButton")),u(this,Ht,o(this,L).querySelector("#optcButton")),u(this,Wt,g(this,ni,no).bind(this)),u(this,T,(r,a)=>{switch(r){case"photoUrl":g(this,Q,it).call(this,{"photo-url":a.toString()});break;case"nameSpacing":g(this,Q,it).call(this,{"name-spacing":a.toString()});break;case"bountySpacing":g(this,Q,it).call(this,{"bounty-spacing":a.toString()});break;case"posterShadow":g(this,Q,it).call(this,{"poster-shadow":a.toString()});break;case"photoShadow":g(this,Q,it).call(this,{"photo-shadow":a.toString()});break;case"name":case"bounty":case"filter":g(this,Q,it).call(this,{[r]:a.toString()})}}),window.addEventListener("hashchange",o(this,Wt))}connectedCallback(){u(this,we,new Date().getTime()),g(this,Q,it).call(this,{"name-spacing":b.nameSpacing.toString(),"bounty-spacing":b.bountySpacing.toString(),"poster-shadow":b.posterShadow.toString(),filter:b.filter}),I("photoUrl",o(this,T)),I("name",o(this,T)),I("bounty",o(this,T)),I("nameSpacing",o(this,T)),I("bountySpacing",o(this,T)),I("posterShadow",o(this,T)),I("photoShadow",o(this,T)),I("filter",o(this,T)),location.hash===oe&&g(this,xe,Wi).call(this,!0),this.addEventListener("dragover",t=>{t.preventDefault()}),this.addEventListener("dragenter",()=>{this.classList.add("dragin")}),this.addEventListener("dragleave",t=>{t.relatedTarget===null&&this.classList.remove("dragin")}),this.addEventListener("drop",t=>{var r;t.preventDefault(),this.classList.remove("dragin");const n=(r=t.dataTransfer)==null?void 0:r.files[0];if(!n||!n.type.startsWith("image"))return;const e=URL.createObjectURL(n);b.photoUrl=e}),o(this,V).addEventListener("input",()=>{const t=o(this,V).files?o(this,V).files[0]:null;if(!t||!t.type.startsWith("image"))return;const n=URL.createObjectURL(t);b.photoUrl=n}),o(this,me).addEventListener("click",()=>{o(this,pe).toggle()}),o(this,be).addEventListener("click",()=>{o(this,V).value="",o(this,V).click()}),o(this,nt).addEventListener("click",async()=>{if(!o(this,nt).loading){o(this,nt).loading=!0;try{await o(this,Ft).export()}catch(t){console.error(t);let n="";t instanceof Error&&(n=t.message),alert(`Oops! something went wrong. 😢 
 ${n}`)}finally{o(this,nt).loading=!1}}}),o(this,ot).addEventListener("click",()=>{const t=location.hash===oe;location.hash=t?"":oe}),o(this,$t).addEventListener("click",()=>{o(this,ge).toggle()}),o(this,Ht).addEventListener("click",()=>{o(this,fe).toggle()}),kn.setConsumer(async t=>{const n=t[0];if(!kn.isFileHandle(n))return;const e=await n.getFile(),r=URL.createObjectURL(e);b.photoUrl=r})}disconnectedCallback(){window.removeEventListener("hashchange",o(this,Wt)),R("photoUrl",o(this,T)),R("name",o(this,T)),R("bounty",o(this,T)),R("posterShadow",o(this,T)),R("photoShadow",o(this,T)),R("filter",o(this,T))}}pe=new WeakMap,fe=new WeakMap,ge=new WeakMap,Ft=new WeakMap,V=new WeakMap,me=new WeakMap,be=new WeakMap,nt=new WeakMap,ot=new WeakMap,$t=new WeakMap,Ht=new WeakMap,ye=new WeakMap,we=new WeakMap,L=new WeakMap,Wt=new WeakMap,T=new WeakMap,ii=new WeakSet,io=function(){const t=o(this,L).querySelector(".loading-overlay"),n=1e3,e=setInterval(()=>{if(!(new Date().getTime()-o(this,we)<n)){if(clearTimeout(e),t.style.transition="opacity 1s",t.style.opacity="0",setTimeout(()=>t.remove(),1e3),location.hash===oe){o(this,ot).classList.add("criminal--visible");return}setTimeout(()=>o(this,ot).classList.add("criminal--visible"),1e4)}},200)},ni=new WeakSet,no=function(){g(this,xe,Wi).call(this,location.hash===oe)},xe=new WeakSet,Wi=function(t){var a;const n=o(this,L).querySelector(".blood-overlay");if(!n)return;const e=t?"https://github.com/vshymanskyy/StandWithUkraine/blob/main/docs/README.md":"https://github.com/YuskaWu/one-piece-wanted-poster",r=document.querySelector("github-corner");r.classList.toggle("gc-ua",t),r.setAttribute("href",e),this.classList.toggle("warcriminal"),n.classList.toggle("blood-overlay--visible"),o(this,ot).classList.toggle("criminal--stamp"),o(this,$t).classList.toggle("tips-button--hidden"),o(this,Ht).classList.toggle("optc-button--hidden"),(a=o(this,L).querySelector(".button-container"))==null||a.classList.toggle("button-container--hidden"),t&&zi({...se}),g(this,oi,oo).call(this,t)},oi=new WeakSet,oo=function(t){if(!t){clearInterval(o(this,ye));return}const n=se.photoUrls.length;let e=Math.floor(n*Math.random());zi({photoUrl:se.photoUrls[e]}),u(this,ye,window.setInterval(()=>{e=(e+1)%n,zi({photoUrl:se.photoUrls[e]})},5e3))},Q=new WeakSet,it=function(t){const n=Object.keys(t);for(const e of n){const r=t[e]??"";o(this,Ft).setAttribute(e,r)}};customElements.define($s,Hs);const Ws=":host{--text-shadow: .1rem .1rem .1rem rgb(0 0 0 / 50%);--element-filter: drop-shadow(2px 0 2px rgb(0 0 0 / 40%)) drop-shadow(-2px 0 2px rgb(0 0 0 / 40%)) contrast(100%) brightness(100%);--element-hover-filter: drop-shadow(3px 0 3px rgb(0 0 0 / 40%)) drop-shadow(-3px 0 3px rgb(0 0 0 / 50%)) contrast(105%) brightness(105%);--element-active-filter: drop-shadow(1px 0 2px rgb(0 0 0 / 60%)) drop-shadow(-1px 0 2px rgb(0 0 0 / 70%)) contrast(105%) brightness(105%);--slider-thumb-size: 2rem;display:block;position:fixed;top:0;left:0;transform:translate(-105%);transition:transform .2s;box-sizing:border-box;box-shadow:.1rem 0 .3rem #0000007f;border:1px solid #3b230e;background:linear-gradient(120deg,rgb(245 198 95),rgb(245 218 158),rgb(245 198 96));padding:.125rem;width:18.75rem;max-width:80%;height:100%}:host(.open){transform:translate(0)}.container{display:flex;flex-direction:column;box-sizing:border-box;box-shadow:inset 0 0 .2rem .2rem #0000007f;border:.0625rem solid rgb(180 150 81);background:url("+new URL("../images/wood-bg.png",import.meta.url).href+") repeat-y center top;background-size:100% auto;width:100%;height:100%}.field-container{display:flex;flex:1 0;flex-direction:column;gap:2rem;padding:1rem;overflow-x:hidden;overflow-y:auto}.action-container{display:flex;justify-content:space-around;align-items:center;padding:0 1rem;height:4rem}.wood-button{display:flex;justify-content:center;align-items:center;filter:var(--element-filter);transition:.05s;cursor:pointer;outline:none;border:0;background-image:url("+new URL("../images/wood-button.png",import.meta.url).href+");background-position:center;background-size:100% 100%;background-repeat:no-repeat;background-color:transparent;width:6rem;height:2rem;color:#fff;font-size:1rem;font-family:serif;text-shadow:var(--text-shadow)}.wood-button:hover{filter:var(--element-hover-filter)}.close-button{filter:var(--element-filter);transition:.1s;cursor:pointer;outline:none;border:0;background-image:url("+new URL("../images/close-button.png",import.meta.url).href+");background-position:center;background-size:100% 100%;background-repeat:no-repeat;background-color:transparent;width:2rem;height:2rem}.close-button:hover{filter:var(--element-hover-filter)}.wood-button:active,.close-button:active{transform:translateY(1px);filter:var(--element-active-filter)}.text-input{filter:var(--element-filter);outline:none;border:0;background-image:url("+new URL("../images/input-frame.png",import.meta.url).href+");background-position:center;background-size:100% 100%;background-repeat:no-repeat;background-color:transparent;padding:0 1rem;color:var(--dark-text-color);font-size:2rem;line-height:4rem;font-family:serif;text-align:center}.text-input::-moz-placeholder{color:#0000004d;font-size:2rem;text-shadow:none}.text-input::placeholder{color:#0000004d;font-size:2rem;text-shadow:none}.slider{display:flex;flex-direction:column;align-items:center}.slider__label{display:inline-flex;position:relative;justify-content:center;align-items:center;box-sizing:border-box;margin:0;background-image:url("+new URL("../images/scroll-paper.png",import.meta.url).href+");background-position:center;background-size:100% 100%;background-repeat:no-repeat;background-color:transparent;padding-bottom:.1rem;padding-left:.5rem;width:11rem;height:2rem;color:var(--dark-text-color);font-size:.75rem}.slider__input{-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none;background:transparent;width:100%;height:2.5rem}.slider__input::-webkit-slider-runnable-track{box-shadow:0 0 3px 1px #000c;border:1px solid rgb(0 0 0 / 80%);border-radius:.1rem;background-color:var(--theme-color);height:.75rem}.slider__input::-moz-range-track{box-shadow:0 0 3px 1px #000c;border:1px solid rgb(0 0 0 / 80%);border-radius:.1rem;background-color:var(--theme-color);height:.75rem}.slider__input::-webkit-slider-thumb{position:relative;top:-.75rem;-webkit-appearance:none;-moz-appearance:none;appearance:none;filter:var(--element-filter);-webkit-transition:filter .05s;transition:filter .05s;cursor:pointer;border:0;background:url("+new URL("../images/slider-thumb.png",import.meta.url).href+");background-position:center;background-size:cover;background-repeat:no-repeat;background-color:transparent;width:var(--slider-thumb-size);height:var(--slider-thumb-size)}.slider__input::-webkit-slider-thumb:hover{filter:var(--element-hover-filter)}.slider__input::-moz-range-thumb{position:relative;top:-.75rem;filter:var(--element-filter);cursor:pointer;border:0;background:url("+new URL("../images/slider-thumb.png",import.meta.url).href+`);background-position:center;background-size:cover;background-repeat:no-repeat;background-color:transparent;width:var(--slider-thumb-size);height:var(--slider-thumb-size)}::-moz-selection{filter:brightness(120%);background:rgb(88 64 52 / 80%);color:#fff}::selection{filter:brightness(120%);background:rgb(88 64 52 / 80%);color:#fff}::-webkit-scrollbar{width:.2rem}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{border-radius:.1rem;background:#f5d58d}::-webkit-scrollbar-corner{background:transparent}
`,Ds=`<div class="container">\r
  <div class="field-container">\r
    <input id="nameInput" class="text-input" placeholder="Name" />\r
    <input id="bountyInput" class="text-input" placeholder="Bounty" />\r
\r
    <div class="slider">\r
      <label for="nameSpacingSlider" class="slider__label">Name Text Spacing</label>\r
      <input id="nameSpacingSlider" class="slider__input" type="range" min="0" max="3">\r
    </div>\r
\r
    <div class="slider">\r
      <label for="bountySpacingSlider" class="slider__label">Bounty Text Spacing</label>\r
      <input id="bountySpacingSlider" class="slider__input" type="range" min="0" max="3">\r
    </div>\r
\r
    <div class="slider">\r
      <label for="posterShadowSlider" class="slider__label">Poster Shadow</label>\r
      <input id="posterShadowSlider" class="slider__input" type="range" min="0" max="20">\r
    </div>\r
\r
    <div class="slider">\r
      <label for="photoShadowSlider" class="slider__label">Photo Shadow</label>\r
      <input id="photoShadowSlider" class="slider__input" type="range" min="0" max="20">\r
    </div>\r
\r
    <div class="slider">\r
      <label for="blurSlider" class="slider__label">Blur</label>\r
      <input id="blurSlider" class="slider__input" type="range" min="0" max="10">\r
    </div>\r
\r
    <div class="slider">\r
      <label for="brightnessSlider" class="slider__label">Brightness</label>\r
      <input id="brightnessSlider" class="slider__input" type="range" min="0" max="200">\r
    </div>\r
\r
    <div class="slider">\r
      <label for="contrastSlider" class="slider__label">Contrast</label>\r
      <input id="contrastSlider" class="slider__input" type="range" min="0" max="200">\r
    </div>\r
\r
    <div class="slider">\r
      <label for="grayscaleSlider" class="slider__label">Grayscale</label>\r
      <input id="grayscaleSlider" class="slider__input" type="range" min="0" max="100">\r
    </div>\r
\r
    <div class="slider">\r
      <label for="hueRotateSlider" class="slider__label">Hue Rotate</label>\r
      <input id="hueRotateSlider" class="slider__input" type="range" min="0" max="360">\r
    </div>\r
\r
    <div class="slider">\r
      <label for="saturateSlider" class="slider__label">Saturate</label>\r
      <input id="saturateSlider" class="slider__input" type="range" min="0" max="200">\r
    </div>\r
\r
    <div class="slider">\r
      <label for="sepiaSlider" class="slider__label">Sepia</label>\r
      <input id="sepiaSlider" class="slider__input" type="range" min="0" max="100">\r
    </div>\r
  </div>\r
  <div class="action-container">\r
    <button id="closeButton" class="close-button" aria-label="Close edit panel button" title="Close"></button>\r
    <button id="resetButton" class="wood-button" aria-label="Reset button"\r
      title="Reset to default settings.">RESET</button>\r
  </div>\r
</div>`,Gs="edit-panel",so=document.createElement("template");so.innerHTML=Ds;var st,rt,at,ct,lt,ht,dt,ut,pt,ft,gt,mt,bt,ve,Se,Dt,S;class Qs extends HTMLElement{constructor(){super();d(this,st,void 0);d(this,rt,void 0);d(this,at,void 0);d(this,ct,void 0);d(this,lt,void 0);d(this,ht,void 0);d(this,dt,void 0);d(this,ut,void 0);d(this,pt,void 0);d(this,ft,void 0);d(this,gt,void 0);d(this,mt,void 0);d(this,bt,void 0);d(this,ve,void 0);d(this,Se,void 0);d(this,Dt,void 0);d(this,S,void 0);const t=this.attachShadow({mode:"open"}),n=document.createElement("style");n.textContent=Ws,t.append(n,so.content.cloneNode(!0)),u(this,st,t.querySelector("#nameInput")),u(this,rt,t.querySelector("#bountyInput")),u(this,at,t.querySelector("#nameSpacingSlider")),u(this,ct,t.querySelector("#bountySpacingSlider")),u(this,lt,t.querySelector("#posterShadowSlider")),u(this,ht,t.querySelector("#photoShadowSlider")),u(this,dt,t.querySelector("#blurSlider")),u(this,ut,t.querySelector("#brightnessSlider")),u(this,pt,t.querySelector("#contrastSlider")),u(this,ft,t.querySelector("#grayscaleSlider")),u(this,gt,t.querySelector("#hueRotateSlider")),u(this,mt,t.querySelector("#saturateSlider")),u(this,bt,t.querySelector("#sepiaSlider")),u(this,ve,t.querySelector("#closeButton")),u(this,Se,t.querySelector("#resetButton")),u(this,S,(e,r)=>{switch(r=r.toString(),e){case"name":o(this,st).value=r;break;case"bounty":o(this,rt).value=r;break;case"nameSpacing":o(this,at).value=r;break;case"bountySpacing":o(this,ct).value=r;break;case"posterShadow":o(this,lt).value=r;break;case"photoShadow":o(this,ht).value=r;break;case"blur":o(this,dt).value=r;break;case"brightness":o(this,ut).value=r;break;case"contrast":o(this,pt).value=r;break;case"grayscale":o(this,ft).value=r;break;case"hueRotate":o(this,gt).value=r;break;case"saturate":o(this,mt).value=r;break;case"sepia":o(this,bt).value=r;break}}),u(this,Dt,e=>{var a;const r=e.composedPath()[0];r instanceof Node&&((a=this.shadowRoot)!=null&&a.contains(r))||this.classList.contains("open")&&this.toggle()})}toggle(){this.classList.toggle("open")}connectedCallback(){window.addEventListener("pointerdown",o(this,Dt)),I("name",o(this,S)),I("bounty",o(this,S)),I("nameSpacing",o(this,S)),I("bountySpacing",o(this,S)),I("posterShadow",o(this,S)),I("photoShadow",o(this,S)),I("blur",o(this,S)),I("saturate",o(this,S)),I("contrast",o(this,S)),I("grayscale",o(this,S)),I("hueRotate",o(this,S)),I("hueRotate",o(this,S)),I("sepia",o(this,S)),o(this,st).value=b.name,o(this,rt).value=b.bounty.toString(),o(this,at).value=b.nameSpacing.toString(),o(this,ct).value=b.bountySpacing.toString(),o(this,lt).value=b.posterShadow.toString(),o(this,ht).value=b.photoShadow.toString(),o(this,dt).value=b.blur.toString(),o(this,ut).value=b.brightness.toString(),o(this,pt).value=b.contrast.toString(),o(this,ft).value=b.grayscale.toString(),o(this,gt).value=b.hueRotate.toString(),o(this,mt).value=b.saturate.toString(),o(this,bt).value=b.sepia.toString(),o(this,st).addEventListener("input",()=>b.name=o(this,st).value),o(this,rt).addEventListener("input",()=>b.bounty=o(this,rt).value),o(this,at).addEventListener("input",()=>b.nameSpacing=parseInt(o(this,at).value)),o(this,ct).addEventListener("input",()=>b.bountySpacing=parseInt(o(this,ct).value)),o(this,lt).addEventListener("input",()=>b.posterShadow=parseInt(o(this,lt).value)),o(this,ht).addEventListener("input",()=>b.photoShadow=parseInt(o(this,ht).value)),o(this,dt).addEventListener("input",()=>b.blur=parseInt(o(this,dt).value)),o(this,ut).addEventListener("input",()=>b.brightness=parseInt(o(this,ut).value)),o(this,pt).addEventListener("input",()=>b.contrast=parseInt(o(this,pt).value)),o(this,ft).addEventListener("input",()=>b.grayscale=parseInt(o(this,ft).value)),o(this,gt).addEventListener("input",()=>b.hueRotate=parseInt(o(this,gt).value)),o(this,mt).addEventListener("input",()=>b.saturate=parseInt(o(this,mt).value)),o(this,bt).addEventListener("input",()=>b.sepia=parseInt(o(this,bt).value)),o(this,ve).addEventListener("click",()=>this.toggle()),o(this,Se).addEventListener("click",()=>Ns({photoUrl:b.photoUrl}))}disconnectedCallback(){window.removeEventListener("pointerdown",o(this,Dt)),R("name",o(this,S)),R("bounty",o(this,S)),R("posterShadow",o(this,S)),R("blur",o(this,S)),R("saturate",o(this,S)),R("contrast",o(this,S)),R("grayscale",o(this,S)),R("hueRotate",o(this,S)),R("hueRotate",o(this,S)),R("sepia",o(this,S))}}st=new WeakMap,rt=new WeakMap,at=new WeakMap,ct=new WeakMap,lt=new WeakMap,ht=new WeakMap,dt=new WeakMap,ut=new WeakMap,pt=new WeakMap,ft=new WeakMap,gt=new WeakMap,mt=new WeakMap,bt=new WeakMap,ve=new WeakMap,Se=new WeakMap,Dt=new WeakMap,S=new WeakMap;customElements.define(Gs,Qs);const In=""+new URL("circle-button-78c4b94b.png",import.meta.url).href,Ys=`:host{--filter: drop-shadow(.125rem 0 .125rem rgb(0 0 0 / 40%)) drop-shadow(-.125rem 0 .125rem rgb(0 0 0 / 40%)) contrast(100%) brightness(100%);--hover-filter: drop-shadow(.1875rem 0 .1875rem rgb(0 0 0 / 40%)) drop-shadow(-.1875rem 0 .1875rem rgb(0 0 0 / 50%)) contrast(105%) brightness(105%);--active-filter: drop-shadow(.0625rem 0 .125rem rgb(0 0 0 / 60%)) drop-shadow(-.0625rem 0 .125rem rgb(0 0 0 / 70%)) contrast(105%) brightness(105%);display:flex;justify-content:center;align-items:center;filter:var(--filter);transition:.1s;cursor:pointer;outline:none;border:0;background-position:center;background-size:cover;background-repeat:no-repeat;background-color:transparent;width:2rem;height:2rem;color:#fff}:host(:hover){filter:var(--hover-filter)}:host(:active){transform:translateY(.0625rem);filter:var(--active-filter)}iconify-icon{pointer-events:none}
`,Xs='<iconify-icon part="icon"></iconify-icon>',Vs="icon-button",Ks=["icon","mode","flip","height","width","inline","preserveAspectRatio","rotate"],ro=document.createElement("template");ro.innerHTML=Xs;var ke;class Js extends HTMLElement{constructor(){var e;super();d(this,ke,void 0);const t=this.attachShadow({mode:"open"}),n=document.createElement("style");n.textContent=Ys,t.append(n,ro.content.cloneNode(!0)),(e=t.querySelector("img"))==null||e.setAttribute("src",In),u(this,ke,t.querySelector("iconify-icon"))}static get observedAttributes(){return Ks}connectedCallback(){this.style.backgroundImage=`url(${In})`}attributeChangedCallback(t,n,e){o(this,ke).setAttribute(t,e)}}ke=new WeakMap;customElements.define(Vs,Js);const Zs=`:host{position:relative}.bottom-img{display:block;max-width:100%;max-height:100%}.top-img{position:absolute;top:0;left:0;-webkit-mask-image:linear-gradient(90deg,rgb(0 0 0 / 0%) 35%,rgb(255 255 255 / 100%) 50%,rgb(0 0 0 / 0%) 65%);mask-image:linear-gradient(90deg,rgb(0 0 0 / 0%) 35%,rgb(255 255 255 / 100%) 50%,rgb(0 0 0 / 0%) 65%);-webkit-mask-size:300% 100%;mask-size:300% 100%;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;filter:brightness(1.8);animation-duration:4s;animation-timing-function:linear;animation-iteration-count:infinite;animation-name:flicker;max-width:100%;max-height:100%}@keyframes flicker{0%{-webkit-mask-position:150% 0%;mask-position:150% 0%}30%{-webkit-mask-position:-150% 0%;mask-position:-150% 0%}to{-webkit-mask-position:-150% 0%;mask-position:-150% 0%}}
`,tr=`<img class="bottom-img" src="./images/luffy.png" alt="luffy avatar" />\r
<img class="top-img" src="./images/luffy.png" alt="luffy avatar" />`,er="luffy-logo",ao=document.createElement("template");ao.innerHTML=tr;class ir extends HTMLElement{constructor(){super();const s=this.attachShadow({mode:"open"}),t=document.createElement("style");t.textContent=Zs,s.append(t,ao.content.cloneNode(!0))}}customElements.define(er,ir);const nr=":host{--text-shadow: .1rem .1rem .1rem rgb(0 0 0 / 50%);--element-filter: drop-shadow(2px 0 2px rgb(0 0 0 / 40%)) drop-shadow(-2px 0 2px rgb(0 0 0 / 40%)) contrast(100%) brightness(100%);--element-hover-filter: drop-shadow(3px 0 3px rgb(0 0 0 / 40%)) drop-shadow(-3px 0 3px rgb(0 0 0 / 50%)) contrast(105%) brightness(105%);--element-active-filter: drop-shadow(1px 0 2px rgb(0 0 0 / 60%)) drop-shadow(-1px 0 2px rgb(0 0 0 / 70%)) contrast(105%) brightness(105%);display:block;position:fixed;top:0;right:0;transform:translate(105%);transition:transform .2s;box-sizing:border-box;box-shadow:.1rem 0 .3rem #0000007f;border:1px solid #3b230e;background:linear-gradient(120deg,rgb(245 198 95),rgb(245 218 158),rgb(245 198 96));padding:.125rem;width:28rem;max-width:80%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host(.open){transform:translate(0)}.container{box-sizing:border-box;container:panel / inline-size;box-shadow:inset 0 0 .2rem .2rem #0000007f;border:.0625rem solid rgb(180 150 81);background:url("+new URL("../images/wood-bg.png",import.meta.url).href+") repeat-y center top;background-size:100% auto;width:100%;height:100%}.container>*{height:100%}.loading,.error{display:flex;justify-content:center;align-items:center;padding:1rem;color:#fff}.loading{font-size:6rem}.content{display:grid;grid-template-rows:auto 1fr auto}.header{display:flex;align-items:center;gap:1rem;padding:.5rem 1rem}.image-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;padding:1rem;overflow-y:auto}.image-grid>img{filter:drop-shadow(0 0 .15rem rgba(0 0 0 / 80%));cursor:pointer;background-color:#fff;max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}.pagination{display:flex;align-items:center;border:1px solid #3b230e;background:linear-gradient(120deg,rgb(245 198 95),rgb(245 218 158),rgb(245 198 96));padding:.5rem}.page-number-wrapper{display:flex;flex-grow:1;justify-content:space-evenly}.page-button,.navigate-button{display:flex;justify-content:center;align-items:center;transition:.2s;border:0;border-radius:.125em;background-color:transparent;padding:0 .25em;min-width:1.25em;min-height:1.25em;color:#3b230e;font-size:1em}.navigate-button{position:relative;font-size:1.6em}.navigate-button[disabled]{color:#3b230e7f}.navigate-button iconify-icon{position:absolute;pointer-events:none}.page-button:not([disabled]),.navigate-button:not([disabled]){cursor:pointer}.page-button:not([disabled]):hover,.navigate-button:not([disabled]):hover{background-color:#3b230e33}.page-button--active{background-color:#3b230e;color:#fff}@media (min-width: 430px){.pagination{gap:.5rem;font-size:1.25rem}}.search-input{filter:var(--element-filter);margin-right:auto;outline:none;border:0;background-image:url("+new URL("../images/input-frame.png",import.meta.url).href+`);background-position:center;background-size:100% 100%;background-repeat:no-repeat;background-color:transparent;padding:0 1rem;width:50%;color:var(--dark-text-color);font-size:1.6rem;line-height:2em;font-family:serif;text-align:center}.search-input::-moz-placeholder{color:#0000004d;text-shadow:none}.search-input::placeholder{color:#0000004d;text-shadow:none}#orderButton::part(icon){transition:.2s transform}#orderButton[descending]::part(icon){transform:scaleX(-1) rotate(180deg)}:host([loading]) .content{display:none}:host([loading]) .error{display:none}:host([error]) .content{display:none}:host([error]) .loading{display:none}::-moz-selection{filter:brightness(120%);background:rgb(88 64 52 / 80%);color:#fff}::selection{filter:brightness(120%);background:rgb(88 64 52 / 80%);color:#fff}::-webkit-scrollbar{width:.2rem}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{border-radius:.1rem;background:#f5d58d}::-webkit-scrollbar-corner{background:transparent}
`,or=`<div class="container">\r
  <div class="content">\r
    <div class="header">\r
      <input id="searchInput" type="text" class="search-input" placeholder="Name or ID">\r
      <icon-button id="orderButton" icon="tdesign:order-ascending"></icon-button>\r
      <icon-button id="closeButton" icon="ep:close-bold"></icon-button>\r
    </div>\r
    <div id="imageGrid" class="image-grid"></div>\r
    <div class="pagination">\r
      <button id="preButton" class="navigate-button">\r
        <iconify-icon icon="ic:round-navigate-before"></iconify-icon>\r
      </button>\r
      <div id="pageNumberWrapper" class="page-number-wrapper"></div>\r
      <button id="nextButton" class="navigate-button">\r
        <iconify-icon icon="ic:round-navigate-next"></iconify-icon>\r
      </button>\r
    </div>\r
  </div>\r
  <div class="loading"><iconify-icon icon="eos-icons:loading"></iconify-icon></div>\r
  <div id="error" class="error">Error</div>\r
</div>`,sr="optc-gallery-panel",co=document.createElement("template");co.innerHTML=or;var Ie,$,Gt,Qt,Ee,Ct,At,Rt,_t,Le,Yt,Xt,Pt,A,H,si,lo,ri,ho,K,Tt;class rr extends HTMLElement{constructor(){super();d(this,si);d(this,ri);d(this,K);d(this,Ie,0);d(this,$,null);d(this,Gt,void 0);d(this,Qt,void 0);d(this,Ee,void 0);d(this,Ct,void 0);d(this,At,void 0);d(this,Rt,void 0);d(this,_t,void 0);d(this,Le,void 0);d(this,Yt,void 0);d(this,Xt,"ascending");d(this,Pt,10);d(this,A,1);d(this,H,0);const t=this.attachShadow({mode:"open"}),n=document.createElement("style");n.textContent=nr,t.append(n,co.content.cloneNode(!0)),u(this,Gt,t.querySelector("#searchInput")),u(this,Qt,t.querySelector("#orderButton")),u(this,Ee,t.querySelector("#closeButton")),u(this,Ct,t.querySelector("#imageGrid")),u(this,At,t.querySelector("#pageNumberWrapper")),u(this,Rt,t.querySelector("#preButton")),u(this,_t,t.querySelector("#nextButton")),u(this,Le,t.querySelector("#error")),u(this,Yt,e=>{var a;const r=e.composedPath()[0];r instanceof Node&&((a=this.shadowRoot)!=null&&a.contains(r))||this.classList.contains("open")&&this.toggle()})}async init(){this.setAttribute("loading","");try{let n=await(await fetch("https://raw.githubusercontent.com/optc-db/optc-db.github.io/master/common/data/families.js")).text();n=n.replace("(function () {","").replace("window.families =","const families = ").replace("const calcGhostStartIDStart = 5000;","").replace(/const ghostFamilies(.|\n)*\}\);/,"").replace("})();","export default families");const e=new Blob([n],{type:"text/javascript"}),r=URL.createObjectURL(e),{default:a}=await Pn(()=>import(r),[],import.meta.url);u(this,$,a),g(this,K,Tt).call(this)}catch(t){this.setAttribute("error","");let n="Faild to get character info.";t instanceof Error&&(n+=`
`+t.message),o(this,Le).innerText=n}finally{this.removeAttribute("loading")}}get ids(){if(!o(this,$))return[];const t=o(this,Gt).value.toLowerCase().trim();if(!t)return Array.from(Object.keys(o(this,$)));const n=[];for(const e in o(this,$)){if(e.includes(t)){n.push(e);continue}o(this,$)[e].some(c=>c.toLocaleLowerCase().includes(t))&&n.push(e)}return n}toggle(){!o(this,$)&&!this.classList.contains("open")&&this.init(),this.classList.toggle("open")}connectedCallback(){window.addEventListener("pointerdown",o(this,Yt)),o(this,Gt).addEventListener("input",()=>g(this,si,lo).call(this)),o(this,Qt).addEventListener("click",()=>{u(this,Xt,o(this,Xt)==="ascending"?"descending":"ascending"),o(this,Qt).toggleAttribute("descending"),g(this,K,Tt).call(this)}),o(this,Ee).addEventListener("click",()=>this.toggle()),o(this,Ct).addEventListener("click",t=>{const n=t.target;n instanceof Image&&(b.photoUrl=n.src,b.name=n.dataset.name??"",this.toggle())}),o(this,Rt).addEventListener("click",()=>{o(this,A)!==1&&(Ye(this,A)._--,g(this,K,Tt).call(this))}),o(this,_t).addEventListener("click",()=>{o(this,A)!==o(this,H)&&(Ye(this,A)._++,g(this,K,Tt).call(this))})}disconnectedCallback(){window.removeEventListener("pointerdown",o(this,Yt))}}Ie=new WeakMap,$=new WeakMap,Gt=new WeakMap,Qt=new WeakMap,Ee=new WeakMap,Ct=new WeakMap,At=new WeakMap,Rt=new WeakMap,_t=new WeakMap,Le=new WeakMap,Yt=new WeakMap,Xt=new WeakMap,Pt=new WeakMap,A=new WeakMap,H=new WeakMap,si=new WeakSet,lo=function(){clearTimeout(o(this,Ie)),u(this,Ie,setTimeout(()=>{u(this,A,1),g(this,K,Tt).call(this)},500))},ri=new WeakSet,ho=function(){if(o(this,At).innerHTML="",o(this,H)===0){o(this,Rt).disabled=!0,o(this,_t).disabled=!0;return}let t=1;const n=new Set([1,o(this,H),o(this,A)]),e=Math.min(o(this,H),5);for(;n.size<e;){const a=Math.max(o(this,A)-t,1),c=Math.min(o(this,A)+t,o(this,H));n.add(a),n.add(c),t++}const r=Array.from(n.values()).sort((a,c)=>a-c);r.forEach((a,c)=>{const l=document.createElement("button");l.innerText=a.toString(),l.classList.add("page-button"),l.addEventListener("click",()=>{u(this,A,a),g(this,K,Tt).call(this)}),o(this,A)===a&&(l.classList.add("page-button--active"),l.toggleAttribute("disabled")),o(this,At).appendChild(l);const h=c+1;if(h<r.length&&r[h]-a>1){const p=document.createElement("button");p.classList.add("page-button"),p.toggleAttribute("disabled"),p.innerText="...",o(this,At).appendChild(p)}}),o(this,Rt).toggleAttribute("disabled",o(this,A)===1),o(this,_t).toggleAttribute("disabled",o(this,A)===o(this,H))},K=new WeakSet,Tt=function(){o(this,Ct).innerHTML="";const t=this.ids;if(u(this,H,Math.ceil(t.length/o(this,Pt))),g(this,ri,ho).call(this),o(this,H)===0)return;const n=(o(this,A)-1)*o(this,Pt);(o(this,Xt)==="ascending"?t.slice(n,n+o(this,Pt)):t.reverse().slice(n,n+o(this,Pt))).forEach(r=>{const a=parseInt(r);if(isNaN(a))return;const c=Math.floor(a/1e3),l=(Math.floor(a%1e3/100)*100).toString().padStart(3,"0"),h=a.toString().padStart(4,"0")+".png",p=`https://optc-db.github.io/api/images/full/transparent/${c}/${l}/${h}`,f=o(this,$)?o(this,$)[r].join(", ").toUpperCase():"",m=new Image;m.src=p,m.loading="lazy",m.dataset.id=r,m.dataset.name=f,o(this,Ct).appendChild(m)})};customElements.define(sr,rr);const ar=":host{display:block;position:fixed;top:0;left:0;visibility:hidden;opacity:0;filter:drop-shadow(0 0 5px rgb(0 0 0 / 60%));transition:.2s;box-sizing:border-box;margin-top:3rem;margin-left:.5rem;background-image:url("+new URL("../images/tips-paper.png",import.meta.url).href+`);background-size:contain;background-repeat:no-repeat;padding:1rem .8rem 1rem 1rem;width:17.62rem;max-width:100vw;height:26.33rem;color:var(--dark-text-color);font-size:.8rem}:host([open]){visibility:visible;opacity:1}.content{height:100%;overflow:auto}.content h3{border-bottom:1px solid var(--dark-text-color)}.content *{margin-block-start:.5em;margin-block-end:1em}a{position:relative;outline:none;text-decoration:none}a:after{position:absolute;bottom:0;left:0;border-bottom:.2rem solid rgb(211 255 77 / 50%);width:100%;height:1px;content:" "}a:link{color:#009637}a:visited{color:#558f6a}::-webkit-scrollbar{width:.1rem}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{border-radius:.1rem;background:var(--dark-text-color)}::-webkit-scrollbar-corner{background:transparent}
`,cr=`<div class="content">\r
\r
  <h3>Import image as the wanted photo</h3>\r
  <p>\r
    Click <b>IMPORT</b> button to choose an image from your device storage, or drag and drop the image anywhere on this\r
    page.\r
  </p>\r
\r
  <h3>Adjust the position of the photo</h3>\r
  <p>\r
    After importing the image, click(or touch) and drag the photo to adjust the position.\r
  </p>\r
\r
  <h3>Resize the imported photo</h3>\r
  <p>\r
    - Move the cursor over the photo, and scroll the mouse wheel to zoom in or zoom out.\r
  </p>\r
  <p>\r
    - Move the cursor over the red border around the photo and drag it to resize.\r
  </p>\r
  <p>\r
    - For the touch screen device, touch two fingers on the top of the photo, and move them apart to zoom in, or\r
    together to\r
    zoom out.\r
  </p>\r
\r
  <h3>Name and Bounty</h3>\r
  <P>\r
    Click <b>EDIT</b> button to open the edit panel, the first\r
    input field in the edit panel is name, and the second input field is bounty.\r
  </P>\r
  <p>\r
    You can input any text for both of them, however if you input number in the bounty field, the Belly sign will be\r
    rendered in the front of the bounty text, and decimal comma will automatically insert in the text.\r
  </p>\r
\r
  <h3>Install this app on your device</h3>\r
  <p>\r
    <b>NOTE: For now, only Chrome and Edge support this feature.</b>\r
  </p>\r
  <p>\r
    This web application support <a href="https://en.wikipedia.org/wiki/Progressive_web_app" target="_blank">PWA</a>,\r
    which means you can\r
    install it as a native app on your device, and launch it directly without opening the browser.\r
\r
  </p>\r
  <p>\r
    Check out the <a href="https://support.google.com/chrome/answer/9658361?hl=en&co=GENIE.Platform%3DDesktop"\r
      target="_blank">installation guide</a>.</p>\r
\r
</div>`,lr="tips-dialog",uo=document.createElement("template");uo.innerHTML=cr;class hr extends HTMLElement{constructor(){super();const s=this.attachShadow({mode:"open"}),t=document.createElement("style");t.textContent=ar,s.append(t,uo.content.cloneNode(!0))}toggle(){this.hasAttribute("open")?this.removeAttribute("open"):this.setAttribute("open","")}}customElements.define(lr,hr);const dr=`:host{display:inline-flex;position:relative;justify-content:center;filter:contrast(100%) brightness(100%) drop-shadow(1px 1px 1px rgb(0 0 0 / 50%)) drop-shadow(-1px -1px 1px rgb(0 0 0 / 50%));transition:.05s;cursor:pointer;outline:none;background-color:transparent;width:4.25rem;height:5rem}:host(:hover:not([loading])){filter:contrast(105%) brightness(105%) drop-shadow(1px 4px 3px rgb(0 0 0 / 50%)) drop-shadow(-1px 0 3px rgb(0 0 0 / 50%))}:host(:active:not([loading])){transform:translateY(1px);filter:contrast(105%) brightness(105%) drop-shadow(1px 2px 1px rgb(0 0 0 / 60%)) drop-shadow(-1px 0 1px rgb(0 0 0 / 60%))}.img{position:absolute;max-width:100%;max-height:100%}.icon{display:flex;position:absolute;top:21%;justify-content:center;align-items:center;box-sizing:border-box;width:82%;height:44%;color:#513721;font-size:1.5rem}iconify-icon{display:none}:host([loading]){cursor:wait}:host([loading]) iconify-icon{display:inline}.text{display:flex;position:absolute;bottom:12%;justify-content:center;align-items:center;box-sizing:border-box;width:85%;height:20%;overflow:hidden;color:#513721;font-weight:900;font-size:.9rem;font-family:Scheherazade New,serif;text-align:justify;white-space:nowrap}
`,ur=`<img class="img" alt="button image" />\r
<div class="icon">\r
  <slot name="icon"></slot>\r
  <iconify-icon icon="eos-icons:loading"></iconify-icon>\r
</div>\r
<span class="text">\r
  <slot></slot>\r
</span>`,pr=""+new URL("wanted-c2a6dd7a.png",import.meta.url).href,fr="wanted-button",gr=["font-size"],po=document.createElement("template");po.innerHTML=ur;var Te,Ce;class mr extends HTMLElement{constructor(){var e;super();d(this,Te,void 0);d(this,Ce,void 0);const t=this.attachShadow({mode:"open"});u(this,Te,t);const n=document.createElement("style");n.textContent=dr,t.append(n,po.content.cloneNode(!0)),(e=t.querySelector("img"))==null||e.setAttribute("src",pr),u(this,Ce,t.querySelector("span.text"))}static get observedAttributes(){return gr}set loading(t){const n=o(this,Te).querySelector("slot[name=icon]");n&&(n.style.display=t?"none":"contents"),t?this.setAttribute("loading",""):this.removeAttribute("loading")}get loading(){return this.hasAttribute("loading")}attributeChangedCallback(t,n,e){switch(t){case"font-size":o(this,Ce).style.fontSize=e;break}}}Te=new WeakMap,Ce=new WeakMap;customElements.define(fr,mr);const br=""+new URL("belly-af8e0dab.png",import.meta.url).href,yr=""+new URL("one-piece-wanted-ed269d97.png",import.meta.url).href,Bi={imageUrl:yr,bellyImageUrl:br,photoPosition:{x:74,y:252,width:638,height:484},namePosition:{x:87,y:826,width:586,height:114},bountyInfo:{x:82,y:958,width:592,height:85,bellyMarginRight:18,fontSize:70},boundaryOffset:{left:10,right:10,top:10,bottom:10}},wr=`:host{display:block;width:100%;height:100%;touch-action:none}.container{display:flex;position:relative;justify-content:center;align-items:center;box-sizing:border-box;width:100%;height:100%}
`;function ei(i){return new Promise((s,t)=>{const n=new Image;n.setAttribute("crossorigin","anonymous"),n.onload=()=>s(n),n.onerror=t,n.src=i})}function nn(i,s,t,n){const e=i/t,r=s/n;return Math.min(r,e)}class on{constructor(s){P(this,"x",0);P(this,"y",0);P(this,"width",0);P(this,"height",0);P(this,"ctx");this.ctx=s}scale(s){this.x=this.x*s,this.y=this.y*s,this.width=this.width*s,this.height=this.height*s}}var Vt,Kt,ai,go;class fo extends on{constructor(){super(...arguments);d(this,ai);d(this,Vt,"");d(this,Kt,0);P(this,"formattedText","");P(this,"align","center");P(this,"baseline","top");P(this,"fontSize",0)}set text(t){u(this,Vt,t),this.formattedText=this.formatText(t,o(this,Kt))}get text(){return o(this,Vt)}set spacing(t){u(this,Kt,t),this.formattedText=this.formatText(o(this,Vt),t)}get spacing(){return o(this,Kt)}formatSpacing(t,n){let e="";for(let r=0;r<n;r++)e+=" ";return Array.from(t).join(e)}formatText(t,n=0){return this.formatSpacing(t,n)}getTextActualHeight(t){const{actualBoundingBoxAscent:n,actualBoundingBoxDescent:e}=this.ctx.measureText(t);return n+e}beforeRenderText(){}render(){this.ctx.save(),this.ctx.textAlign=this.align,this.ctx.textBaseline=this.baseline;const{x:t,y:n,maxWidth:e}=this.beforeRenderText()??{};g(this,ai,go).call(this,t,n,e),this.ctx.restore()}}Vt=new WeakMap,Kt=new WeakMap,ai=new WeakSet,go=function(t=this.x,n=this.y,e=this.width){this.ctx.fillStyle="rgba(0,0,0,0.78)",this.ctx.globalCompositeOperation="soft-light",this.ctx.fillText(this.formattedText,t,n,e),this.ctx.fillText(this.formattedText,t,n,e),this.ctx.fillText(this.formattedText,t,n,e),this.ctx.fillStyle="rgba(84,60,48,1)",this.ctx.globalCompositeOperation="color",this.ctx.fillText(this.formattedText,t,n,e)};var J,ci,yt,Jt,Ae;class En extends fo{constructor(){super(...arguments);d(this,J,!0);d(this,ci,new Intl.NumberFormat);d(this,yt,null);d(this,Jt,1);d(this,Ae,0)}async loadBellyImage(t){try{u(this,yt,await ei(t))}catch(n){throw console.error(n),new Error("Failed to init bounty.")}}setBountyInfo(t,n){const{x:e,y:r,width:a,height:c,bellyMarginRight:l,fontSize:h}=t;this.x=e,this.y=r,this.width=a,this.height=c,this.fontSize=h,u(this,Ae,l),u(this,Jt,n)}formatText(t,n=0){const e=Number.parseFloat(t);if(Number.isNaN(e))return u(this,J,!1),this.formatSpacing(t,n);u(this,J,!0);const r=o(this,ci).format(e)+"-";return this.formatSpacing(r,n)}beforeRenderText(){if(!o(this,yt))return;const t=o(this,yt).width*o(this,Jt),n=o(this,yt).height*o(this,Jt);this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.font=o(this,J)?`600 ${this.fontSize*.75}px 'Vertiky'`:`900 ${this.fontSize}px 'Scheherazade New', serif`;const e=this.x+this.width/2,r=o(this,J)?t+o(this,Ae):0,a=this.getTextActualHeight(this.formattedText);let c=(this.height-a)/2;o(this,J)&&(c*=.818);const l=e+r/2,h=this.y+c,p=this.width-r;if(o(this,J)){const f=Math.min(this.ctx.measureText(this.formattedText).width,p),m=e-r/2-f/2;this.ctx.globalCompositeOperation="darken",this.ctx.drawImage(o(this,yt),m,this.y,t,n)}return{x:l,y:h,maxWidth:p}}}J=new WeakMap,ci=new WeakMap,yt=new WeakMap,Jt=new WeakMap,Ae=new WeakMap;var li;class Ln extends fo{constructor(){super(...arguments);d(this,li,1.6)}setPosition(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.fontSize=this.height*o(this,li)}beforeRenderText(){this.ctx.font=`700 ${this.fontSize}px 'Scheherazade New', serif`;const t=this.getTextActualHeight(this.formattedText),n=this.height/t,e=(t-this.height)/2;this.ctx.font=`700 ${Math.floor(this.fontSize*n)}px 'Scheherazade New', serif`;const r=this.x+this.width/2,a=this.y+e;return{x:r,y:a,maxWidth:this.width}}}li=new WeakMap;const xr=""+new URL("paper-6a3dae0b.png",import.meta.url).href,Tn={x:0,y:0,width:0,height:0};var Re,wt,W,Zt,M,_e,zt,hi,mo;class Cn extends on{constructor(){super(...arguments);d(this,hi);P(this,"filter","");P(this,"shadow",0);d(this,Re,1);d(this,wt,new Map);d(this,W,null);d(this,Zt,null);d(this,M,{...Tn});d(this,_e,{...Tn});d(this,zt,{left:0,right:0,top:0,bottom:0})}async init(t,n){try{this.setBoundary(t,n);const e=await ei(xr);u(this,Zt,this.ctx.createPattern(e,"repeat"))}catch(e){throw console.error(e),new Error("Failed to create fill pattern.")}}async loadImage(t){var n;if(t)try{u(this,W,await ei(t)),g(this,hi,mo).call(this),(n=o(this,wt).get("imageloaded"))==null||n.forEach(e=>e())}catch(e){throw console.error(e),new Error("Failed to load photo image.")}}scale(t){super.scale(t),this.updateRenderPosition()}setBoundary(t,n){u(this,M,{...t}),u(this,zt,{...n})}updateRenderPosition(){if(!o(this,W))return;const t=nn(this.width,this.height,o(this,W).width,o(this,W).height),n=o(this,W).width*t,e=o(this,W).height*t,r=this.x+(this.width-n)/2,a=this.y+(this.height-e)/2;u(this,_e,{x:r,y:a,width:n,height:e}),u(this,Re,t)}on(t,n){var e;o(this,wt).has(t)||o(this,wt).set(t,[]),(e=o(this,wt).get(t))==null||e.push(n)}off(t,n){const e=o(this,wt).get(t);if(!e)return;const r=e.findIndex(a=>a===n);e.splice(r,1)}render(){if(this.ctx.save(),this.ctx.shadowColor="rgba(0, 0, 0, 1)",this.ctx.shadowBlur=this.shadow*o(this,Re),this.ctx.fillStyle=o(this,Zt)?o(this,Zt):"none",this.ctx.fillRect(o(this,M).x,o(this,M).y,o(this,M).width,o(this,M).height),!o(this,W)){this.ctx.restore();return}const{x:t,y:n,width:e,height:r}=o(this,_e);this.ctx.filter=this.filter,this.ctx.drawImage(o(this,W),t,n,e,r);const{left:a,right:c,top:l,bottom:h}=o(this,zt);t<=a&&this.ctx.clearRect(0,n,a,r),n<=l&&this.ctx.clearRect(t,0,e,l),t+e>this.ctx.canvas.domWidth-c&&this.ctx.clearRect(this.ctx.canvas.domWidth-c,n,c,r),n+r>this.ctx.canvas.domHeight-h&&this.ctx.clearRect(t,this.ctx.canvas.domHeight-h,e,h),this.ctx.restore()}}Re=new WeakMap,wt=new WeakMap,W=new WeakMap,Zt=new WeakMap,M=new WeakMap,_e=new WeakMap,zt=new WeakMap,hi=new WeakSet,mo=function(){this.x=o(this,M).x,this.y=o(this,M).y,this.width=o(this,M).width,this.height=o(this,M).height,u(this,zt,{...o(this,zt)}),u(this,M,{x:this.x,y:this.y,width:this.width,height:this.height}),this.updateRenderPosition()};const An=4,Rn=[10,5];var v,Bt,U,xt,Y,vt,Mt,Ut,Pe,ze,O,Nt,Be,Me,di,bo,ui,yo,pi,wo,fi,xo,gi,vo,mi,So,bi,ko,yi,Io,wi,Eo,Ue,Di,Ne,Gi,Oe,Qi,je,Yi,xi,Lo,vi,To,Si,Co;class vr extends on{constructor(t,n){super(t);d(this,di);d(this,ui);d(this,pi);d(this,fi);d(this,gi);d(this,mi);d(this,bi);d(this,yi);d(this,wi);d(this,Ue);d(this,Ne);d(this,Oe);d(this,je);d(this,xi);d(this,vi);d(this,Si);d(this,v,void 0);d(this,Bt,!1);d(this,U,!1);d(this,xt,!1);d(this,Y,!1);d(this,vt,An);d(this,Mt,Rn);d(this,Ut,null);d(this,Pe,0);d(this,ze,0);d(this,O,new Map);d(this,Nt,0);d(this,Be,0);d(this,Me,0);u(this,v,n),n.on("imageloaded",()=>this.reset()),t.canvas.addEventListener("mouseover",g(this,ui,yo).bind(this),{passive:!0}),t.canvas.addEventListener("mouseout",g(this,pi,wo).bind(this),{passive:!0}),t.canvas.addEventListener("wheel",g(this,di,bo).bind(this),{passive:!0}),t.canvas.addEventListener("pointerdown",g(this,gi,vo).bind(this),{passive:!0}),t.canvas.addEventListener("pointerup",g(this,mi,So).bind(this),{passive:!0}),t.canvas.addEventListener("pointercancel",g(this,bi,ko).bind(this),{passive:!0}),t.canvas.addEventListener("pointermove",g(this,yi,Io).bind(this),{passive:!0}),t.canvas.addEventListener("pointerout",g(this,wi,Eo).bind(this),{passive:!0})}set borderScale(t){u(this,vt,An*t),u(this,Mt,Rn.map(n=>n*t))}set highlight(t){u(this,Bt,t)}scale(t){super.scale(t),o(this,v).scale(t)}reset(){this.x=o(this,v).x,this.y=o(this,v).y,this.width=o(this,v).width,this.height=o(this,v).height,u(this,U,!1),u(this,xt,!1),u(this,Y,!1)}render(){!o(this,U)&&!o(this,Y)&&!o(this,Bt)||(this.ctx.save(),Ye(this,Nt)._++,o(this,Nt)>=o(this,Mt)[0]+o(this,Mt)[1]&&u(this,Nt,0),this.ctx.lineDashOffset=-o(this,Nt),this.ctx.fillStyle="rgba(255,255,255,0.5)",this.ctx.strokeStyle="red",this.ctx.lineWidth=o(this,vt),this.ctx.setLineDash(o(this,Mt)),this.ctx.fillRect(this.x,this.y,this.width,this.height),this.ctx.strokeRect(this.x,this.y,this.width,this.height),this.ctx.restore())}}v=new WeakMap,Bt=new WeakMap,U=new WeakMap,xt=new WeakMap,Y=new WeakMap,vt=new WeakMap,Mt=new WeakMap,Ut=new WeakMap,Pe=new WeakMap,ze=new WeakMap,O=new WeakMap,Nt=new WeakMap,Be=new WeakMap,Me=new WeakMap,di=new WeakSet,bo=function(t){const n=t.deltaY>0?.95:1.05;g(this,je,Yi).call(this,n)},ui=new WeakSet,yo=function(){const{left:t,top:n}=this.ctx.canvas.getBoundingClientRect();u(this,Pe,n),u(this,ze,t)},pi=new WeakSet,wo=function(){u(this,U,!1)},fi=new WeakSet,xo=function(t){const n=t.clientX-o(this,ze),e=t.clientY-o(this,Pe);if(o(this,xt)){const r=t.clientX-o(this,Be),a=t.clientY-o(this,Me);g(this,Si,Co).call(this,r,a)}o(this,Y)||g(this,xi,Lo).call(this,n,e),g(this,Ue,Di).call(this,n,e,this.x,this.y,this.width,this.height,o(this,vt))?(u(this,U,!0),u(this,Bt,!1)):u(this,U,!1),u(this,Be,t.clientX),u(this,Me,t.clientY)},gi=new WeakSet,vo=function(t){if(u(this,Bt,!1),t.pointerType==="mouse"&&t.button===0){u(this,xt,!0);return}o(this,O).set(t.pointerId,t);const{left:n,top:e}=this.ctx.canvas.getBoundingClientRect();let r=!1;for(const a of o(this,O).values()){const c=a.clientX-n,l=a.clientY-e;if(g(this,Ue,Di).call(this,c,l,this.x,this.y,this.width,this.height,o(this,vt))){r=!0;break}}u(this,U,r)},mi=new WeakSet,So=function(t){if(t.pointerType==="mouse"&&t.button===0){u(this,xt,!1),u(this,Y,!1);return}g(this,Ne,Gi).call(this,t)},bi=new WeakSet,ko=function(t){g(this,Ne,Gi).call(this,t)},yi=new WeakSet,Io=function(t){if(t.pointerType==="mouse"){g(this,fi,xo).call(this,t);return}const n=Array.from(o(this,O).values());if(n.length===1&&o(this,U)){const e=n[0],{clientX:r,clientY:a}=t,c=o(this,O).get(e.pointerId);if(c){const l=r-c.clientX,h=a-c.clientY;this.x+=l,this.y+=h,o(this,v).x+=l,o(this,v).y+=h,o(this,v).updateRenderPosition()}}if(n.length===2&&o(this,U)){const e=o(this,O).get(n[0].pointerId),r=o(this,O).get(n[1].pointerId);if(e&&r){const a=n[0].pointerId===t.pointerId?n[1]:n[0],c=g(this,Oe,Qi).call(this,a,t),l=g(this,Oe,Qi).call(this,e,r),h=c>l?1.02:.98;g(this,je,Yi).call(this,h)}}o(this,O).set(t.pointerId,t)},wi=new WeakSet,Eo=function(t){t.pointerType==="mouse"&&(u(this,xt,!1),u(this,Y,!1))},Ue=new WeakSet,Di=function(t,n,e,r,a,c,l=0){const h=l/2,p=e-h,f=r-h,m=e+a+h,y=r+c+h,k=t>=p&&t<=m,w=n>=f&&n<=y;return k&&w},Ne=new WeakSet,Gi=function(t){o(this,O).delete(t.pointerId),o(this,O).size||u(this,U,!1)},Oe=new WeakSet,Qi=function(t,n){const e=Math.abs(t.clientX-n.clientX),r=Math.abs(t.clientY-n.clientY);return Math.pow(e,2)+Math.pow(r,2)},je=new WeakSet,Yi=function(t){const n=this.width*t-this.width,e=this.height*t-this.height;this.x=this.x-n/2,this.width=this.width+n,this.y=this.y-e/2,this.height=this.height+e,o(this,v).x=this.x,o(this,v).y=this.y,o(this,v).width=this.width,o(this,v).height=this.height,o(this,v).updateRenderPosition()},xi=new WeakSet,Lo=function(t,n){const e=g(this,vi,To).call(this,t,n,this.x,this.y,this.width,this.height,o(this,vt));e.left||e.right?(this.ctx.canvas.style.cursor="ew-resize",u(this,Ut,e.left?"left":"right")):e.top||e.bottom?(this.ctx.canvas.style.cursor="ns-resize",u(this,Ut,e.top?"top":"bottom")):o(this,U)?this.ctx.canvas.style.cursor="move":this.ctx.canvas.style.cursor="default"},vi=new WeakSet,To=function(t,n,e,r,a,c,l=0){const h=l/2,p=e-h,f=r-h,m=e+a+h,y=r+c+h,k=e+h,w=r+h,Et=e+a-h,et=r+c-h;return{left:t>=p&&t<=k,right:t>=Et&&t<=m,top:n>=f&&n<=w,bottom:n>=et&&n<=y}},Si=new WeakSet,Co=function(t,n){switch(this.ctx.canvas.style.cursor){case"move":this.x+=t,this.y+=n,o(this,v).x+=t,o(this,v).y+=n,o(this,v).updateRenderPosition();break;case"ew-resize":{if(u(this,Y,!0),o(this,Ut)==="right"){const e=Math.max(this.width+t,1);this.width=e,o(this,v).width=e}else{const e=this.x+t;if(e>=this.x+this.width)break;const r=this.width-t;this.x=e,o(this,v).x=e,this.width=r,o(this,v).width=r}o(this,v).updateRenderPosition();break}case"ns-resize":{if(u(this,Y,!0),o(this,Ut)==="bottom"){const e=Math.max(this.height+n,1);this.height=e,o(this,v).height=e}else{const e=this.y+n;if(e>=this.y+this.height)break;const r=this.height-n;this.y=e,o(this,v).y=e,this.height=r,o(this,v).height=r}o(this,v).updateRenderPosition()}}};var j,C,Z,qe,X,Ot,ki,Ao;class _n{constructor(s,t){d(this,ki);d(this,j,void 0);d(this,C,void 0);d(this,Z,0);d(this,qe,1);d(this,X,null);d(this,Ot,void 0);u(this,j,s),u(this,C,s.canvas),u(this,Ot,t)}async loadImage(){let s;try{s=await ei(o(this,Ot).imageUrl),u(this,X,s)}catch(t){throw console.error(t),new Error("Failed to load wanted image.")}return s}get imageScale(){return o(this,qe)}setSize({width:s,height:t,shadowSize:n,quality:e}){if(!o(this,X))throw new Error("Failed to set size: wanted image is null");const r=o(this,X).width+n*2,a=o(this,X).height+n*2,c=nn(s,t,r,a);u(this,qe,c);const l=r*c,h=a*c;switch(u(this,Z,n*c),o(this,C).style.width=l+"px",o(this,C).style.height=h+"px",o(this,C).domWidth=l,o(this,C).domHeight=h,e){case"original":o(this,C).width=r,o(this,C).height=a,o(this,j).scale(1/c,1/c);break;case"high":{const f=window.devicePixelRatio;o(this,C).width=l*f,o(this,C).height=h*f,o(this,j).scale(f,f);break}case"half":{const f=o(this,X).height/h/2;o(this,C).width=l*f,o(this,C).height=h*f,o(this,j).scale(f,f);break}}return g(this,ki,Ao).call(this,c,n)}render(){o(this,X)&&(o(this,j).save(),o(this,j).shadowColor="rgba(0, 0, 0, 1)",o(this,j).shadowBlur=o(this,Z)*(o(this,C).width/o(this,C).domWidth),o(this,j).drawImage(o(this,X),o(this,Z),o(this,Z),o(this,C).domWidth-o(this,Z)*2,o(this,C).domHeight-o(this,Z)*2),o(this,j).restore())}}j=new WeakMap,C=new WeakMap,Z=new WeakMap,qe=new WeakMap,X=new WeakMap,Ot=new WeakMap,ki=new WeakSet,Ao=function(s,t){if(!o(this,Ot))throw new Error("Failed to calculate wanted image info: WantedImageInfo object is null");t*=s;const{imageUrl:n,bellyImageUrl:e,photoPosition:r,namePosition:a,bountyInfo:c,boundaryOffset:l}=o(this,Ot),h=f=>{const{x:m,y,width:k,height:w}=f;return{x:m*s+t,y:y*s+t,width:k*s,height:w*s}},p={...h(c),bellyMarginRight:c.bellyMarginRight*s,fontSize:c.fontSize*s};return{imageUrl:n,bellyImageUrl:e,photoPosition:h(r),namePosition:h(a),bountyInfo:p,boundaryOffset:{left:l.left*s+t,right:l.right*s+t,top:l.top*s+t,bottom:l.bottom*s+t}}};const Sr="wanted-poster",kr=["name","bounty","name-spacing","bounty-spacing","photo-url","filter","poster-shadow","photo-shadow"];var jt,St,Fe,z,kt,D,q,B,tt,te,$e,F,G,Ii,Ro,He,Xi,We,Vi;class Ir extends HTMLElement{constructor(){super();d(this,F);d(this,Ii);d(this,He);d(this,We);d(this,jt,void 0);d(this,St,void 0);d(this,Fe,void 0);d(this,z,void 0);d(this,kt,void 0);d(this,D,void 0);d(this,q,void 0);d(this,B,void 0);d(this,tt,void 0);d(this,te,void 0);d(this,$e,void 0);u(this,tt,"init");const t=this.attachShadow({mode:"open"}),n=document.createElement("canvas");n.domWidth=0,n.domHeight=0;const e=document.createElement("div");e.className="container";const r=document.createElement("style");r.textContent=wr,t.append(r,e);const a=n.getContext("2d");u(this,jt,e),u(this,St,n),u(this,Fe,a),u(this,B,new _n(a,Bi)),u(this,z,new Cn(a)),u(this,D,new Ln(a)),u(this,q,new En(a)),u(this,kt,new vr(a,o(this,z))),u(this,te,new ResizeObserver(()=>{clearTimeout(o(this,$e)),u(this,$e,window.setTimeout(()=>g(this,He,Xi).call(this),200))})),o(this,te).observe(e)}static get observedAttributes(){return kr}async connectedCallback(){console.log("[connected]"),await new Promise(e=>{setTimeout(()=>e(""))}),u(this,tt,"loading");const t=g(this,F,G).call(this,"poster-shadow"),n=o(this,jt).getBoundingClientRect();try{await o(this,B).loadImage();const e=o(this,B).setSize({width:n.width,height:n.height,shadowSize:t,quality:"half"});o(this,D).setPosition(e.namePosition),o(this,q).setBountyInfo(e.bountyInfo,o(this,B).imageScale),await o(this,q).loadBellyImage(Bi.bellyImageUrl),await o(this,z).init(e.photoPosition,e.boundaryOffset),await o(this,z).loadImage(this.getAttribute("photo-url"))}catch(e){u(this,tt,"error"),console.error("Failed to init wanted poster.",e);return}o(this,D).text=this.getAttribute("name")??"",o(this,q).text=this.getAttribute("bounty")??"",o(this,D).spacing=g(this,F,G).call(this,"name-spacing"),o(this,q).spacing=g(this,F,G).call(this,"bounty-spacing"),o(this,z).shadow=g(this,F,G).call(this,"photo-shadow"),o(this,z).filter=this.getAttribute("filter")??"",u(this,tt,"success"),g(this,We,Vi).call(this),o(this,jt).appendChild(o(this,St)),this.dispatchEvent(new CustomEvent("WantedPosterLoaded",{bubbles:!0}))}disconnectedCallback(){console.log("[disconnected]"),o(this,te).disconnect()}adoptedCallback(){console.log("[adopted]")}async attributeChangedCallback(t,n,e){if(o(this,tt)==="success")switch(t){case"name":o(this,D).text=e;break;case"bounty":o(this,q).text=e;break;case"name-spacing":o(this,D).spacing=parseInt(e)||0;break;case"bounty-spacing":o(this,q).spacing=parseInt(e)||0;break;case"photo-url":{await o(this,z).loadImage(e),o(this,kt).highlight=!se.photoUrls.includes(e);break}case"filter":{o(this,z).filter=e;break}case"poster-shadow":{g(this,He,Xi).call(this);break}case"photo-shadow":o(this,z).shadow=parseInt(e)||0}}async export(){const t=document.createElement("canvas");t.domWidth=0,t.domHeight=0,t.style.display="none";const n=t.getContext("2d"),e=g(this,F,G).call(this,"poster-shadow"),r=new _n(n,Bi),a=new Cn(n),c=new Ln(n),l=new En(n),h=await r.loadImage(),p=h.width+e*2,f=h.height+e*2,m=r.setSize({width:p,height:f,shadowSize:e,quality:"original"});await l.loadBellyImage(m.bellyImageUrl),c.setPosition(m.namePosition),l.setBountyInfo(m.bountyInfo,1),c.text=this.getAttribute("name")??"",l.text=this.getAttribute("bounty")??"",c.spacing=g(this,F,G).call(this,"name-spacing"),l.spacing=g(this,F,G).call(this,"bounty-spacing"),await a.init(m.photoPosition,m.boundaryOffset),await a.loadImage(this.getAttribute("photo-url")),a.shadow=g(this,F,G).call(this,"photo-shadow");const{x:y,y:k,width:w,height:Et,filter:et}=o(this,z);a.x=y/o(this,B).imageScale,a.y=k/o(this,B).imageScale,a.width=w/o(this,B).imageScale,a.height=Et/o(this,B).imageScale,a.filter=et,a.updateRenderPosition(),a.render(),r.render(),l.render(),c.render();let E="";try{const _=await new Promise((Ti,ee)=>{t.toBlob(x=>{x?Ti(x):ee("Failed to create blob object.")},"image/png",1)});E=URL.createObjectURL(_),g(this,Ii,Ro).call(this,E,"wanted-poster.png")}finally{E&&URL.revokeObjectURL(E)}}}jt=new WeakMap,St=new WeakMap,Fe=new WeakMap,z=new WeakMap,kt=new WeakMap,D=new WeakMap,q=new WeakMap,B=new WeakMap,tt=new WeakMap,te=new WeakMap,$e=new WeakMap,F=new WeakSet,G=function(t){const n=this.getAttribute(t)||"0";return parseInt(n)||0},Ii=new WeakSet,Ro=function(t,n){const e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("download",n),e.style.display="none",document.body.appendChild(e),e.click(),e.remove()},He=new WeakSet,Xi=function(){if(o(this,tt)!=="success")return;const t=g(this,F,G).call(this,"poster-shadow"),n=o(this,jt).getBoundingClientRect(),e=o(this,St).getBoundingClientRect(),r=nn(n.width,n.height,e.width,e.height),a=o(this,B).setSize({width:n.width,height:n.height,shadowSize:t,quality:"half"});o(this,D).setPosition(a.namePosition),o(this,q).setBountyInfo(a.bountyInfo,o(this,B).imageScale),o(this,z).setBoundary(a.photoPosition,a.boundaryOffset),o(this,kt).scale(r),o(this,kt).borderScale=o(this,B).imageScale},We=new WeakSet,Vi=function(){o(this,Fe).clearRect(0,0,o(this,St).domWidth,o(this,St).domHeight),o(this,z).render(),o(this,B).render(),o(this,q).render(),o(this,D).render(),o(this,kt).render(),requestAnimationFrame(g(this,We,Vi).bind(this))};customElements.define(Sr,Ir);
